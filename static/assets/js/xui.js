/*
* CrossUI(xui) JavaScript Library v1.4
* http://crossui.com
* 
* Copyright ( 2004 ~ present) CrossUI.com
* Released under the MIT license
*
*/
undefined;_=function(){return +new Date()};Namespace=function(e){var d=e.split("."),c=window;return _.get(c,d)||_.set(c,d,{})};Class=function(F,s,m){var e,A=[],q=Class,l=window,z=q._fun,g=q._reg,h,v,y,p,C,d=q._all,D=function(f){return(f+"").replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(j){return j.charAt(0)!=")"?"":j})};m=m||{};if(!q._ignoreNSCache&&(p=_.get(l,F.split(".")))&&typeof(p)=="function"&&p.$xuiclass$){return q._last=p}if(p=_.get(l,["xui","$cache","SC"])){delete p[F]}s=(!s?[]:typeof s=="string"?[s]:s);for(y=0;p=s[y];y++){if(!(A[y]=(_.get(l,p.split("."))||(xui&&xui.SC&&xui.SC(p))))){throw"errNoParent--"+p}}if(m.Dependencies){if(typeof m.Dependencies=="string"){m.Dependencies=[m.Dependencies]}for(y=0;p=m.Dependencies[y];y++){if(!(_.get(l,p.split("."))||(xui&&xui.SC&&xui.SC(p)))){throw"errNoDependency--"+p}}}h=A[0];var c=m.$Start||(h&&h.$Start);_.tryF(c,[],m);e=m.Static||{};p={};for(y in e){if(g[y]){p[y]=1}}for(y in p){delete e[y]}e.Before=m.Before||(h&&h.Before);e.After=m.After||(h&&h.After);e.$Start=c;e.$End=m.$End||(h&&h.$End);e.__gc=m.__gc||e.__gc||(h&&h.__gc)||function(){Class.__gc(this.$key)};var n=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof m.Constructor=="function"){v=z(m.Constructor,"Constructor",F,h||n,"constructor");v.Constructor=D(m.Constructor)}else{if(h){var B=n,r=h.Constructor;if(r){B=new Function(r.slice(r.indexOf("(")+1,r.indexOf(")")).split(","),r.slice(r.indexOf("{")+1,r.lastIndexOf("}")))}v=z(B,"Constructor",F,h.upper,"constructor");v.Constructor=D(r)}else{v=n}}C=_.fun();for(y=A.length-1;p=A[y--];){_.merge(C,p);_.merge(C.prototype,p.prototype)}v.KEY=v.$key=v.prototype.KEY=v.prototype.$key=F;q._wrap(v,e,0,C,"static");if(p=m.Instance){q._wrap(v.prototype,p,1,C.prototype,"instance")}q._inherit(v,C);q._inherit(v.prototype,C.prototype);C=null;if(_.tryF(v.Before,arguments,v)===false){return false}for(y=0;p=A[y];y++){p=(p.$children||(p.$children=[]));for(var x=0,u=p.length,E;x<u;x++){if(p[u]==F){E=true;break}}if(!E){p[p.length]=F}}v.$xui$=v.$xuiclass$=1;v.$children=[];v.$parent=A;v.prototype.constructor=v;v.prototype.$xui$=1;v[F]=v.prototype[F]=true;C=p=_.get(l,F.split("."));_.set(l,F.split("."),v);if(Object.prototype.toString.call(C)=="[object Object]"){for(y in C){v[y]=C[y]}}_.tryF(v.After,[],v);_.tryF(m.Initialize,[],v);_.tryF(v.$End,[],v);_.breakO([m.Static,m.Instance,m],2);if(!(F in d)){d[F]=d.length;d.push(F)}return q._last=v};linb=xui=function(d,c){return xui.Dom.pack(d,c)};_.merge=function(j,h,d,g){var c,e;if(typeof d=="function"){e=d;d="fun"}switch(d){case"fun":for(c in h){if((g||h.hasOwnProperty(c))&&true===e(h[c],c)){j[c]=h[c]}}break;case"all":for(c in h){if((g||h.hasOwnProperty(c))){j[c]=h[c]}}break;case"with":for(c in h){if((g||h.hasOwnProperty(c))&&j.hasOwnProperty(c)){j[c]=h[c]}}break;default:for(c in h){if((g||h.hasOwnProperty(c))&&!j.hasOwnProperty(c)){j[c]=h[c]}}}return j};new function(){var g=0,h=["ms","moz","webkit","o"],e=window,f=0,d=h.length,c;for(;f<d&&!e.requestAnimationFrame&&(c=h[f++]);){e.requestAnimationFrame=e[c+"RequestAnimationFrame"];e.cancelAnimationFrame=e[c+"CancelAnimationFrame"]||e[c+"CancelRequestAnimationFrame"]}if(!e.requestAnimationFrame){e.requestAnimationFrame=function(n,k){var j=(new Date()).getTime(),l=Math.max(0,1000/60-(j-g)),m=setTimeout(function(){n(j+l)},l);g=j+l;return m}}if(!e.cancelAnimationFrame){e.cancelAnimationFrame=function(j){clearTimeout(j)}}};_.merge(_,{rand:function(){return parseInt(_()*Math.random(),10).toString(36)},setTimeout:function(d,c){return(c||0)>1000/60?(setTimeout(d,c)*-1):requestAnimationFrame(d)},clearTimeout:function(c){if(c>=0){cancelAnimationFrame(c)}else{clearTimeout(Math.abs(c))}},fun:function(){return function(){}},exec:function(c,l){var g=this,j=document,f=j.getElementsByTagName("head")[0]||j.documentElement,e=j.createElement("script"),k;e.type="text/javascript";if(l){if((k=j.getElementById(l))&&k.parentNode==f){f.removeChild(k)}e.id=l}if(xui.browser.ie){e.text=c}else{e.appendChild(j.createTextNode(c))}f.appendChild(e);e.disalbed=true;e.disabled=false;if(!l){f.removeChild(e)}return e},get:function(g,f){if(!f){return g}if(!_.isSet(g)){return undefined}else{if(typeof f=="string"){return g[f]}else{for(var e=0,c=f.length,d;e<c;){if(!(d=f[e++]+"")){continue}if(!g||(g=d!=(d=d.replace("()",""))?(typeof(g[d])=="function"&&0!==d.indexOf("set"))?g[d]():undefined:g[d])===undefined){return}}return g}}},set:function(j,h,g){if(!j){return}if(typeof h!="string"){var d,e=0,c,f=h.length-1;for(;e<f;){d=h[e++];if(j[d]&&((c=typeof j[d])=="object"||c=="function")){j=j[d]}else{j=j[d]={}}}h=h[f]}if(h!=(h=(h+"").replace("()",""))){if(typeof(j[h])=="function"){j[h](g);return g}}else{if(g===undefined){if(j.hasOwnProperty&&j.hasOwnProperty(h)){delete j[h]}else{j[h]=undefined}}else{return j[h]=g}}},tryF:function(c,d,e,f){return(c&&typeof c=="function")?c.apply(e||{},d||[]):f},asyRun:function(c,f,d,e){return _.setTimeout(typeof c=="string"?function(){_.exec(c)}:function(){c.apply(e,d||[]);c=d=null},f||0)},asyHTML:function(e,h,f,d){var g=document.createElement("div"),c=document.createDocumentFragment();g.innerHTML=e;(function(){var j=d||10;while(--j&&g.firstChild){c.appendChild(g.firstChild)}if(g.firstChild){_.setTimeout(arguments.callee,f||0)}else{h(c)}})()},isEmpty:function(d){if(d==null){return true}if(_.isNumb(d)){return false}if(_.isArr(d)||_.isStr(d)||_.isArguments(d)){return d.length===0}for(var c in d){if(_._has.call(d,c)){return false}}return true},resetRun:function(g,c,l,f,h){var j=arguments.callee,e=g,d=j.$cache||((j.exists=function(m){return this.$cache[m]})&&(j.$cache={}));if(d[e]){_.clearTimeout(d[e])}if(typeof c=="function"){d[e]=_.setTimeout(function(){delete d[e];c.apply(h||null,f||[])},l||0)}else{delete d[e]}},observableRun:function(f,d,e,c){xui.Thread.observableRun(f,d,e,c)},breakO:function(j,k){var m=k||1,c=1+(arguments[2]||0),d=arguments.callee,g="___gc_",f;if(j&&(typeof j=="object"||typeof j=="function")&&j!==window&&j!==document&&j.nodeType!==1){try{if(j.hasOwnProperty(g)){return}else{j[g]=null}}catch(h){return}try{for(f in j){if(j.hasOwnProperty(f)&&j[f]){if(typeof j[f]=="object"||typeof j[f]=="function"){if(c<m){d(j[f],m,c)}}try{j[f]=null}catch(h){}}}}catch(h){return}if(j.length){j.length=0}delete j[g]}},each:function(f,c,e){e=e||f;for(var d in f){if(false===c.call(e,f[d],d,f)){break}}return f},toFixedNumber:function(h,j){if(!_.isSet(j)){j=2}var c=Math.abs(h),g=""+Math.round(c*Math.pow(10,j)),e,f,k,d;if(/\D/.test(g)){e=""+c}else{while(g.length<1+j){g="0"+g}k=g.substring(0,f=(g.length-j));d=g.substring(f);if(d){d="."+d}e=k+d}return parseFloat((h<0?"-":"")+e)},toNumeric:function(f,c,e,d){if(!_.isNumb(f)){f=parseFloat((f+"").replace(/\s*(e\+|[^0-9])/g,function(h,g,j){return g=="e+"||g=="E+"||(j==0&&g=="-")?g:g==d?".":""}))||0}if(_.isSet(c)&&c>=0){f=_.toFixedNumber(f,c)}return f},formatNumeric:function(g,c,f,d,e){if(_.isSet(c)){c=parseInt(c,10)}c=(c||c===0)?c:0;f=_.isSet(f)?f:",";d=d||".";g=""+parseFloat(g);if(g.indexOf("e")==-1){g=_.toFixedNumber(g,c)+"";g=g.split(".");if(e!==false){if((g[1]?g[1].length:0)<c){g[1]=(g[1]||"")+_.str.repeat("0",c-(g[1]?g[1].length:0))}}g[0]=g[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+f).split("").reverse().join("");return g.join(d)}else{return g}},copy:function(d,c){return _.clone(d,c,1)},clone:function(f,c,p){var k=arguments[3]||0;if(f&&(_.isHash(f)||_.isArr(f))){if(_.isObj(f)){var m=arguments.callee,e=_.isArr(f),j=e?[]:{},g=0,n,d;if(!p){if(p<=0){return f}else{p=100}}if(e){d=f.length;for(;g<d;g++){if(typeof c=="function"&&false===c.call(f,f[g],g,k+1)){continue}j[j.length]=((n=f[g])&&p&&(_.isHash(n)||_.isArr(n)))?m(n,c,p-1,k+1):n}}else{for(g in f){if(c===true?g.charAt(0)=="_":c===false?(g.charAt(0)=="_"||g.charAt(0)=="$"):typeof c=="function"?false===c.call(f,f[g],g,k+1):0){continue}j[g]=((n=f[g])&&p&&(_.isHash(n)||_.isArr(n)))?m(n,c,p-1,k+1):n}}return j}else{return f}}else{return f}},filter:function(g,d,c){if(!c&&g&&_.isArr(g)){var h,f,k,j=[],e;for(h=0,f=g.length;h<f;h++){j[j.length]=g[h]}g.length=0;for(h=0,f=j.length;h<f;h++){if(typeof d=="function"?false!==d.call(j,j[h],h):1){g[g.length]=j[h]}}}else{var h,m={};for(h in g){if(d===true?h.charAt(0)=="_":d===false?(h.charAt(0)=="_"||h.charAt(0)=="$"):typeof d=="function"?false===d.call(g,g[h],h):0){m[h]=1}}for(h in m){delete g[h]}}return g},toArr:function(g,e){if(!g){return[]}var c=[];if(typeof e=="boolean"){for(var f in g){c[c.length]=e?f:g[f]}}else{if(_.isHash(g)){for(var f in g){c.push({key:f,value:g[f]})}}else{if(typeof g=="string"){c=g.split(e||",")}else{for(var f=0,d=g.length;f<d;++f){c[f]=g[f]}}}}return c},toUTF8:function(c){return c.replace(/[^\x00-\xff]/g,function(e,d){return"\\u"+((d=e.charCodeAt())<16?"000":d<256?"00":d<4096?"0":"")+d.toString(16)})},fromUTF8:function(c){return c.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(e,d,f){return String.fromCharCode((parseInt(d,16)*16+parseInt(f,16)))})},urlEncode:function(e){var c=[],d,f;for(d in e){if(_.isDefined(f=e[d])){c.push(encodeURIComponent(d)+"="+encodeURIComponent(typeof f=="string"?f:_.serialize(f)))}}return c.join("&")},urlDecode:function(k,n){if(!k){return n?"":{}}var h,f={},m=k.split("&"),c;for(var g=0,d=m.length;g<d;g++){c=m[g];h=c.split("=");try{f[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}catch(j){f[h[0]]=h[1]}}return n?f[n]:f},preLoadImage:function(g,f,h){if(_.isArr(g)){for(var e=0,c=arr.length;e<c;e++){_.preLoadImage(g[e],f,h)}return c}var d=document.createElement("img");d.style.cssText="position:absolute;left:-999px;top:-999px";d.width=d.height=2;d.onload=function(){if(typeof f=="function"){f.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};d.onerror=function(){if(typeof h=="function"){h.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};document.body.appendChild(d);d.src=g;return 1},_to:Object.prototype.toString,_has:Object.prototype.hasOwnProperty,_ht:/^\s*function\s+Object\(\s*\)/,isDefined:function(c){return c!==undefined},isNull:function(c){return c===null},isSet:function(c){return c!==undefined&&c!==null&&c!==NaN},isObj:function(c){return !!c&&(typeof c=="object"||typeof c=="function")},isHash:function(c){return !!c&&_._to.call(c)=="[object Object]"&&c.constructor&&_._ht.test(c.constructor.toString())&&!_._has.call(c,"callee")},isBool:function(c){return typeof c=="boolean"},isNumb:function(c){return typeof c=="number"&&isFinite(c)},isFinite:function(c){return(c||c===0)&&isFinite(c)&&!isNaN(parseFloat(c))},isDate:function(c){return _._to.call(c)==="[object Date]"&&isFinite(+c)},isFun:function(c){return _._to.call(c)==="[object Function]"},isArr:function(c){return _._to.call(c)==="[object Array]"},isReg:function(c){return _._to.call(c)==="[object RegExp]"},isStr:function(c){return _._to.call(c)==="[object String]"},isArguments:function(c){return c&&(_._to.call(c)==="[object Arguments]"||_._has.call(c,"callee"))},isElem:function(c){return !!(c&&c.nodeType===1)},isNaN:function(c){return typeof c=="number"&&c!=+c},str:{startWith:function(d,c){return d.indexOf(c)===0},endWith:function(d,e){var c=d.length-e.length;return c>=0&&d.lastIndexOf(e)===c},repeat:function(d,c){return new Array(c+1).join(d)},initial:function(c){return c.charAt(0).toUpperCase()+c.substring(1)},trim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):c},ltrim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+/,""):c},rtrim:function(c){return c?c.replace(/(\s|\uFEFF|\xA0)+$/,""):c},toDom:function(h){var g=xui.$getGhostDiv(),f=[];g.innerHTML=h;for(var e=0,d=g.childNodes,c=d.length;e<c;e++){f[f.length]=d[e]}g=null;return xui(f)}},arr:{fastSortObject:function(k,h){if(!k||k.length<2){return k}var q=k.length,m=[],l=(q+"").length,d=Object.prototype,e,u,n,r;for(var g=0;g<l;g++){m[g]=new Array(l-g).join("0")}for(var f=0;f<q;f++){u=f+"";n=k[f];if(typeof n=="object"){n._xui_$s$=(_.isSet(r=h.call(n,f))?r:"")+m[u.length-1]+u}}try{e=d.toString;d.toString=function(){return this.hasOwnProperty("_xui_$s$")?(this._xui_$s$):(e.call(this))};k.sort()}finally{d.toString=e;for(var f=0;f<q;f++){if(typeof k[f]=="object"){delete k[f]._xui_$s$}}}return k},stableSort:function(d,h){if(d&&d.length>1){for(var g=0,f=d.length,e=[],c=[];g<f;g++){c[g]=d[e[g]=g]}if(_.isFun(h)){e.sort(function(j,k){return h.call(d,d[j],d[k])||(j>k?1:-1)})}else{e.sort(function(j,k){return d[j]>d[k]?1:d[j]<d[k]?-1:j>k?1:-1})}for(g=0;g<f;g++){d[g]=c[e[g]]}e.length=c.length=0}return d},subIndexOf:function(c,f,g){if(g===undefined){return -1}for(var e=0,d=c.length;e<d;e++){if(c[e]&&c[e][f]===g){return e}}return -1},removeFrom:function(c,d,e){c.splice(d,e||1);return c},removeValue:function(c,f){for(var d=c.length,e=d-1;e>=0;e--){if(c[e]===f){c.splice(e,1)}}return c},insertAny:function(c,h,g,f){var e=c.length;f=(!_.isArr(h))||f;if(g===0){if(f){c.unshift(h)}else{c.unshift.apply(c,h)}}else{var d;if(!g||g<0||g>e){g=e}if(g!=e){d=c.splice(g,e-g)}if(f){c[c.length]=h}else{c.push.apply(c,h)}if(d){c.push.apply(c,d)}}return g},indexOf:function(c,f){for(var e=0,d=c.length;e<d;e++){if(c[e]===f){return e}}return -1},each:function(c,f,h,j){var g,e,d=c;if(!d){return d}if(!_.isArr(d)){if(!_.isArr(d._nodes)){return d}d=d._nodes;if(j===undefined){j=1}}e=d.length;h=h||c;if(!j){for(g=0;g<e;g++){if(f.call(h,d[g],g,d)===false){break}}}else{for(g=e-1;g>=0;g--){if(f.call(h,d[g],g,d)===false){break}}}return c},removeDuplicate:function(c,g){var e=c.length,d=c.concat();c.length=0;for(var f=e-1;f>=0;f--){if(g?this.subIndexOf(d,g,d[f][g])===f:this.indexOf(d,d[f])===f){c.push(d[f])}}return c.reverse()}}});_.merge(_.fun,{body:function(c){var d=""+c;d=d.replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(e){return e.charAt(0)!=")"?"":e});return d.slice(d.indexOf("{")+1,d.lastIndexOf("}"))},args:function(c){var d=""+c;d=d.replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,function(e){return e.charAt(0)!=")"?"":e});d=d.slice(d.indexOf("(")+1,d.indexOf(")")).split(/\s*,\s*/);return d[0]&&d},clone:function(c){return new Function(_.fun.args(c),_.fun.body(c))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(c,d,e,g,f){c.$name$=d;c.$original$=e;if(f){c.$type$=f}if(g&&c!==g){c.upper=g}return c},_other:["toString","valueOf"],_o:{},_inherit:function(f,h,c){var d,g,e=this._reg;for(d in h){if(d in f||(!c&&e[d])||d.charAt(0)=="$"){continue}g=h[d];if(g&&g.$xui$){continue}f[d]=g}},_wrap:function(s,d,v,u,h){var w=this,n,m,g,l=s.KEY,c=w._reg,e=w._reg2,q=w._fun,p=w._other;for(n in d){if(e[n]||(!v&&c[n])){continue}g=d[n];s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}for(m=0;n=p[m++];){g=d[n];if(g&&(g==w._o[n])){continue}s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}},__gc:function(g){var c=Class._all;if(!g){for(var f=c.length-1;f>0;f--){Class.__gc(c[f])}return}if(typeof g=="object"){g=g.KEY||""}var e=_.get(window,g.split(".")),h,f,d;if(e){if(h=_.get(window,["xui","$cache","SC"])){delete h[g]}if(e.$parent){e.$parent.length=0}if(h=e.$children){for(var f=0,k;k=h[f];f++){if(k=_.get(window,k.split("."))){k.__gc()}}h.length=0}for(f in e){if(f!="upper"&&typeof e[f]=="function"){for(d in e[f]){if(e[f].hasOwnProperty(d)){delete e[f][d]}}}}_.breakO(e);e=e.prototype;for(f in e){if(f!="upper"&&typeof e[f]=="function"){for(d in e[f]){if(e[f].hasOwnProperty(d)){delete e[f][d]}}}}_.breakO(e);_.set(window,g.split("."))}c.splice(c[g],1);delete c[g]},destroy:function(c){Class.__gc(c)}});_.merge(xui,{version:1.4,$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",$rand:"_r_",debugMode:true,Locale:{},$cache:{thread:{},SC:{},clsByURI:{},fetching:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],data:{},callback:{},domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(d,f,h,g){if(d===null||d===undefined||f===null||f===undefined||typeof h!="function"){return}var j=xui.$cache.subscribes,e;j[d]=j[d]||[];e=_.arr.subIndexOf(j[d],"id",f);if(e!=-1){_.arr.removeFrom(j[d],e)}return j[d].push({id:f,receiver:h,asy:!!g})},unsubscribe:function(d,f){var g=xui.$cache.subscribes,e;if(!f){if(d===null||d===undefined){g={}}else{delete g[d]}}else{if(g[d]){e=_.arr.subIndexOf(g[d],"id",f);if(e!=-1){_.arr.removeFrom(g[d],e)}}}},publish:function(e,d,g,f){var h=xui.$cache.subscribes;if(e===null||e===undefined){for(var e in h){_.arr.each(h[e],function(c){if(!g||g===c.id||(_.isArr(g)&&_.arr.indexOf(g,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,f)}else{return _.tryF(c.receiver,d,f,true)}}})}}else{if(h[e]){_.arr.each(h[e],function(c){if(!g||g===c.id||(_.isArr(g)&&_.arr.indexOf(g,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,f)}else{return _.tryF(c.receiver,d,f,true)}}})}}},getSubscribers:function(c){return(c===null||c===undefined)?xui.$cache.subscribes:xui.$cache.subscribes[c]},setDateFormat:function(c){xui.$dateFormat=c},getDateFormat:function(){return xui.$dateFormat},setAppLangKey:function(c){xui.$appLangKey=c},getAppLangKey:function(c){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(r,u){var k=xui.getRes,w,s,h,e,n,c,p,q=[],d;xui.$localeKey=r;s=xui.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(h=0;w=s[h];h++){if(w.id==xui.$localeDomId){q[q.length]=w}}d=q.length;n=function(){(function(){e=q.splice(0,100);for(h=0;w=e[h];h++){if(w.className&&typeof(s=k(w.className))=="string"){w.innerHTML=s}}if(q.length){_.setTimeout(arguments.callee,0)}_.tryF(u,[q.length,d])}())},p="xui.Locale."+r,c=function(){var f=xui.$appLangKey;if(f){xui.include(p+"."+f,xui.getPath("Locale."+r,".js"),n,n)}else{n()}};xui.include(p+".inline.$_$",xui.getPath(p,".js"),c,c)},getTheme:function(c){try{c=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(d){}finally{return c||"default"}},setTheme:function(l,j,d,c){l=l||"default";var m=xui.getTheme();if(l!=m){var n=function(p){if(m!="default"){var e;while(e=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",m)){e.disabled=true;e.parentNode.removeChild(e);e=null}}if(j!==false){xui.$CSSCACHE={};if(xui.UI){xui.UI.getAll().reLayout(true)}}_.tryF(p)};if(l=="default"){n(d)}else{try{var g=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(h){}finally{if(g==l){_.tryF(d);return}else{xui.CSS.includeLink(xui.getPath("xui.appearance."+l,"/theme.css"),"theme:"+l)}var f=0,k=function(){if(f++>20){k=f=null;if(false!==_.tryF(c)){throw"errLoadTheme:"+l}return}try{var q=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(p){}finally{if(q==l){n(d);k=f=null}else{_.asyRun(k,100*f)}}};k()}}}else{_.tryF(d)}},$CSSCACHE:{},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w\[\]]*|[\w\[\]]+(\(\))?(\.[\w\[\]]+(\(\))?)*)(\}))/g,_escapeMap:{"$":"\x01",".":"\x02","-":"\x03",")":"\x04","@":"\x05"},_unescapeMap:{"\x01":"$","\x02":".","\x03":"-","\x04":")","\x05":"@"},getRes:function(g){var c,d,e,h=arguments,f;if(_.isStr(g)){g=g.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k});if(g.charAt(0)=="$"){g=g.slice(1)}if(g.indexOf("-")!=-1){e=g.split("-");g=e[0];h=e}else{if(_.isArr(h[1])){h=h[1];h.unshift(g)}}c=g.split(".");c[c.length-1]=c[c.length-1].replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})}else{if(_.isArr(g)){c=g}else{return g}}d=_.get(xui.Locale[xui.$localeKey],c);if((e=typeof d)=="function"){return d.apply(null,h)}else{if(e=="object"){return d}else{d=e=="string"?d.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k}):c[c.length-1];f=h.length>1?d.replace(xui._langParamReg,function(l,m,j){j=h[1+ +m];return(j===null||j===undefined)?l:j}):d;return f.replace(/([\x01\x02\x03])/g,function(j){return xui._unescapeMap[j]})}}},wrapRes:function(f){if(!_.isStr(f)){return f}var c=f,d,e;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=f;e=xui.getRes.apply(null,arguments);if(d==e){e=c}return'<span id="'+xui.$localeDomId+'" class="'+d.replace(/([\x01\x02\x03\x04])/g,function(g){return"$"+xui._unescapeMap[g]})+'" '+xui.$IEUNSELECTABLE()+">"+e+"</span>"},adjustRes:function(h,f,d,c,g,e){if(!_.isStr(h)){return h}f=f?xui.wrapRes:xui.getRes;h=h.replace(/\$([\$\.\-\)])/g,function(k,j){return xui._escapeMap[j]||k});h=xui._langscMark.test(h)?h.replace(xui._langReg,function(Z,Y,X,W,V,U,T,S,R,Q,P,O,N,M,L,K,J,I,H,G,F,E,D,C,B,A){return X=="$"?c?Z:W:U=="$"?c?Z:f(T,g):R=="$"?c?Z:f(Q,g):O=="$"?c?Z:f(N,g):((d?0:(L=="@"||H=="@"))||D=="{")?((A=xui.SC.get(L=="@"?K:H=="@"?G:C,e))||(_.isSet(A)?A:"")):Z}):h;return h.replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})},adjustVar:function(e,d){var c;return typeof(e)=="string"?e=="{[]}"?[]:e=="{{}}"?{}:e=="{}"?"":e=="{true}"?true:e=="{false}"?false:e=="{NaN}"?NaN:e=="{null}"?null:e=="{undefined}"?undefined:e=="{now}"?new Date():(c=/^\s*\{((-?\d\d*\.\d*)|(-?\d\d*)|(-?\.\d\d*))\}\s*$/.exec(e))?parseFloat(c[1]):(c=/^\s*\{([\S]+)\}\s*$/.exec(e))?xui.SC.get(c[1],d):xui.adjustRes(e,false,true,true,null,d):e},_getrpc:function(e,f,c){var d=(c&&c.proxyType)?c.proxyType.toLowerCase():"";return(d=="sajax"||d=="jsonp")?xui.JSONP:(d=="iajax"||d=="xdmi")?xui.XDMI:(d=="ajax")?xui.Ajax:(typeof f=="object"&&((function(h){if(!_.isHash(h)){return 0}for(var g in h){if((h[g]&&h[g].nodeType==1&&h[g].nodeName=="INPUT")||(h[g]&&h[g].$xuiFileCtrl)){return 1}}})(f)))?xui.XDMI:(c&&c.method&&c.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(e)?xui.XDMI:xui.Ajax:xui.absIO.isCrossDomain(e)?xui.JSONP:xui.Ajax},request:function(d,e,g,h,f,c){return xui._getrpc(d,e,c).apply(null,arguments).start()},ajax:function(d,e,g,h,f,c){return xui.Ajax.apply(null,arguments).start()},jsonp:function(d,e,g,h,f,c){return xui.JSONP.apply(null,arguments).start()},xdmi:function(d,e,g,h,f,c){return xui.XDMI.apply(null,arguments).start()},restGet:function(d,e,g,h,f,c){if(!c){c={}}c.method="get";return xui.Ajax(d,e,g,h,f,c).start()},restPost:function(d,e,g,h,f,c){if(!c){c={}}c.method="post";return xui.Ajax(d,e,g,h,f,c).start()},restPut:function(d,e,g,h,f,c){if(!c){c={}}c.method="put";return xui.Ajax(d,e,g,h,f,c).start()},restDelete:function(d,e,g,h,f,c){if(!c){c={}}c.method="delete";return xui.Ajax(d,e,g,h,f,c).start()},getFileSync:function(e,d,f,g,c){return xui.Ajax(e,xui.$rand+"="+_.rand(),f,g,null,_.merge({asy:false,rspType:d||"text"},c,"without")).start()||null},getFileAsync:function(e,d,g,h,f,c){xui.Ajax(e,xui.$rand+"="+_.rand(),g,h,f,_.merge({asy:true,rspType:d||"text"},c,"without")).start()},include:function(h,e,f,g,d,c){if(h&&xui.SC.get(h)){_.tryF(f)}else{c=typeof c=="object"?c:{};if(!d){c.rspType="script";c.checkKey=h;xui.JSONP(e,xui.$rand+"="+_.rand(),f,g,0,c).start()}else{c.asy=!d;xui.Ajax(e,xui.$rand+"="+_.rand(),function(j){try{_.exec(j,h)}catch(k){_.tryF(g,[k.name+": "+k.message])}_.tryF(f)},g,0,c).start()}}},mailTo:function(f,g,c,h,e){var d="mailto:"+f+"?subject="+encodeURIComponent(xui.adjustRes(g||""))+"&body= "+encodeURIComponent(xui.adjustRes(c||""))+"&cc= "+(h||"")+"&bcc= "+(e||"");xui.XDMI(d).start()},fetchClass:function(g,m,d,j,e,h,r){if(/\//.test(g)&&!/\.js$/i.test(g)){g=g+".js"}r=r||{};var l=/\.js$/i.test(g),n=xui.$cache.clsByURI,k=xui.$cache.fetching,q,p;if(!l){if(!r.hasOwnProperty("appPath")&&window["/"]){r.appPath=window["/"]}q=g;g=xui.getPath(g,".js","js",r)}if(!e&&(l?((p=n[g])&&p.$xui$):(p=xui.SC.get(q)))){_.tryF(m,[g,q],p)}else{if(!k[g]){k[g]=[m=m?[m]:[],d=d?[d]:[],j=j?[j]:[],[]];if(xui.absIO.isCrossDomain(g)){Class._ignoreNSCache=1;Class._last=null;xui.JSONP(g,xui.$rand+"="+_.rand(),function(){if(Class._last){p=n[g]=Class._last}Class._ignoreNSCache=Class._last=null;if(p){for(var c in m){_.tryF(m[c],[g,p.KEY],p)}}else{for(var c in d){_.tryF(d[c],_.toArr(arguments))}}var f=xui.getClassName(g);if(p&&p.KEY!=f){var u="The last class name in '"+g+"' should be '"+f+"', but it's '"+p.KEY+"'!";for(var c in j){_.tryF(j[c],[u,g,f,p.KEY])}_.asyRun(function(){throw u})}for(var c in k[g][3]){xui.Thread(k[g][3][c]).abort()}if(k[g]){k[g][0].length=0;k[g][1].length=0;k[g][2].length=0;k[g][3].length=0;k[g].length=0;delete k[g]}},function(){Class._ignoreNSCache=1;Class._last=null;for(var c in d){_.tryF(d[c],_.toArr(arguments))}for(var c in k[g][3]){xui.Thread(k[g][3][c]).abort()}if(k[g]){k[g][0].length=0;k[g][1].length=0;k[g][2].length=0;k[g][3].length=0;k[g].length=0;delete k[g]}},h,{rspType:"script"}).start()}else{xui.Ajax(g,xui.$rand+"="+_.rand(),function(c){Class._ignoreNSCache=1;Class._last=null;var f;var v=xui.getClassName(g);try{f=_.exec(c,v)}catch(w){for(var u in d){_.tryF(d[u],[w.name+": "+w.message])}Class._last=null}if(Class._last){p=n[g]=Class._last}Class._last=null;if(p){for(var u in m){_.tryF(m[u],[g,p.KEY],p)}}else{for(var u in d){_.tryF(d[u],_.toArr(arguments))}}if(p&&p.KEY!=v){var x="The last class name in '"+g+"' should be '"+v+"', but it's '"+p.KEY+"'!";for(var u in j){_.tryF(j[u],[x,g,v,p.KEY])}_.asyRun(function(){throw x})}for(var u in k[g][3]){xui.Thread(k[g][3][u]).abort()}if(k[g]){k[g][0].length=0;k[g][1].length=0;k[g][2].length=0;k[g][3].length=0;k[g].length=0;delete k[g]}},function(){Class._ignoreNSCache=Class._last=null;for(var c in d){_.tryF(d[c],_.toArr(arguments))}for(var c in k[g][3]){xui.Thread(k[g][3][c]).abort()}if(k[g]){k[g][0].length=0;k[g][1].length=0;k[g][2].length=0;k[g][3].length=0;k[g].length=0;delete k[g]}},h,{rspType:"text",asy:true}).start()}}else{if(m){k[g][0].push(m)}if(d){k[g][1].push(d)}if(j){k[g][2].push(j)}if(h){k[g][3].push(h);xui.Thread(h).suspend()}}}},fetchClasses:function(q,c,p,d,m,e,h,r){var k={},n=function(l,f,s){s[f]=xui.Thread(null,[function(u){xui.fetchClass(l,p,d,m,e,u,r)}])};for(var j=0,g=q.length;j<g;j++){n(q[j],j,k)}return xui.Thread.group(null,k,null,function(){xui.Thread(h).suspend()},function(){_.tryF(c,arguments,this);xui.Thread(h).resume()}).start()},require:function(h,c,j,d,g,e,f,l){if(_.isStr(h)){h=[h]}var k=function(n,m){xui.fetchClasses(n,function(){var s=[],x,y;for(var w=0,u=n.length;w<u;w++){x=xui.SC.get(n[w]);if(x&&(y=x.Required)&&y.length){for(var v=0,q=y.length;v<q;v++){if(!xui.SC.get(y[v])){s.push(y[v])}}}if(x&&x["xui.Module"]&&(x=x.prototype&&x.prototype.iniComponents)){_.fun.body(x).replace(/\bxui.create\s*\(\s*['"]([\w.]+)['"]\s*[,)]/g,function(z,r){if(!(z=xui.SC.get(r))){s.push(r);z=null}})}}if(s.length){k(s,null)}else{var p=[];for(var w=0,u=h.length;w<u;w++){p.push(xui.SC.get(h[w]))}if(c){c.apply(null,p)}}},j,d,g,e,m,l)};k(h,f)},_m:[],main:function(c){if(_.arr.indexOf(xui._m,c)==-1){xui._m.push(c)}if(xui.isDomReady){xui._domReadyFuns()}},getPath:function(h,m,c,k){h=h.split(".");if(c){var g=[h[0],c];for(var f=1,e=h.length;f<e;f++){g.push(h[f])}h.length=0;h=g}var d,j=xui.ini;if(h[0]=="xui"){d=(k&&k.xuiPath)||j.path;h.shift();if(h.length==(c?1:0)){h.push("xui")}}else{d=(k&&k.appPath)||j.appPath;if(h.length==((c?1:0)+1)&&m==".js"){h.push("index")}if((k&&k.verPath)||j.verPath){d+=((k&&k.verPath)||j.verPath)+"/"}if(j.ver){d+=j.ver+"/"}}if(d.slice(-1)!="/"){d+="/"}return d+h.join("/")+(m||"/")},getClassName:function(f){if(f&&_.isStr(f)){var e=f.split(/\/js\//g),d,h,g=e.length;if(g>=2){d=e[g-2].split(/\//g);d=d[d.length-1];e=e[g-1].replace(/\.js$/i,"");return(d+(e?".":"")+e.replace(/\//g,".")).replace(/^([^.]+)\.index$/,"$1")}}},log:_.fun(),echo:_.fun(),message:_.fun(),_pool:[],getObject:function(c){return xui._pool["$"+c]},getObjectByAlias:function(d){var e;for(var c in xui._pool){e=xui._pool[c];if(("alias" in e)&&e.alias===d){return typeof(e.boxing)=="function"?e.boxing():e}}},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var e=xui.$cache.ghostDiv,d=0,c=e.length,f;do{f=e[d++]}while(d<c&&(f&&f.firstChild));if(!f||f.firstChild){f=document.createElement("div");f.id=xui._ghostDivId;e.push(f)}return f},$xid:0,$registerNode:function(e){var f,d,c=xui.$cache.domPurgeData;if(!(e.$xid&&(d=c[e.$xid])&&d.element==e)){f="!"+xui.$xid++;d=c[f]||(c[f]={});d.element=e;e.$xid=d.$xid=f}e=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$xid||""):""},getNode:function(c){return xui.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return _.get(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],d)},setData:function(d,c){return _.set(xui.$cache.data,d,c)},getData:function(c){return _.get(xui.$cache.data,c)},setNodeData:function(c,e,d){if(!c){return}return _.set(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],e,d)},$purgeChildren:function(h){var d=xui.$cache,p=d.profileMap,c=d.UIKeyMapEvents,q=d.domPurgeData,y=xui.Event.$eventhandler,g=(xui.browser.ie&&h.all)?h.all:h.getElementsByTagName("*"),k=g.length,u=[],n,m,f,x,s,r,e;for(n=0;n<k;n++){if(!(s=g[n])){continue}if(x=s.$xid){if(f=q[x]){if(r=f.eHandlers){if(xui.browser.isTouch&&r.onxuitouchdown){if(s.removeEventListener){s.removeEventListener("xuitouchdown",y,false)}else{if(s.detachEvent){s.detachEvent("xuitouchdown",y)}}}for(m in r){s[m]=null}}for(m in f){f[m]=null}delete q[x]}if(xui.browser.ie){s.removeAttribute("$xid")}else{delete s.$xid}}if(e=s.id){if(e in p){f=p[e];if(!f){continue}x=f.renderId;if("!window"===x||"!document"===x){continue}f.__gc();u[u.length]=n;if(f.$domId&&f.$domId!=f.domId){u[u.length]=f.$domId}}}}for(n=0;n<u.length;){delete p[u[n++]]}h.innerHTML=""},create:function(m,j){var g,c,k,h=arguments.callee,d=h.r1||(h.r1=/</);if(typeof m=="string"){if(k=xui.absBox.$type[m]){g=[];for(var f=1,e=arguments.length;f<e;f++){g[f-1]=arguments[f]}c=new (xui.SC(k))(false);if(c._ini){c._ini.apply(c,g)}}else{if(((k=xui.SC.get(m))&&k["xui.Module"])||j=="xui.Module"){if(k){c=new k()}else{c=new xui.UI.MoudluePlaceHolder();xui.require(m,function(n){if(n&&n["xui.Module"]){if(c.get(0).renderId){var l=new n();l.create(function(){c.replaceWithModule(l)})}else{c.get(0)._module=new n()}}})}}else{if(d.test(m)){c=_.str.toDom(m)}else{c=document.createElement(m);c.id=typeof id=="string"?id:_.id();c=xui(c)}}}}else{if(m["xui.Module"]){if((k=xui.SC.get(m.key))&&k["xui.Module"]){c=new k(m)}else{c=new xui.UI.MoudluePlaceHolder();if(m.host||m.alias){c.setHost(m.host,m.alias)}if(k=m.events){c.setEvents(k)}if(k=m.properties){c.setProperties(k)}if(m.moduleClass&&m.moduleXid){c.get(0).moduleClass=m.moduleClass;c.get(0).moduleXid=m.moduleXid}xui.require(m.key,function(n){if(n&&n["xui.Module"]){var l=new n(m);l.create(function(){c.replaceWithModule(l)})}})}}else{c=new (xui.SC(m.key))(m)}}return c},use:function(d){var f=xui._tempBox||(xui._tempBox=xui()),e=f._nodes;e[0]=d;if(e.length!=1){e.length=1}return f}});new function(){var q=window,x=navigator.userAgent.toLowerCase(),n=document,j=n.documentMode,p=xui.browser={kde:/webkit/.test(x),applewebkit:/applewebkit/.test(x),opr:/opera/.test(x),ie:(/msie/.test(x)&&!/opera/.test(x)),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(x),gek:/mozilla/.test(x)&&!/(compatible|webkit)/.test(x),isStrict:n.compatMode=="CSS1Compat",isWebKit:/webkit/.test(x),isFF:/firefox/.test(x),isChrome:/chrome/.test(x),isSafari:(!/chrome/.test(x))&&/safari/.test(x),isWin:/(windows|win32)/.test(x),isMac:/(macintosh|mac os x)/.test(x),isAir:/adobeair/.test(x),isLinux:/linux/.test(x),isSecure:location.href.toLowerCase().indexOf("https")==0,isTouch:(("ontouchend" in n)&&!(/hp-tablet/).test(x))||(q.DocumentTouch&&n instanceof DocumentTouch)||q.PointerEvent||q.MSPointerEvent,isIOS:/iphone|ipad|ipod/.test(x),isAndroid:/android/.test(x),isBB:/blackberry/.test(x)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},r=function(d,e){e=x.split(e)[1].split(".");return d+(p.ver=parseFloat((e.length>0&&isFinite(e[1]))?(e[0]+"."+e[1]):e[0]))};if(q.matchMedia&&typeof q.matchMedia=="function"){p.isTouch=q.matchMedia("(any-pointer: coarse)").matches;p.deviceType=p.isTouch?((q.matchMedia("(any-hover: hover)").matches||q.matchMedia("(any-pointer: fine)").matches)?"hybrid":"touchOnly"):"mouseOnly"}else{p.deviceType=p.isTouch?"touchOnly":"mouseOnly"}xui.$secureUrl=p.isSecure&&p.ie?'javascript:""':"about:blank";_.filter(p,function(d){return !!d});if(p.newie){p["newie"+(p.ver=j)]=true;p.cssTag1="-ms-";p.cssTag2="ms"}else{if(p.ie){if(_.isNumb(j)){p["ie"+(p.ver=j)]=true}else{p[r("ie","msie ")]=true}if(p.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(m){}q.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}p.cssTag1="-ms-";p.cssTag2="ms"}else{if(p.gek){p[r("gek",/.+\//)]=true;p.cssTag1="-moz-";p.cssTag2="Moz"}else{if(p.opr){p[r("opr","opera/")]=true;p.cssTag1="-o-";p.cssTag2="O"}else{if(p.kde){p[r("kde","webkit/")]=true;if(p.isSafari){if(/applewebkit\/4/.test(x)){p["safari"+(p.ver=2)]=true}else{p[r("safari","version/")]=true}}else{if(p.isChrome){p[r("chrome","chrome/")]=true}}if(p.isWebKit){p.cssTag1="-webkit-";p.cssTag2="Webkit"}else{p.cssTag1="-khtml-";p.cssTag2="Khtml"}}}}}}if(p.isBB&&!p.ver){p.ver=parseFloat(ua.split("/")[1].substring(0,3));p["bb"+p.ver]=true}p.contentBox=function(d){return(p.ie||p.opr)?!/BackCompat|QuirksMode/.test(n.compatMode):(d=(d=d||n.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var z=xui.ini={};if(window.xui_ini){_.merge(z,window.xui_ini)}if(!z.path){var y,h=document.getElementsByTagName("script"),c=/js\/xui(-[\w]+)?\.js$/,g=h.length;while(--g>=0){y=h[g].src;if(y.match(c)){z.path=y.replace(c,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}}}_.merge(z,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),img_bg:z.path+"bg.gif",img_busy:z.path+"busy.gif",img_icon:z.path+"icon.png",img_pic:z.path+"picture.png",img_blank:p.ie&&p.ver<=7?(z.path+"bg.gif"):"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dummy_tag:"$_dummy_$"},"without");if(!z.path){z.path=z.appPath+"/xui/"}if(!z.basePath){z.basePath=z.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")}z.releasePath=z.appPath;if(z.verPath){z.releasePath+=(z.verPath?(z.verPath+"/"):"")+(z.ver?(z.ver+"/"):"")}var k=xui._domReadyFuns=function(){if(!xui.isDomReady){if(n.addEventListener){n.removeEventListener("DOMContentLoaded",A,false);q.removeEventListener("load",A,false)}else{n.detachEvent("onreadystatechange",A);q.detachEvent("onload",A)}if(xui.browser.deviceType!="touchOnly"&&!xui.Dom.getScrollBarSize()){xui.browser.deviceType="touchOnly";if(xui.UI){var A=function(e){_.arr.each(e,function(f){if(f=xui.SC.get(f)){if(f.$DataModel.overflow){f.$DataModel.overflow.ini="auto";f.$DataStruct.overflow="auto"}if(f.$children&&f.$children.length){A(f.$children)}}})};A(xui.UI.$children)}}}try{if(xui.ini.customStyle&&!_.isEmpty(xui.ini.customStyle)){var s=[],w=xui.ini.customStyle,d;_.each(w,function(f,e){s.push(e+" : "+f+";")});d=".xui-custom{\r\n"+s.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(d,"xui:css:custom",1)}for(var v=0,u=xui._m.length;v<u;v++){_.tryF(xui._m[v])}xui._m.length=0;xui.isDomReady=true}catch(B){_.asyRun(function(){throw B})}};if(n.addEventListener){n.addEventListener("DOMContentLoaded",k,false);q.addEventListener("load",k,false)}else{n.attachEvent("onreadystatechange",k);q.attachEvent("onload",k);(function(){if(xui.isDomReady){return}try{n.activeElement.id;n.documentElement.doScroll("left");k()}catch(d){_.setTimeout(arguments.callee,9)}})()}(function(){((!xui.isDomReady)&&((!n.readyState)||/in/.test(n.readyState)))?_.setTimeout(arguments.callee,9):k()})()};new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/;xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/;xui._curHref=(function(c){try{return location.href}catch(d){c=document.createElement("a");c.href="";return c.href}})(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]};new function(){xui.pseudocode={exec:function(r,e,d,F,f){var s,z,y,w,D,h=r.type||"other",v={temp:F,page:d,args:e,global:xui.$cache.data},u=function(k,m,l){switch(_.str.trim(l)){case"=":return k===m;case"<>":case"!=":return k!==m;case"empty":return _.isEmpty(k);case"non-empty":return !_.isEmpty(k);case">":return parseFloat(k)>parseFloat(m);case"<":return parseFloat(k)<parseFloat(m);case">=":return parseFloat(k)>=parseFloat(m);case"<=":return parseFloat(k)<=parseFloat(m);case"include":return(k+"").indexOf(m+"")!=-1;case"exclude":return(k+"").indexOf(m+"")==-1;case"begin":return(k+"").indexOf(m+"")===0;case"end":return(k+"").indexOf(m+"")===(k+"").length-(m+"").length;case"objhaskey":return typeof(k)=="object"?(m in k):false;case"objnokey":return typeof(k)=="object"?!(m in k):false;case"arrhasvalue":return _.isArr(k)?_.arr.indexOf(k,m)!==-1:false;case"arrnovalue":return _.isArr(k)?_.arr.indexOf(k,m)==-1:false;case"objarrhaskey":return _.isArr(k)?_.arr.subIndexOf(k,"id",m)!==-1:false;case"objarrnokey":return _.isArr(k)?_.arr.subIndexOf(k,"id",m)==-1:false;default:return false}},B=function(p){if(typeof(p)=="string"){var n;if(_.str.startWith(p,"[data]")){p=p.replace("[data]","");n=1}p=xui.adjustVar(p,v);if(n&&typeof(p)=="string"){p=_.unserialize(xui.getFileSync(p))}}else{if(_.isHash(p)){for(var m in p){p[m]=B(p[m])}}else{if(_.isArr(p)){for(var m=0,k=p.length;m<k;m++){p[m]=B(p[m])}}}}return p},H=r.target,g=(r.method+"").split("-")[0],x=_.clone(r.params)||[],j=r.conditions||[],C=r.adjust||null,c=[],q=_.isSet(r.timeout)?parseInt(r.timeout,10):null;for(var E=0,A=j.length;E<A;E++){if(!u(xui.adjustVar(j[E].left,v),xui.adjustVar(j[E].right,v),j[E].symbol)){if(typeof f=="function"){f()}return}}if(H&&g&&H!="none"&&g!="none"){for(var E=(h=="other"&&H=="callback")?g=="call"?1:g=="set"?2:0:0,A=x.length;E<A;E++){x[E]=B(x[E])}if(g.indexOf("-")!=-1){s=g.split("-");g=s[0];for(var E=1,A=s.length;E<A;E++){if(s[E]){x[E-1]=s[E]}}}var G=function(){switch(h){case"page":if(g=="switch"){if(!xui.History._callback){xui.History.setCallback(function(M,L){if(L){return}var K=_.urlDecode(M||"");if(!K.xuicom){K.xuicom="App";K.cache=true}xui("body").children().each(function(N){var O=xui.Module.getFromDom(N);if(O&&O._showed){if(K.cache){O.hide()}else{O.destroy()}}});xui.showModule(K.xuimodule)})}var J="xuimodule="+H;if(x[0]){J+="&cache="+(x[0]?true:false)}xui.History.setFI(J);return}var k=_.get(window,H.split(".")),n;if(k){for(var p in k._pool){n=k._pool[p];break}}if(g=="show"||g=="pop"){x.unshift(function(L,K){if(g=="pop"&&!L){s=K.getUIComponents(true);if((s=s.getRoot())&&(s=s.get(0))){xui(s).pop(x[1]||v.args[0])}}});var l=function(L,K){if(L){return}if(_.isFun(s=K.show)){s.apply(K,x)}};if(!n){xui.getModule(H,l)}else{l(null,n)}}else{if(n&&_.isFun(s=_.get(n,[g]))){s.apply(n,x)}return}break;case"control":case"module":if(g=="pop"){s=_.get(d,[H]);if((s=s.getRoot())&&(s=s.get(0))){xui(s).pop(x[1]||v.args[0])}}else{if(g=="setProperties"){if(z=x[0]){if(z.CA){if(_.isFun(s=_.get(d,[H,"setCustomAttr"]))){s.apply(d[H],[z.CA])}delete z.CA}if(z.CC){if(_.isFun(s=_.get(d,[H,"setCustomClass"]))){s.apply(d[H],[z.CC])}delete z.CC}if(z.CS){if(_.isFun(s=_.get(d,[H,"setCustomStyle"]))){s.apply(d[H],[z.CS])}delete z.CS}}}if(_.isFun(s=_.get(d,[H,g]))){s.apply(d[H],x)}}break;case"other":switch(H){case"url":switch(g){case"close":window.close();break;case"open":window.open(x[0],x[1],x[2],x[3]);break;case"mailTo":xui.mailTo.apply(xui,x);break}break;case"msg":if(g=="busy"||g=="free"){if(_.isFun(s=_.get(xui.Dom,[g]))){s.apply(xui.Dom,x)}}else{if(g=="console"&&_.isDefined(window.console)&&(typeof console.log=="function")){console.log.apply(console,x)}else{if(_.isFun(s=_.get(xui,[g]))){s.apply(xui,x)}}}break;case"var":if(g=="cookie"){xui.$cache.data.Cookies=xui.Cookies.get()}else{if(x[0].length){if(C){switch(C){case"serialize":x[1]=_.serialize(x[1]);break;case"unserialize":x[1]=_.unserialize(x[1]);break;case"stringify":x[1]=_.stringify(x[1]);break;default:if(typeof(C=_.get(C))=="function"){x[1]=C(x[1])}break}}_.set(v,(g+"."+_.str.trim(x[0])).split(/\s*\.\s*/),x[1])}}break;case"callback":switch(g){case"set":s=x[1];if(_.isStr(s)&&/[\w\.\s*]+\(\s*\)\s*\}$/.test(s)){s=s.split(/\s*\.\s*/);z=s.pop().replace(/[()}\s]/g,"");s=xui.adjustVar(s.join(".")+"}",v);if(s&&_.isFun(s[z])){xui.$cache.callback[x[0]]=[s,z]}}break;case"call":var m=x.slice(3),I;s=x[0];if(_.isStr(s)&&/[\w\.\s*]+\(\s*\)\s*\}$/.test(s)){s=s.split(/\s*\.\s*/);z=s.pop().replace(/[()}\s]/g,"");s=s.join(".")+"}";s=xui.adjustVar(s,v)||xui.adjustVar(s);I=s&&s[z]&&_.isFun(s[z])}else{if(_.isStr(s=x[0])&&_.isFun((y=xui.$cache.callback[s])&&(s=y[0])&&s&&(s[z=y[1]]))){I=1}}if(I){s=s[z].apply(s,m);if(x[1]&&x[2]&&_.get(v,x[1].split(/\s*\.\s*/))){_.set(v,(x[1]+"."+x[2]).split(/\s*\.\s*/),s)}}break}break}break}};if(q!==null){_.asyRun(G,q)}else{G()}}return r["return"]}}};new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(_.isObj(t[i])||_.isArr(t[i]))){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return((x||x===0)&&isFinite(x))?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A1.test(x)?x.replace(A2,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;max=max||0;if(deep>xui.SERIALIZEMAXLAYER||max>xui.SERIALIZEMAXSIZE){return'"too much recursion!"'}max++;if(x){var a=[],b=[],f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&!_.isFun(x.constructor)){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(_.isArr(x)){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(_.isNaN(v=x[i])){b[b.length]="NaN"}else{if(_.isNull(v)){b[b.length]="null"}else{if(!_.isDefined(v)){b[b.length]="undefined"}else{if(f=T[typeof v]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=v}}}}}}a[2]="]"}else{if(_.isDate(x)){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(_.isReg(x)){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(_.isNaN(v=x[i])){b[b.length]=T.string(i)+":NaN"}else{if(_.isNull(v)){b[b.length]=T.string(i)+":null"}else{if(!_.isDefined(v)){b[b.length]=T.string(i)+":undefined"}else{if(f=T[typeof v]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=T.string(i)+":"+v}}}}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){return _.isNaN(obj)?"NaN":_.isNull(obj)?"null":!_.isDefined(obj)?"undefined":T[typeof obj](obj,filter,dateformat||(xui&&xui.$dateFormat))||""};_.stringify=function(obj,filter,dateformat){return _.fromUTF8(_.serialize(obj,filter,dateformat))};_.unserialize=function(str,dateformat){if(typeof str!="string"){return str}if(!str){return false}try{str="({_:"+str+"})";str=eval(str);if(dateformat||(xui&&xui.$dateFormat)){E(str)}str=str._;return str}catch(e){return false}}};new function(){_.id=function(){var self=this,me=arguments.callee;if(self.constructor!==me||self.a){return(me._||(me._=new me)).next()}self.a=[-1];self.b=[""];self.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}}};Class("xui.Thread",null,{Constructor:function(d,e,g,k,l,c,f){var j=arguments.callee.upper;if(j){j.call(this)}j=null;var n=this,h=arguments.callee,m=xui.$cache.thread;if(n.constructor!==h||!!n.id){return new h(d,e,g,k,l,c,f)}if(typeof d!="string"){d="$"+(n.constructor.$xid++)}n.id=d;n.profile=m[d]||(m[d]={id:d,_start:false,time:0,_left:0,_asy:0.1,index:0,tasks:e||[],delay:g||0,callback:k,onStart:l,onEnd:c,cache:{},status:"ini",cycle:!!f})},Instance:{_fun:_.fun(),__gc:function(){var c=xui.$cache.thread,e=c[this.id];if(e){delete c[this.id];e.tasks.length=0;for(var d in e){e[d]=null}}},_task:function(){var c=this,j=c.profile;if(!j||!j.status||!j.tasks){return}j._asy=0.1;var e={},h=j.tasks[j.index],g,d,f=typeof h;if(f=="function"){e.task=h}else{if(f=="object"){for(d in h){e[d]=h[d]}}}if(typeof e.callback!="function"){e.callback=j.callback}if(typeof e.task=="function"){e.args=e.args||[];e.args.push(j.id)}j.index++;j.time=_();if(typeof e.task=="function"){g=_.tryF(e.task,e.args||[j.id],e.scope||c,null)}if(!j.status){return}if(e.id){j.cache[e.id]=g}if(e.callback&&false===_.tryF(e.callback,[j.id],c,true)){return c.abort("callback")}if(j.status!=="run"){return}c.start()},start:function(j,c){var e=this,h=e.profile,d,f;if(h.__delaycb){_.tryF(h.__delaycb,[h.id],e);delete h.__delaycb}if(c){h.__delaycb=c}if(h._start===false){h._start=true;if(h.onStart){var g=_.tryF(h.onStart,[h.id],e);if(false===g){return e.abort("start")}else{if(true===g){return}else{if(_.isNumb(g)){e.suspend(g);return}}}}}if(h.status!="run"){h.status="run"}if(!h.tasks.length){return e.abort("empty")}if(h.index>=h.tasks.length){if(h.cycle===true){e.profile.index=0}else{return e.abort("normal")}}d=h.tasks[h.index];f=typeof d=="number"?d:(d&&typeof d.delay=="number")?d.delay:h.delay;h._left=(j||j===0)?j:f;if(h._asy!=0.1){_.clearTimeout(h._asy)}h._asy=_.asyRun(e._task,h._left,[],e);h.time=_();return e},suspend:function(e,c){var f,d=this.profile;if(d.status=="pause"){return}d.status="pause";if(d._asy!==0.1){_.clearTimeout(d._asy);if(d.index>0){d.index--}}f=d._left-(_()-d.time);d._left=(f>=0?f:0);if((Number(e)||0)){this.resume(e,c)}return this},resume:function(e,c){var d=this;if(d.profile.status=="run"){return}e=e===undefined?d.profile._left:e===true?d.profile.delay:e===false?0:(Number(e)||0);d.profile.status="run";d.start(e,c);return d},abort:function(c){var d=this.profile;d.status="stop";_.clearTimeout(d._asy);_.tryF(d.onEnd,[d.id,c]);this.__gc()},links:function(c){var e=this.profile,d=e.onEnd,f=e.id;e.onEnd=function(){_.tryF(d,[f]);c.start()};return this},insert:function(c,g){var f=this,h=f.profile.tasks,e=h.length,d;if(!_.isArr(c)){c=[c]}g=g||f.profile.index;if(g<0){g=-1}if(g==-1){Array.prototype.push.apply(h,c)}else{if(g>e){g=e}d=h.splice(g,e-g);h.push.apply(h,c);h.push.apply(h,d)}return f},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){var e=this,h=function(f){e[f]=function(k){var j;if(xui.$cache.thread[k]){(j=xui.Thread(k))[f].apply(j,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var g=0,c=d.length;g<c;g++){h(d[g])}},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},isAlive:function(c){return !!xui.$cache.thread[c]},observableRun:function(h,e,f,d){var c=xui.Thread,g=xui.Dom;if(!_.isArr(h)){h=[h]}if(xui.$cache.thread[f]){if(typeof e=="function"){h.push(e)}c(f).insert(h)}else{c(f,h,0,null,function(j){if(g){g.busy(j,d)}},function(j){_.tryF(e,arguments,this);if(g){g.free(j)}}).start()}},group:function(d,j,k,l,c){var m={},h=xui.Thread,g=function(r,n,q){if(typeof r=="string"){r=h(r)}if(r){var p=function(){var f=arguments.callee;_.tryF(f.onEnd,arguments,this);f.onEnd=null;delete m[n];_.tryF(k,[n,q],this);if(_.isEmpty(m)){h.resume(q)}};p.onEnd=r.profile.onEnd;r.profile.onEnd=p;r.start()}};for(var e in j){m[e]=1}return h(d,[function(n){if(!_.isEmpty(j)){h.suspend(n);for(var f in j){g(j[f],f,n)}}}],0,null,l,c)},repeat:function(e,d,c,f){return xui.Thread(null,[null],d||0,e,c,f,true).start()}}});Class("xui.absIO",null,{Constructor:function(e,p,k,c,h,u){var r=arguments.callee.upper;if(r){r.call(this)}r=null;if(typeof e=="object"){u=e}else{u=u||{};_.merge(u,{uri:e,query:p,onSuccess:k,onFail:c,threadid:h})}var s=this,n=arguments.callee,d=s.constructor;if((d!==n)||s.id){return new n(u)}_.merge(u,{id:u.id||(""+(d._id++)),uid:(""+(d.uid++)),uri:u.uri?xui.adjustRes(u.uri,0,1,1):"",username:u.username||undefined,password:u.password||undefined,query:u.query||"",contentType:u.contentType||"",Accept:u.Accept||"",header:u.header||null,asy:u.asy!==false},"all");var f=(u.method||d.method).toUpperCase();u.method="POST"==f?"POST":"PUT"==f?"PUT":"DELETE"==f?"DELETE":"PATCH"==f?"PATCH":"GET";var q="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var j=0,g=q.length;j<g;j++){u[q[j]]=(q[j] in u)?u[q[j]]:d[q[j]];if(typeof u[q[j]]=="string"){u[q[j]]=u[q[j]].toLowerCase()}}_.merge(s,u,"all");if(s.reqType=="xml"){s.method="POST"}if(d.events){_.merge(s,d.events)}s.query=s.customQS(s.query);if(typeof s.query=="object"&&s.reqType!="xml"){s.query=_.copy(s.query,function(l){return l!==undefined})}if(!s._useForm&&_.isHash(s.query)&&s.reqType!="xml"){s.query=d._buildQS(s.query,s.reqType=="json",s.method=="POST")}return s},Instance:{_fun:_.fun(),_flag:0,_response:false,_txtresponse:"",_retryNo:0,_time:function(){var d=this,e=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;_.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==_.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){_.clearTimeout(c._flag);c._flag=0}xui.Thread.resume(c.threadid);_.tryF(c.$onEnd,[],c);_.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;xui.Thread.suspend(c.threadid);_.tryF(c.$onStart,[],c);_.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==_.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){_.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==_.tryF(c.beforeFail,[d,c.threadid],c)){_.tryF(c.onFail,[d.name?(d.name+": "+d.message):d,c.rspType,c.threadid,d],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,get:function(d,e,g,h,f,c){c=c||{};c.mothod="GET";return this.apply(this,arguments).start()},post:function(d,e,g,h,f,c){c=c||{};c.mothod="POST";return this.apply(this,arguments).start()},_id:1,uid:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"json",optimized:false,callback:"callback",_buildQS:function(e,c,d){e=_.clone(e,function(g,f){return !(_.isNaN(g)||!_.isDefined(g))});return c?((c=_.serialize(e))&&(d?c:encodeURIComponent(c))):_.urlEncode(e)},customQS:function(c){return c},_if:function(g,j,e){var c=xui.browser.ie&&xui.browser.ver<9,f=c?("<iframe "+(j?("name='xui_xdmi:"+j+"'"):"")+(e?(" onload='xui.XDMI._o(\""+j+"\")'"):"")+">"):"iframe";var h=g.createElement(f),d;if(j){h.id=h.name="xui_xdmi:"+j}if(!c&&e){h.onload=e}h.style.display="none";g.body.appendChild(h);d=frames[frames.length-1].window;return[h,d,d.document]},isCrossDomain:function(e){var c=xui._localParts;e=e.replace(/#.*$/,"").replace(/^\/\//,c[1]+"//");var d=xui._uriReg.exec((e||"").toLowerCase());return !!(d&&(d[1]!==c[1]||d[2]!==c[2]||(d[3]||(d[1]==="http:"?80:443))!==(c[3]||(c[1]==="http:"?80:443))))},groupCall:function(j,k,c,d,h){var e,g=function(m,f,l){l[f]=xui.Thread(null,[function(n){m.threadid=n;m.start()}])};for(e in j){g(j[e],e,j)}return xui.Thread.group(null,j,k,function(){xui.Thread(h).suspend();_.tryF(c,arguments,this)},function(){_.tryF(d,arguments,this);xui.Thread(h).resume()}).start()}}});Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(c){return xui.browser.isWebKit&&(_.str.startWith("Proxy-",c)||_.str.startWith("Sec-",c)||_.arr.indexOf(this._unsafeHeader,c.toLowerCase())!==-1)},_header:function(d,c){if(!this._isunsafe(d)){if(this._XML){this._XML.setRequestHeader(d,c)}}},start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}if(username&&password){self._XML.open(method,uri,asy,username,password)}else{self._XML.open(method,uri,asy)}self._header("Accept",Accept?Accept:(rspType=="json"?"application/json,text/javascript,*/*;q=0.01":rspType=="xml"?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"));self._header("Content-type",contentType?contentType:((reqType=="xml"?"text/xml; ":reqType=="json"?"application/json; ":method=="POST"?"application/x-www-form-urlencoded; ":"")+"charset="+(self.charset||"UTF-8")));self._header("X-Requested-With","XMLHttpRequest");if(optimized){try{self._header("User-Agent",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}try{if(_.isHash(header)){_.each(header,function(o,i){self._header(i,o)})}}catch(e){}if(false===_.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{return _complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,obj,status=ns._XML.status;_txtresponse=rspType=="xml"?ns._XML.responseXML:ns._XML.responseText;_response=rspType=="json"?((obj=_.unserialize(_txtresponse))===false?_txtresponse:obj):_txtresponse;if(!status&&xui._localReg.test(xui._localParts[1])){status=ns._XML.responseText?200:404}if(status==1223){status=204}if(status>=200&&status<300||status==304){_onResponse()}else{if(status===undefined||status<10){_onError(new Error("Network problems--"+status))}else{_onError(new Error("XMLHTTP returns--"+status))}}}return this._response}},Static:{$asFunction:1}});Class("xui.JSONP","xui.absIO",{Instance:{start:function(){var m=this,d,g=m.constructor,l,f,h=false;if(false===_.tryF(m.beforeStart,[],m)){m._onEnd();return}if(!m._retryNo){m._onStart()}if(m.rspType=="script"){m.retry=0}d=m.id;if(g._pool[d]){g._pool[d].push(m)}else{g._pool[d]=[m]}g.No["_"+d]=function(c){g.$response(c,d)};var j=document,k=function(){if(!h){h=true;if(m.rspType=="script"){if(typeof m.checkKey=="string"){_.asyRun(function(){_.exec("if(xui.SC.get('"+m.checkKey+"'))xui.JSONP._pool['"+d+"'][0]._onResponse();else xui.JSONP._pool['"+d+"'][0]._loaded();")})}else{m._onResponse()}}else{m._loaded()}}};f=m.node=j.createElement("script");var e=m.uri;if(m.query){e=e.split("?")[0]+"?"+m.query}f.src=e;f.type="text/javascript";f.charset=m.charset||"UTF-8";f.onload=f.onreadystatechange=function(){if(h){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){k()}if(c=="interactive"&&xui.browser.opr){xui.Thread.repeat(function(){if(h){return false}if(/loaded|complete/.test(document.readyState)){k();return false}},50)}};if("onerror" in f){f.onerror=function(c){m._clear();m._onError(new Error("Not Found - "+e));m=null;return}}(j.body||j.getElementsByTagName("head")[0]).appendChild(f);f=null;if(m.timeout>0){m._flag=_.asyRun(function(){if(m&&!m._end){m._time()}},m.timeout)}},_clear:function(){var e=this,j=e.node,h=e.constructor,g=e.id,d=h._pool;if(d[g]){d[g].length=0;delete d[g]}delete h.No["_"+g];if(j){e.node=j.onload=j.onreadystatechange=j.onerror=null;var f=document.createElement("div");f.appendChild(j.parentNode&&j.parentNode.removeChild(j)||j);if(xui.browser.ie){_.asyRun(function(){f.innerHTML=j.outerHTML="";if(_.isEmpty(d)){h._id=1}d=h=j=f=null})}else{_.asyRun(function(){f.innerHTML="";j=f=null;if(_.isEmpty(d)){h._id=1}})}}else{if(_.isEmpty(d)){h._id=1}}},_loaded:function(){var c=this;_.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("JSONP return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(f,g){var d=this;if(f&&(o=d._pool[g])){for(var e=0,c=o.length;e<c;e++){o[e]._response=f;o[e]._onResponse()}}else{d._onError(new Error("JSONP return value formatting error--"+f))}},customQS:function(f){var g=this.constructor,d=g.callback,e=(this.rspType!="script");if(typeof f=="string"){return(f||"")+(e?("&"+d+"=xui.JSONP.No._"+this.id):"")}else{if(e){f[d]="xui.JSONP.No._"+this.id}return f}}}});Class("xui.XDMI","xui.absIO",{Instance:{_useForm:true,start:function(){var y=this,v=window,r=y.constructor,q,f,x,j,p,g,s,e,m;if(false===_.tryF(y.beforeStart,[],y)){y._onEnd();return}if(!y._retryNo){y._onStart()}f=y.id;if(r._pool[f]){r._pool[f].push(y)}else{r._pool[f]=[y]}var u=r._if(document,f,m);y.node=u[0];y.frm=u[1];e=y.form=document.createElement("form");e.style.display="none";if(v.postMessage){y._msgcb=function(n){if(!y.node){return}if(n.source!==y.frm){return}n=n.data;if(y.rspType=="json"){n=_.unserialize(n)||n}if(n&&(x=r._pool[y.id])){for(var k=0,c=x.length;k<c;k++){x[k]._response=n;x[k]._onResponse()}}else{y._clear();y._onError(new Error("XDMI return value formatting error"))}};if(v.addEventListener){v.addEventListener("message",y._msgcb,false)}else{v.attachEvent("onmessage",y._msgcb)}}else{y._onload=m=function(D){if(y.OK){return}if(!y.node){return}var n=y.node.contentWindow,C=xui.XDMI,B,z;if(xui.browser.opr){try{if(n.location=="about:blank"){return}}catch(A){}}y.OK=1;var k=0;try{if(n.name===undefined){k=1}}catch(A){k=1}if(k){n.location.replace(C._getDummy()+"#"+xui.ini.dummy_tag)}(function(){var w=0;try{if(n.name===undefined){w=1}}catch(G){w=1}if(w){return _.asyRun(arguments.callee)}var F;if(("xui_xdmi:"+y.id)==n.name){y._clear();y._onError(new Error("XDMI no return value"));return}else{F=n.name}if(F&&(B=_.unserialize(F))&&(z=C._pool[y.id])){for(var E=0,c=z.length;E<c;E++){z[E]._response=B;z[E]._onResponse()}}else{y._clear();y._onError(new Error("XDMI return value formatting error, or no matched 'id'-- "+F))}})()}}var h=y.uri;if(y.method!="POST"){h=h.split("?")[0]}e.action=y.uri;e.method=y.method;e.target="xui_xdmi:"+f;p=y.query||{};var l,d=[];for(q in p){if(p[q]&&p[q]["xui.UIProfile"]&&p[q].$xuiFileCtrl){if(l=p[q].boxing().getUploadObj()){d.push({id:p[q].$xid,file:l});l.id=l.name=q;e.appendChild(l);s=true}}else{if(p[q]&&p[q].nodeType==1){p[q].id=p[q].name=q;e.appendChild(p[q]);s=true}else{if(_.isDefined(p[q])){x=document.createElement("textarea");x.id=x.name=q;x.value=typeof p[q]=="string"?p[q]:_.serialize(p[q],function(c){return c!==undefined});e.appendChild(x)}}}}if(y.method=="POST"&&s){e.enctype="multipart/form-data";if(e.encoding){e.encoding=e.enctype}}document.body.appendChild(e);e.submit();if(d.length){_.arr.each(d,function(k,c){if(c=xui.getObject(k.id)){if(c["xui.UIProfile"]&&c.boxing()&&c.boxing().setUploadObj){c.boxing().setUploadObj(k.file)}}})}x=e=null;if(y.timeout>0){y._flag=_.asyRun(function(){if(y&&!y._end){y._time()}},y.timeout)}},_clear:function(){var s=this,j=s.node,l=s.form,q=s.constructor,r=window,g=document.createElement("div"),h=s.id,k=q._pool;if(k[h]){k[h].length=0;delete k[h]}if(j&&r.postMessage){if(r.removeEventListener){r.removeEventListener("message",s._msgcb,false)}else{r.detachEvent("onmessage",s._msgcb)}s._msgcb=null}else{if(xui.browser.gek&&j){try{j.onload=null;var p=j.contentWindow.document;p.write(" ");p.close()}catch(m){}}}s.form=s.node=s.frm=null;if(j){g.appendChild(j.parentNode.removeChild(j))}if(l){g.appendChild(l.parentNode.removeChild(l))}g.innerHTML="";if(_.isEmpty(k)){q._id=1}l=g=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(f){var c=this,d=c._pool[f],e=d[d.length-1];_.tryF(e._onload)},_getDummy:function(l){l=l||window;var q=this,k,c,p=l.document,s=xui.ini,r=xui.browser,m=q.isCrossDomain;if(q.dummy){return q.dummy}if(s.dummy){return q.dummy=s.dummy}if(!m(s.path)){if(!p.getElementById("xui:img:bg")){c=p.createElement("img");c.id="xui:img:bg";c.src=s.img_bg;c.style.display="none";p.body.appendChild(c);c=null}}if(c=p.getElementById("xui:img:bg")){return q.dummy=c.src.split("#")[0]}else{k=p.getElementsByTagName("img");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.src&&!m(c.src)){return q.dummy=c.src.split("#")[0]}}if(r.gek){k=p.getElementsByTagName("link");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.rel=="stylesheet"&&!m(c.href)){return q.dummy=c.href.split("#")[0]}}}}try{if(l!=l.parent){if((l=l.parent)&&!m(""+l.document.location.href)){return q._getDummy(l)}}}catch(n){}return"/favicon.ico"},customQS:function(g){var f=this,h=f.constructor,e=h.callback,d=window;g[e]="window.name";if(window.postMessage){g[e]=g.parentDomain=d.location.origin||(d.location.protocol+"//"+d.location.hostname+(d.location.port?":"+d.location.port:""))}else{g[e]="window.name"}return g}}});new function(){xui.SAjax=xui.JSONP;xui.IAjax=xui.XDMI};Class("xui.SC",null,{Constructor:function(k,j,g,f,l,e){var h=arguments.callee.upper;if(h){h.call(this)}h=null;var d=xui.$cache.SC,c;if(c=d[k]||(d[k]=_.get(window,k.split(".")))){_.tryF(j,[k,null,f],c)}else{l=l||{};l.$cb=j;if(g){l.threadid=f}c=d[k]=xui.SC._call(k||"",l,g,e)}return c},Static:{$asFunction:1,__gc:function(c){xui.$cache.SC={}},get:function(d,c){return _.get(c||window,(d||"").replace(/\]$/g,"").split(/[\[\]\.]+/))},_call:function(u,v,m,e){m=!!m;var h,p,c,g,l=[],q=xui.SC.get,j=xui.$cache.snipScript,k=function(y,z,x){var f=this,r,s=this.uri;if(y){if(!q(u)){if(f.$p){(f.$cache||j)[f.$tag]=y}else{try{_.exec(y,u)}catch(w){throw w.name+": "+w.message+" "+f.$tag}}}}r=Class._last;Class._ignoreNSCache=Class._last=null;_.tryF(f.$cb,[f.$tag,y,x],q(u)||r||{});if(!q(u)&&r&&r.KEY!=u){_.asyRun(function(){throw"'"+u+"' doesn't in '"+s+"'. The last class '"+r.KEY+"' was triggered."})}},d=function(r){var f=this;_.tryF(f.$cb,[null,null,f.threadid],f)};if(e||!(c=q(u))){if(!e&&(p=j[u])){m=false;k.call({$cb:v.$cb},p);delete j[u]}if(e||!(c=q(u))){v=v||{};g=xui.getPath(u,".js","js",v);v.$tag=u;Class._ignoreNSCache=1;Class._last=null;var n;if(m&&!v.$p){v.rspType="script";n=xui.JSONP}else{v.asy=m;n=xui.Ajax}n(g,xui.$rand+"="+_.rand(),k,d,null,v).start();if(!m){c=q(u)}}}else{if(v.$cb){k.call(v)}}return c},loadSnips:function(j,d,k,c,f,p,h){if(!j||!j.length){_.tryF(c,[f]);return}var m={},p=_.merge(p||{},{$p:1,$cache:d||xui.$cache.snipScript});for(var g=0,e=j.length;g<e;g++){m[j[g]]=1}if(k||c){p.$cb=function(l){if(k){_.tryF(k,arguments,this)}delete m[l||this.$tag];if(_.isEmpty(m)){_.tryF(c,[f]);c=null;xui.Thread.resume(f)}}}xui.Thread.suspend(f);for(var g=0,n;n=j[g++];){this._call(n,_.merge({$tag:n},p,h),true)}},runInBG:function(g,h,k,c){var e=0,d,l,m=this,f=function(j){while(g.length>e&&(l=m.get(d=g[e++]))){}if(!l){m._call(d,{threadid:j},true)}if(g.length<e){xui.Thread(j).abort()}if(g.length==e){e++}};xui.Thread(null,[f],1000,h,k,c,true).start()},execSnips:function(c){var d,f=c||xui.$cache.snipScript;for(d in f){try{_.exec(f[d],d)}catch(g){throw g}}f={}},groupCall:function(g,f,j,h,e,c){if(g){var d=this;d.execSnips();xui.Thread.suspend(h);d.loadSnips(g,0,j,function(){d.execSnips();_.tryF(f,[h]);f=null;xui.Thread.resume(h)},null,e,c)}else{_.tryF(f,[h])}}}});Class("xui.absBox",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;this._nodes=[];this.Class=this.constructor},Before:function(d){var c=xui.absBox;if(c){(c=c.$type)[d.replace("xui.","")]=c[d]=d}},Instance:{__gc:function(){this.each(function(c){_.tryF(c.__gc)});this._nodes=0},_get:function(c){var d=this._nodes;return _.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},size:function(){return this._nodes.length},_each:function(d,h,k){var e=this,f=e._nodes,c=f.length,g,m;if(k){for(g=c;g>=0;g--){if(m=f[g]){if(false===d.call(h||e,m,g)){break}}}}else{for(g=0;g<c;g++){if(m=f[g]){if(false===d.call(h||e,m,g)){break}}}}m=null;return e},each:function(c,d,e){return this._each(c,d,e)},isEmpty:function(){return !this._nodes.length},merge:function(g){if(this==xui.win||this==xui.doc||this==xui("body")){return this}var d=this,j=d.constructor,g=g._nodes,f=0,e,h=d._nodes;if(g.length){for(;e=g[f++];){h[h.length]=e}d._nodes=j._unique(h)}return d},reBoxing:function(f,c){var d=this,e=xui.absBox.$type[f||"Dom"];if(!e){return xui.UI.pack([])}if(e==d.KEY){return d}if(e=xui.SC(e)){return e.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var e=new this(false);e._nodes=!c?[]:d===false?_.isArr(c)?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):_.isArr(c)?c:[c];e.n0=e._nodes[0];return e},_unique:function(c){var m={},e=[],j=0,d=c.length,g,f;for(;j<d;j++){e[j]=c[j]}c.length=0;j=0;for(;g=e[j++];){f=typeof g=="string"?g:g.$xid;if(!m[f]){m[f]=1;c.push(g)}}return c},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("xui.absProfile",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;if(!this.$xid){this.$xid=xui.absProfile.$xid.next()}},Instance:{getId:function(){return this.$xid},link:function(e,f,d,c){return xui.absProfile.prototype.$link(this,e,f,d,c)},$link:function(c,g,h,f,d){var e="$"+c.$xid;f=f||c;if(g[e]){c.unLink(h)}g[e]=f;if(_.isArr(g)){_.arr.insertAny(g,f,d,true)}c._links[h]=g;return c},unLink:function(c){return xui.absProfile.prototype.$unLink(this,c)},$unLink:function(c,g){var f,d,e="$"+c.$xid;if(!c._links){return}if(!(f=c._links[g])){return}if(_.isArr(f)){d=_.arr.indexOf(f,f[e]);if(d!=-1){_.arr.removeFrom(f,d)}}delete f[e];delete c._links[g];return d},unLinkAll:function(){return xui.absProfile.prototype.$unLinkAll(this)},$unLinkAll:function(d){var g="$"+d.$xid,c=d._links,f,e;for(e in c){f=c[e];if(_.isArr(f)){_.arr.removeValue(f,f[g])}delete f[g]}d._links={};return d},getModule:function(e){var d=this,f=function(h){if(h.moduleClass&&h.moduleXid){var g=xui.SC.get(h.moduleClass);if(g&&(g=g.getInstance(h.moduleXid))){return f(g)}}return h},c;if(d.moduleClass&&d.moduleXid){if(c=xui.SC.get(d.moduleClass)){if(c=c.getInstance(d.moduleXid)){return e?f(c):c}}}},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{$xid:new _.id,$abstract:true}});Class("xui.Profile","xui.absProfile",{Constructor:function(k,h,d,c,f,l,m){var g=arguments.callee.upper,e=_.toArr(arguments);g.apply(this,e);g=null;var j=this;_.merge(j,m);j.key=h||j.key||"";j.alias=d||j.alias||"",j.properties=f?_.copy(f):(j.properties||{});j.events=l?_.copy(l):(j.events||{});j.host=k||j.host||j;j.Class=j.constructor;j.box=c||j.box;if(j.events){j.setEvents(j.events);delete j.events}j._links={}},Instance:{setEvents:function(d,e){var c=this.box.$EventHandlers;if(_.isHash(d)){return _.merge(this,d,"all",function(g,f){return c[f]})}else{if(c[d]){this[d]=e}}},getEvents:function(e){if(e){return this[e]}else{var c=this,d,f={};_.each(c.box.$EventHandlers,function(h,g){if(c[g]){f[g]=c[g]}});return f}},getProperties:function(c){if(this._getProperties){this.properties=this._getProperties()}var d=this.properties;return c?d[c]:_.copy(d)},setProperties:function(c,d){if(_.isHash(c)){_.merge(c,this.box.$DataStruct,function(f,e){if(!(e in c)){c[e]=_.isObj(f)?_.clone(f):f}});this.properties=c}else{this.properties[c]=d}if(this.propSetAction){this.propSetAction(this.properties)}},_applySetAction:function(c,d){return c.call(this,d)},__gc:function(){var c=this;if(c.$beforeDestroy){_.each(c.$beforeDestroy,function(e){_.tryF(e,[],c)});delete c.$beforeDestroy}_.tryF(c.$ondestory,[],c);if(c.onDestroy){c.boxing().onDestroy()}if(c.destroyTrigger){c.destroyTrigger()}var d;if(c.alias&&c.host&&(d=c.host[c.alias])&&(d=d._nodes)&&(d.length===0||d.length===1&&d[0]==c)){delete c.host[c.alias]}c.unLinkAll();_.tryF(c.clearCache,[],c);var d=_.get(c,["box","_namePool"]);if(d){delete d[c.alias]}c.destroyed=true;if(c.$afterDestroy){_.each(c.$afterDestroy,function(e){_.tryF(e,[],c)});delete c.$afterDestroy}if(c.afterDestroy){c.boxing().afterDestroy(c)}_.breakO([c.properties,c.events,c],2);c.destroyed=true},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c.Instace)&&d.get(0)==c&&d._nodes.length==1)){d=c.Instace=c.box.pack([c],false)}return d},serialize:function(k,n){var l,m=this,g=(l=m.box._beforeSerialized)?l(m):m,d={alias:g.alias,key:g.key,host:g.host};if(d.host===m){delete d.host}else{if(g.host&&!n){if(k!==false){d.host="@this"}else{delete d.host}}}var j={},f=g.box.$DataStruct,e=xui.absObj.$specialChars;_.merge(j,g.properties,function(p,c){return(c in f)&&f[c]!==p&&!e[c.charAt(0)]});if(!_.isEmpty(j)){d.properties=j}if(!_.isEmpty(l=this.getEvents())){d.events=l}var h=g.box.$EventHandlers;_.filter(d.events,function(p,c){return p!=h[c]});if(_.isEmpty(d.events)){delete d.events}return k===false?d:_.serialize(d)}}});Class("xui.absObj","xui.absBox",{Constructor:function(){var d=arguments.callee.upper,c=_.toArr(arguments);d.apply(this,c);d=null;if(c[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,c)}},Before:function(d,c,e){xui.absBox.$type[d]=d;return true},After:function(){var y=this,p=arguments.callee,w,x,f,s,d,h,g,e,r,c,q;y._nameId=0;y._namePool={};y._nameTag=y.$nameTag||(y.KEY.replace(/\./g,"_").toLowerCase());y._cache=[];d=p.a1||(p.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(g=0;r=d[g++];){f={};if((x=y.$parent)&&(h=x.length)){while(h--){_.merge(f,x[h][r])}}y[r]=f}y.setDataModel(y.DataModel);delete y.DataModel;y.setEventHandlers(y.EventHandlers);delete y.EventHandlers;d=p.a5||(p.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(g=0;r=d[g++];){w=[];if((x=y.$parent)&&(e=x.length)){for(h=0;h<e;h++){s=x[h];if(s=s["$"+r]){w.push.apply(w,s)}}}if(y[r]){w.push(y[r])}_.arr.stableSort(w,function(j,k){j=j.$order||0;k=k.$order||0;return j>k?1:j==k?0:-1});y["$"+r]=w;delete y[r]}},Static:{$abstract:true,$specialChars:{_:1,$:1},DataModel:{tag:"",name:"",desc:"",tagVar:{ini:{}},propBinder:{hidden:1,ini:{}},dataBinder:{ini:"",set:function(d){var c=this,f=c.properties,e=f.dataBinder;if(e){xui.DataBinder._unBind(e,c)}f.dataBinder=d;xui.DataBinder._bind(d,c)}},dataField:{ini:""}},get:function(c){return this.pack([this._cache[c||0]])},getAll:function(){return this.pack(this._cache)},pickAlias:function(){return xui.absObj.$pickAlias(this)},$pickAlias:function(d){var e,f=d._namePool,c=d._nameTag;while(f[e=(c+(++d._nameId))]){}return e},setDataModel:function(l){var v=this,s=xui.absObj.$specialChars,g=v.$DataStruct,q=v.$DataModel,d=v.prototype,p,k,u,e,f,h,c;for(p in l){if(!q[p]){q[p]={}}e=l[p];if(null===e||undefined===e){c=_.str.initial(p);delete g[p];delete q[p];if(d[k="get"+c]&&d[k].$auto$){delete d[k]}if(d[k="set"+c]&&d[k].$auto$){delete d[k]}}else{u=typeof e;if(u!="object"||e.constructor!=Object){e={ini:e}}g[p]=("ini" in e)?e.ini:(p in g)?g[p]:"";u=q[p];for(k in u){if(!(k in e)){e[k]=u[k]}}q[p]=e}}_.each(l,function(r,m){if(null===r||undefined===r||s[m.charAt(0)]){return}c=_.str.initial(m);f="set"+c;if(r.set!==null&&!(r&&(r.readonly||r.inner))){var j=r.set;h=d[f];d[f]=(typeof j!="function"&&typeof h=="function")?h:Class._fun(function(z,y,w,x){return this.each(function(B){if(!B.properties){return}if(B.properties[m]===z&&!y){return}if(B.$beforePropSet&&false===B.$beforePropSet(m,z,y,w,x)){return}else{var C=B.properties[m];if(B.beforePropertyChanged&&false===B.boxing().beforePropertyChanged(B,m,z,C)){return}if(typeof j=="function"){j.call(B,z,y,w,x)}else{var A=_.get(B.box.$DataModel,[m,"action"]);B.properties[m]=z;if(typeof A=="function"&&B._applySetAction(A,z,C,y,w,x)===false){B.properties[m]=C}}if(B.afterPropertyChanged){B.boxing().afterPropertyChanged(B,m,z,C)}if(B.$afterPropertyChanged){_.tryF(B.$afterPropertyChanged,[B,m,z,C],B)}}})},f,v.KEY,null,"instance");if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}f="get"+c;if(!(r&&r.inner)){var n=r.get;h=d[f];d[f]=(typeof n!="function"&&typeof h=="function")?h:Class._fun(function(){if(typeof n=="function"){return n.apply(this.get(0),arguments)}else{return this.get(0).properties[m]}},f,v.KEY,null,"instance");if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}});return v},setEventHandlers:function(d){var c=this;_.each(d,function(h,e){if(null===h){delete c.$EventHandlers[e];delete c.prototype[e]}else{c.$EventHandlers[e]=h;var g=function(u){var p=arguments.length;if(p==1&&(typeof u=="function"||typeof u=="string"||_.isHash(u)||_.isArr(u))){return this.each(function(j){if(j.renderId){j.clearCache()}if(j.box._addEventHanlder){j.box._addEventHanlder(j,e,u)}j[e]=u})}else{if(p==1&&null===u){return this.each(function(j){j.clearCache();if(j.box._removeEventHanlder){j.box._removeEventHanlder(j,e,j[e])}delete j[e]})}else{var s=[],w=this.get(0);if(w){var z=w[e],y=w.host||w,q,k,f;if(z&&(!_.isArr(z)||z.length)){if(w.$inDesign){return}if(arguments[0]!=w){s[0]=w}for(q=0;q<p;q++){s[s.length]=arguments[q]}w.$lastEvent=e;if(!_.isArr(z)){z=[z]}p=z.length;if(_.isNumb(q=z[0].event)){s[q]=xui.Event.getEventPara(s[q])}var x={};var m=0,u=function(l){if(_.isStr(this)){x[this+""]=l||""}for(q=m;q<p;q++){m=q+1;k=z[q];if(typeof k=="string"){k=y[k]}if(typeof k=="function"){f=_.tryF(k,s,y)}else{if(_.isHash(k)){if("onOK" in k||"onKO" in k){var j=function(r,n){if(u){u.apply(r,n)}};if("onOK" in k){onOK=(k.params||(k.params=[]))[parseInt(k.onOK,10)||0]=function(){j("okData",arguments)}}if("onKO" in k){(k.params||(k.params=[]))[parseInt(k.onKO,10)||0]=function(){j("koData",arguments)}}if(false===(f=xui.pseudocode.exec(k,s,y,x,j))){m=x=u=null}break}else{if(false===(f=xui.pseudocode.exec(k,s,y,x))){m=q;break}}}}}if(m==q){m=x=u=null}return f};return u()}}}}};g.$event$=1;g.$original$=h.$original$||c.KEY;g.$name$=e;g.$type$="event";c.plugIn(e,g)}});return c},unserialize:function(e,g){if(typeof e=="string"){e=_.unserialize(e)}var d=function(f){if(_.isArr(f)){f=f[0]}delete f.serialId;if(f.children){_.arr.each(f.children,d)}},c=[];_.arr.each(e,function(f){if(!g){d(f)}c.push((new (xui.SC(f.key))(f)).get(0))});return this.pack(c,false)}},Instance:{clone:function(){var c=[],e=arguments,d=function(g){delete g.alias;for(var f=0;f<e.length;f++){delete g[e[f]]}if(g.children){for(var f=0,h;h=g.children[f];f++){d(h[0])}}};this.each(function(f){f=f.serialize(false,true);d(f);c.push(f)});return this.constructor.unserialize(c)},serialize:function(d,e){var c=[];this.each(function(f){c[c.length]=f.serialize(false,e)});return d===false?c:c.length==1?" new "+c[0].key+"("+_.serialize(c[0])+")":"xui.UI.unserialize("+_.serialize(c)+")"},getProperties:function(d){var e={},f=this.get(0),j=f.properties,g;if(d===true){return _.copy(j)}else{if(typeof d=="string"){return j[d]}else{for(var c in j){g="get"+_.str.initial(c);if(typeof this[g]=="function"){e[c]=this[g].call(this)}}return e}}},setProperties:function(c,f,e){if(typeof c=="string"){var d={};d[c]=f;c=d}return this.each(function(g){_.each(c,function(j,h){var m="set"+_.str.initial(h),l=g.boxing();if(l&&typeof l[m]=="function"){l[m].call(l,j,!!e)}else{g.properties[h]=j}})})},getEvents:function(c){return this.get(0).getEvents(c)},setEvents:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(g){var f=g.boxing();_.each(c,function(j,h){if(typeof f[h]=="function"){f[h].call(f,j)}})})},alias:function(c){return c?this.setAlias(c):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(d,c){return this._setHostAlias(d,c)},_setHostAlias:function(g,f){var d=this,h=this.get(0),c=h.alias;f=f||h.alias;if(c){if(h.host&&h.host!==h){try{delete h.host[c]}catch(j){h.host[c]=undefined}if(h.host._ctrlpool){delete h.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[h.alias=f]=1;if(h.box&&h.box._syncAlias){h.box._syncAlias(h,c,f)}if(g){h.host=g}if(h.host&&h.host!==h){h.host[f]=d;if(h.host._ctrlpool){h.host._ctrlpool[f]=d.get(0)}}return d},setAlias:function(c){return this._setHostAlias(null,c)},getAlias:function(){return this.get(0).alias},getHost:function(){return this.get(0).host},reBindProp:function(h,n){var k=this,d,f,l,c,j=function(){k.each(function(e){d=e.properties;if(d.propBinder&&!_.isEmpty(d.propBinder)){f=e.boxing();_.each(d.propBinder,function(p,q){if(_.isFun(p)){c=p(e);if(q=="CA"){f.setCustomAttr(c)}else{if(q=="CC"){f.setCustomClass(c)}else{if(q=="CS"){f.setCustomStyle(c)}else{if(_.isFun(f[l="set"+_.str.initial(q)])){f[l](c,true)}}}}}})}})};if(!n){var m;if(window.get){m=get}window.get=function(e){return xui.SC.get(e,h)};try{j()}catch(g){}finally{window.get=m}}else{j()}return this}}});Class("xui.Timer","xui.absObj",{Instance:{_ini:function(g,l,k){var m=this,h=m.constructor,d,n,f,j;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){n=g;g=null;f=n.alias;f=h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(k,m.$key,f,h,g,l,n)}d._n=d._n||[];for(var e in (j=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof j[e]=="object"?_.copy(j[e]):j[e]}}d.link(h._cache,"self").link(xui._pool,"xui");m._nodes.push(d);d.Instace=m;m.n0=d;_.asyRun(function(){if(d&&d.box){d.boxing().start()}});return m},destroy:function(){this.each(function(c){if(c._threadid){xui.Thread(c._threadid).abort()}c.__gc()})},start:function(){return this.each(function(d){if(d.$inDesign){return}var f=d.properties,e=d.boxing(),c=xui.Thread.repeat(function(g){if(d.onTime&&false===e.onTime(d,g)){return false}},f.interval,function(g){d.onStart&&e.onStart(d,g)},function(g){d.onEnd&&e.onEnd(d,g)});d._threadid=c.id})},suspend:function(){return this.each(function(c){if(c._threadid){xui.Thread(c._threadid).suspend()}c.onSuspend&&box.onSuspend(c,threadId)})},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{_objectProp:{tagVar:1,propBinder:1},_beforeSerialized:function(d){var f={};_.merge(f,d,"all");var e=f.properties=_.clone(d.properties,true);if(d.box._objectProp){for(var c in d.box._objectProp){if((c in e)&&e[c]&&_.isHash(e[c])&&_.isEmpty(e[c])){delete e[c]}}}return f},DataModel:{interval:1000},EventHandlers:{onTime:function(c,d){},onStart:function(c,d){},onSuspend:function(c,d){},onEnd:function(c,d){}}}});Class("xui.APICaller","xui.absObj",{Instance:{_ini:function(g,m,l){var n=this,h=n.constructor,d,p,j=h._namePool,f,k;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){p=g;g=null;f=p.alias;f=(f&&!j[f])?f:h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(l,n.$key,f,h,g,m,p)}j[f]=1;d._n=d._n||[];for(var e in (k=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof k[e]=="object"?_.copy(k[e]):k[e]}}d.link(h._cache,"self").link(xui._pool,"xui");n._nodes.push(d);d.Instace=n;n.n0=d;if(!d.name){n.setName(f)}return n},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;delete e._pool[c];d.__gc()})},setHost:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},invoke:function(y,j,k,I,h,r,s){var K=this,f=K.constructor,B=K.get(0),n=B.properties;var A=n.responseType,G=n.requestType,q=n.requestId,l=n.queryURL,x=n.proxyType.toLowerCase(),w=n.queryUserName,m=n.queryPasswrod,N=_.copy(n.queryArgs),c=n.oAuth2Token,p=_.copy(n.queryOptions),v=_.copy(n.queryHeader),u=n.requestDataSource,M=n.responseDataTarget;l=xui.adjustVar(l);if(x=="sajax"){x="jsonp"}else{if(x=="iajax"){x="xdmi"}}if(G=="FORM"||G=="JSON"){N=typeof N=="string"?_.unserialize(N):N}if(!N){N={}}if(n.avoidCache){var L=0,J="_rand_";while(N.hasOwnProperty(J)){J="_rand_"+ ++L}N[J]=_.rand()}if(u&&u.length){for(var L in u){var H=u[L],F;switch(H.type){case"databinder":if(F=xui.DataBinder.getFromName(H.name)){if(!F.updateDataFromUI()){return}else{if(H.path){_.set(N,H.path.split("."),F.getData())}else{_.merge(N,F.getData(),"without")}}}break;case"form":if((F=_.get(B,["host",H.name]))&&F.Class["xui.absContainer"]&&F.getRootNode()){if(!F.checkValid()||!F.checkRequired()){return}else{if(H.path){_.set(N,H.path.split("."),F.getFormValues())}else{_.merge(N,F.getFormValues(),"without")}}}break}}}if(B.beforeInvoke&&false===B.boxing().beforeInvoke(B,q)){return}var e={header:{}};if(!_.isEmpty(v)){_.merge(e.header,v)}if(p.header&&!_.isEmpty(p.header)){_.merge(e.header,p.header);delete p.header}if(A=="SOAP"||G=="SOAP"){if(!f.WDSLCache){f.WDSLCache={}}if(!f.WDSLCache[l]){var E=xui.SOAP.getWsdl(l,function(P){if(B.afterInvoke){B.boxing().afterInvoke(B,P,q||this.uid)}if(B.onError){B.boxing().onError(B,P)}_.tryF(j,arguments,this);_.tryF(I,arguments,this)});if(E){f.WDSLCache[l]=E}else{return}}}switch(A){case"TEXT":e.rspType="text";case"JSON":e.rspType="json";break;case"XML":x="ajax";e.rspType="xml";break;case"SOAP":x="ajax";e.rspType="xml";var C=xui.SOAP.getNameSpace(f.WDSLCache[l]),d=((C.lastIndexOf("/")!=C.length-1)?C+"/":C)+(N.methodName||"");e.header.SOAPAction=d;break}switch(G){case"FORM":N=typeof N=="string"?_.unserialize(N):N;break;case"JSON":e.reqType="json";if(n.queryMethod=="auto"){e.method="POST"}N=typeof N=="string"?N:_.serialize(N);break;case"XML":e.reqType="xml";x="ajax";e.method="POST";if(w&&queryPassword){e.username=w;e.password=queryPassword;e.header.Authorization="Basic "+f._toBase64(w+":"+queryPassword)}N=typeof N=="string"?N:xui.XMLRPC.wrapRequest(N);break;case"SOAP":e.reqType="xml";x="ajax";e.method="POST";if(w&&queryPassword){e.username=w;e.password=queryPassword;e.header.Authorization="Basic "+f._toBase64(w+":"+queryPassword)}N=typeof N=="string"?N:xui.SOAP.wrapRequest(N,f.WDSLCache[l]);break}if(c){e.header.Authorization="Bearer "+c}if(x!="ajax"){e.asy=true}if(x=="jsonp"){e.method="GET"}s=s||{};if(!("asy" in s)){s.asy=!!n.queryAsync}if(!("method" in s)&&n.queryMethod!="auto"){s.method=n.queryMethod}if(!("onEnd" in s)){s.onEnd=I}if(!("onStart" in s)){s.onStart=k}_.merge(s,p);_.merge(s,e,"all");s.proxyType=x;if(_.isEmpty(s.header)){delete s.header}var O=xui.APICaller.Mocker;if(O){var g=N.replace(O.remoteSericeURL,"").replace(/^[/]+/,"").replace(/[/]+$/,"");if((O.blacklist&&!O.blacklist[g])||(O.whitelist&&O.whitelist[g])){l=O.mockerURL.replace(/[/]+$/,"")+"/"+g}}var D={},F;if(!_.isEmpty(n.fakeCookies)){s.$onStart=function(){_.each(n.fakeCookies,function(Q,P){if(_.isSet(F=xui.Cookies.get(P))){D[P]=F;xui.Cookies.remove(P)}});xui.Cookies.set(n.fakeCookies,1,"/")}}if(!_.isEmpty(n.fakeCookies)){s.$onEnd=function(){_.each(n.fakeCookies,function(Q,P){xui.Cookies.remove(P)});xui.Cookies.set(D)}}var z=xui._getrpc(l,N,s).apply(null,[l,N,function(Q){var P;if(!_.isHash(Q)&&!_.isStr(Q)){if(A=="XML"){Q=xui.XMLRPC.parseResponse(Q)}else{if(A=="SOAP"){Q=xui.SOAP.parseResponse(Q,N.methodName,f.WDSLCache[l])}}}if(B.afterInvoke){P=B.boxing().afterInvoke(B,Q,q||this.uid);if(_.isSet(P)){Q=P}P=null}if(M&&M.length){_.arr.each(M,function(T){var S=T.path?_.get(Q,T.path.split(".")):Q,R;switch(T.type){case"alert":S=_.stringify(S);if(xui.Coder){S=xui.Coder.formatText(S)}alert(S);break;case"log":xui.log(S);break;case"databinder":if(R=xui.DataBinder.getFromName(T.name)){R.setData(S).updateDataToUI()}break;case"form":if((R=_.get(B,["host",T.name]))&&R.Class["xui.absContainer"]&&R.getRootNode()){R.setFormValues(S)}break}})}if(B.onData){B.boxing().onData(B,Q,q||this.uid)}_.tryF(y,arguments,this)},function(P){if(B.afterInvoke){B.boxing().afterInvoke(B,P,q||this.uid)}if(M&&M.length){_.arr.each(M,function(R,Q){switch(R.type){case"alert":P=_.stringify(P);if(xui.Coder){P=xui.Coder.formatText(P)}alert(P);break;case"log":xui.log(P);break}})}if(B.onError){B.boxing().onError(B,P,q||this.uid)}_.tryF(j,arguments,this)},r,s]);if(h=="quiet"){z.start()}else{if(h=="return"){return z}else{_.observableRun(function(P){z.threadid=P;z.start()})}}}},Static:{WDSLCache:{},$nameTag:"api_",_pool:{},_objectProp:{tagVar:1,propBinder:1,queryArgs:1,queryHeader:1,queryOptions:1,fakeCookies:1,requestDataSource:1,responseDataTarget:1},destroyAll:function(){this.pack(_.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_toBase64:function(m){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[],g=0,f,e,d,n,l,k,j;do{f=m.charCodeAt(g++);e=m.charCodeAt(g++);d=m.charCodeAt(g++);n=f>>2;l=((f&3)<<4)|(e>>4);k=((e&15)<<2)|(d>>6);j=d&63;if(isNaN(e)){k=j=64}else{if(isNaN(d)){j=64}}h.push(c.charAt(n)+c.charAt(l)+c.charAt(k)+c.charAt(j))}while(g<m.length);return h.join("")},_beforeSerialized:function(d){var f={};_.merge(f,d,"all");var e=f.properties=_.clone(d.properties,true);for(var c in d.box._objectProp){if((c in e)&&e[c]&&(_.isHash(e[c])||_.isArr(e[c]))&&_.isEmpty(e[c])){delete e[c]}}return f},DataModel:{dataBinder:null,dataField:null,requestId:"",queryAsync:true,queryURL:"",avoidCache:true,oAuth2Token:"",queryUserName:"",queryPassword:"",queryMethod:{ini:"auto",listbox:["auto","GET","POST","PUT","DELETE"]},requestType:{ini:"FORM",listbox:["FORM","JSON","XML","SOAP"]},responseType:{ini:"JSON",listbox:["JSON","TEXT","XML","SOAP"]},requestDataSource:{ini:[]},responseDataTarget:{ini:[]},queryArgs:{ini:{}},queryHeader:{ini:{}},queryOptions:{ini:{}},fakeCookies:{ini:{}},proxyType:{ini:"auto",listbox:["auto","AJAX","JSONP","XDMI"]},name:{set:function(h){var k=this,j=k.properties.name,l=k.box,d=l._pool,e=d[j],f=d[h],g;d[k.properties.name=h]=k;if(f&&!e){k._n=f._n}if(e){delete d[j]}}},proxyInvoker:{inner:true,trigger:function(){var d=this.get(0),c=d.properties.responseDataTarget;d.properties.responseDataTarget=[];this.invoke(function(e){d.properties.responseDataTarget=c;e=_.stringify(e);if(xui.Coder){e=xui.Coder.formatText(e)}alert(e)},function(e){d.properties.responseDataTarget=c;e=_.stringify(e);if(xui.Coder){e=xui.Coder.formatText(e)}alert(e)})}}},EventHandlers:{beforeInvoke:function(c,d){},afterInvoke:function(d,c,e){},onData:function(d,c,e){},onError:function(d,c,e){}}}});Class("xui.DataBinder","xui.absObj",{Instance:{_ini:function(g,m,l){var n=this,h=n.constructor,d,p,j=h._namePool,f,k;if(g&&g["xui.Profile"]){d=g;f=d.alias||h.pickAlias()}else{if(g&&g.key&&xui.absBox.$type[g.key]){p=g;g=null;f=p.alias;f=(f&&!j[f])?f:h.pickAlias()}else{f=h.pickAlias()}d=new xui.Profile(l,n.$key,f,h,g,m,p)}j[f]=1;d._n=d._n||[];for(var e in (k=h.$DataStruct)){if(!(e in d.properties)){d.properties[e]=typeof k[e]=="object"?_.copy(k[e]):k[e]}}d.link(h._cache,"self").link(xui._pool,"xui");n._nodes.push(d);d.Instace=n;n.n0=d;if(!d.name){n.setName(f)}return n},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;_.arr.each(d._n,function(f){if(f){e._unBind(c,f)}});delete e._pool[c];d.__gc()})},setHost:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},isDirtied:function(){var d=this.constructor._getBoundElems(this.get(0));for(var f=0,c=d.length;f<c;f++){var g=d[f],e;if(g.box["xui.absValue"]){e=g.boxing();if((e.getUIValue()+" ")!==(e.getValue()+" ")){return true}}}return false},checkValid:function(d){var c=true;xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).each(function(e){if(!e.boxing().checkValid()){if(!d){if(!e.beforeInputAlert||false!==e.boxing().prf.beforeInputAlert(profile,e,"invalid")){xui.alert("$inline.invalid",xui.getRes("$inline.invalid")+(e.properties.labelCaption?(" : "+e.properties.labelCaption):""),function(){if(e&&e.renderId){e.boxing().activate()}})}return c=false}c=false}});return c},checkRequired:function(d){var c=true;xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).each(function(e){if(e.properties.required&&(!(i=e.boxing().getUIValue()))&&i!==0){if(!d){if(!e.beforeInputAlert||false!==e.boxing().prf.beforeInputAlert(profile,e,"required")){xui.alert("$inline.required",xui.getRes("$inline.required")+(e.properties.labelCaption?(" : "+e.properties.labelCaption):""),function(){if(e&&e.renderId){e.boxing().activate()}})}return c=false}c=false}});return c},getUI:function(c){var d;if(!c){d=xui.UI.pack(this.constructor._getBoundElems(this.get(0)),false)}else{_.arr.each(this.constructor._getBoundElems(this.get(0)),function(e){var f=e.properties;if((f.dataField||f.name||e.alias)==c){d=e.boxing();return false}})}return d},getUIValue:function(g,f){var c=this,d=c.get(0),e={};_.arr.each(this.constructor._getBoundElems(d),function(k){if(!k.box["xui.absValue"]){return}var l=k.properties,h=k.boxing(),j=h.getUIValue();if(!f||(j+" ")!==(h.getValue()+" ")){if(g&&h.getCaption){e[l.dataField||l.name||k.alias]={value:j,caption:h.getCaption()}}else{e[l.dataField||l.name||k.alias]=j}}});return e},getDirtied:function(c){return this.getUIValue(c,true)},getData:function(d,g,c){var f=this.get(0);if(f.$inDesign||g){f.properties.data={};this.updateDataFromUI(false,false,false,null,null,c,false)}var e=f.properties.data;return _.isSet(d)?e[d]:e},setData:function(c,f,e){var d=this.get(0),g=d.properties;if(c===false){_.each(g.data,function(j,h){g.data[h]=null})}else{if(!_.isSet(c)){g.data={}}else{if(_.isHash(c)){g.data=c}else{g.data[c]=f}}}if(d.$inDesign||e){this.updateDataToUI()}return this},updateValue:function(){xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),false).updateValue();return this},updateDataFromUI:function(k,p,n,j,c,l,f){var m=this,g=m.get(0),e=g.properties,d={},h;if(!l){if(!m.checkValid()){return}if(!m.checkRequired()){return}}_.merge(d,e.data,function(q,r){return !c||c===r||(_.isArr(c)?_.arr.indexOf(c,r)!=-1:false)});_.arr.each(m.constructor._getBoundElems(g),function(v){var q=v.properties,x=v.box.$EventHandlers,C=q.dataField||q.name||v.alias;if(!c||c===C||(_.isArr(c)?_.arr.indexOf(c,C)!=-1:false)){var A=v.boxing(),B,r=v.box["xui.absValue"]?A.getUIValue(_.isBool(n)?n:v.__returnArray):null;if(_.isHash(d[C])){var s=d[C].properties,y=d[C].theme,u=d[C].CC,w=d[C].CA,z=d[C].CS;if(s){delete d[C].properties}if(y){delete d[C].theme}if(w){delete d[C].CA}if(u){delete d[C].CC}if(z){delete d[C].CS}_.filter(d[C],function(E,D){return !!(D in q)});if(!_.isEmpty(d[C])){_.each(d[C],function(E,D){if(D in q){d[C][D]=q[D]}})}if(_.isHash(s)){_.filter(s,function(E,D){return D in q&&!(D in d[C])});if(!_.isEmpty(s)){_.each(s,function(E,D){if(D in q){s[D]=q[D]}});d[C].properties=s}}if(y){d[C].theme=v.theme}if(w){d[C].CA=_.clone(v.CA,true)}if(u){d[C].CC=_.clone(v.CC,true)}if(z){d[C].CS=_.clone(v.CS,true)}if("caption" in q&&("caption" in d[C]||p)&&A.getCaption){if(s&&"caption" in s){s.caption=A.getCaption()}else{d[C].caption=A.getCaption()}}if(_.isSet(r)&&"value" in q){if(s&&"value" in s){s.value=r}else{d[C].value=r}}}else{if(v.box["xui.UI.ComboInput"]&&(q.type=="file"||q.type=="upload")){d[C]=v}else{if(p&&"caption" in q){B=typeof(A.getCaption)=="function"?A.getCaption():q.caption;if((!B&&!r)||B==r){d[C]=r}else{d[C]={value:r,caption:B}}}else{d[C]=r}}}if(k!==false&&v.renderId&&v.box["xui.absValue"]){A.updateValue()}}});if(j){d=_.tryF(j,[d,g],this)}if(!f&&g.afterUpdateDataFromUI){h=this.afterUpdateDataFromUI(g,d);if(_.isHash(h)){d=h}h=null}_.merge(g.properties.data,d,"all");return true},updateDataToUI:function(q,d,h){var x,g,w,r,u,k,j,m,s=this,l=s.get(0),f=l.properties,e={},n;_.merge(e,f.data,function(c,p){return !d||d===p||(_.isArr(d)?_.arr.indexOf(d,p)!=-1:false)});if(q){e=_.tryF(q,[e,l],s)}if(!h&&l.beforeUpdateDataToUI){n=s.beforeUpdateDataToUI(l,e);if(_.isHash(n)){e=n}n=null}_.arr.each(s.constructor._getBoundElems(l),function(c){g=c.properties;m=c.box.$EventHandlers;x=g.dataField||g.name||c.alias;if(!d||d===x||(_.isArr(d)?_.arr.indexOf(d,x)!=-1:false)){if(e&&x in e){w=_.clone(e[x],null,2);j=r=null;u=c.boxing();if(_.isHash(w)){if(k=w.properties){_.filter(k,function(v,p){return p in g});r=_.isSet(k.caption)?k.caption:null;j=_.isSet(k.value)?k.value:null;delete k.caption;delete k.value;if(!_.isEmpty(k)){u.setProperties(k)}delete w.properties}if(k=w.theme){if(typeof(u.setTheme)=="function"){u.setTheme(k)}delete w.theme}if(k=w.CS){if(!_.isEmpty(k)){u.setCustomStyle(k)}delete w.CS}if(k=w.CC){if(!_.isEmpty(k)){u.setCustomClass(k)}delete w.CC}if(k=w.CA){if(!_.isEmpty(k)){u.setCustomAttr(k)}delete w.CA}if(!_.isEmpty(w)){_.filter(w,function(v,p){return(p in g)||(p in w)});if(!_.isEmpty(w)){r=_.isSet(r)?r:_.isSet(w.caption)?w.caption:null;j=_.isSet(j)?j:_.isSet(w.value)?w.value:null;delete w.caption;delete w.value;if(!_.isEmpty(w)){u.setProperties(w)}}}}else{j=w}if(_.isSet(j)&&_.isFun(u.resetValue)){u.resetValue(j);c.__returnArray=_.isArr(j)}if(_.isSet(r)&&_.isFun(u.setCaption)){_.tryF(u.setCaption,[r,true],u)}}}});return s}},Static:{$nameTag:"databinder_",_pool:{},_objectProp:{tagVar:1,propBinder:1,data:1},destroyAll:function(){this.pack(_.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_beforeSerialized:function(d){var f={};_.merge(f,d,"all");var e=f.properties=_.clone(d.properties,true);for(var c in d.box._objectProp){if((c in e)&&e[c]&&(_.isHash(e[c])||_.isArr(e[c]))&&_.isEmpty(e[c])){delete e[c]}}return f},_getBoundElems:function(d){var c=[];_.arr.each(d._n,function(e){if(e.behavior.PanelKeys){xui.absValue.pack(e.boxing().getChildren(null,true)).each(function(f){c.push(f)})}else{if(e.box["xui.absValue"]){c.push(e)}}});return _.arr.removeDuplicate(c)},_bind:function(c,d){if(!c){return}var e=this._pool[c];if(!e){b=new xui.DataBinder();b.setName(c);e=b.get(0)}if(d){if(_.arr.indexOf(e._n,d)==-1){d.link(e._n,"databinder."+c)}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},DataModel:{dataBinder:null,dataField:null,name:{set:function(m){var e=this,p=e.properties.name,j=e.box,d=j._pool,h=d[p],n=d[m],k;d[e.properties.name=m]=e;if(h&&!n&&e._n.length){for(var g=0,f=e._n.length;g<f;g++){_.set(e._n[g],["properties","dataBinder"],m)}}if(n&&!h){e._n=n._n}if(h){delete d[p]}}},data:{ini:{}}},EventHandlers:{beforeInputAlert:function(e,c,d){},beforeUpdateDataToUI:function(d,c){},afterUpdateDataFromUI:function(d,c){}}}});Class("xui.Event",null,{Constructor:function(A,x,c,C){var q=xui.Event,l=window,E=document,G=0,v,n,k=xui.DragDrop,g,u,m;if(!(A=A||l.event)||!(g=x)){g=x=null;return false}x=null;var e=A.type,H=A.$xuievent,s=A.$xuitype,y=A.$xuiall;if(e=="xuitouchdown"){e="mousedown";H=1;y=0;s="beforeMousedown"}if("mouseover"==e||"mouseout"==e){G=(k&&k._profile.isWorking)?1:2;if(G!=1&&c){g=null;return q.$FALSE}if(!q._handleMouseHover(A,g,G==1)){g=null;return q.$FALSE}if(G==1){u=k&&k._dropElement}}else{if((m=q._tabHookStack).length&&q._kb[e]&&(A.$key||A.keyCode||A.charCode)==9&&false===q._handleTabHook(q.getSrc(A),m=m[m.length-1])){g=null;return}}v=C||q.getId(g);if(m=q._getProfile(v)){if(e=="DOMMouseScroll"){e="mousewheel"}if(e=="mousedown"||e=="mousewheel"){_.tryF(xui.Dom._blurTrigger,[m,A])}else{if(e=="resize"){e="size";if(xui.browser.ie&&l===g){var l=xui.browser.contentBox&&E.documentElement.clientWidth||E.body.clientWidth,B=xui.browser.contentBox&&E.documentElement.clientHeight||E.body.clientHeight;if(m._w==l&&m._h==B){g=null;return}else{m._w=l;m._h=B}}}}var z,D,I,p=true,F=[];for(z=0;z<=2;++z){if(G==1&&z!==0&&!A.$force){break}if(G==2&&z===0){continue}I=q._type[e+z]||(q._type[e+z]=q._getEventName(e,z));if(!H||y||(I===s)){m._getEV(F,v,I,g.$xid)}}D=function(f,d){for(var j=0,h;h=arguments.callee.tasks[j++];){if(false===h(m,f,d)){return false}}return true};D.tasks=F;p=D(A,g.$xid);if(l===g&&e=="size"){_.asyRun(function(){D(A,g.$xid);D.tasks.length=0;delete D.tasks;D=g=null},150)}if(k){if(e=="drag"){k._onDrag=D}else{if(e=="dragover"){k._onDragover=D}}}else{if(e!=="size"){D.tasks.length=0;delete D.tasks;D=null}}if(G==1){if("mouseover"==e&&k._dropElement==g.$xid&&u&&u!=g.$xid){n=xui.use(u).get(0);q({type:"mouseout",target:n,$xui:true,$xuitype:"beforeMouseout",preventDefault:function(d){xui.Event.stopDefault(d)},stopPropagation:function(d){xui.Event.stopBubble(d)}},n);k.setDropElement(g.$xid)}if("mouseout"==e&&!k._dropElement&&u&&u==g.$xid){q._preDroppable=v;_.asyRun(function(){delete xui.Event._preDroppable})}if(g.$xid==k._dropElement){p=false}}if(p===false){q.stopBubble(A)}return p}},Static:{$FALSE:xui.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){return xui.Event(arguments[0],xui.Event.getSrc(arguments[0]||window.event))},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel").split(","),simulateEvent:function(e,d,c,f){c=c||{};if(e[0]){e=e[0]}_.tryF(xui.Event.$eventsforSimulation[f||d],[e,d,c])},_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(e,d,c){return e&&(typeof e=="string")&&((d=(c=xui.$cache.profileMap)[e])?d["xui.UIProfile"]?d:(c=c[e.replace(this._reg,"")])?c:d:c[e.replace(this._reg,"")])},_handleTabHook:function(g,f){if(g===document){return true}var e=g,d,c=e.tabIndex;do{if(xui.getId(e)==f[0]){e=g=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window);d=_.tryF(f[1],[f[0],c],g);e=g=null;return false},_handleMouseHover:function(c,g,k){if(g==document){g=null;return true}var e=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(k&&c.type=="mouseover"&&this._preDroppable){try{do{if(e&&e.id&&e.id==this._preDroppable){g=e=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window)}catch(j){}}if(xui.browser.gek){try{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}catch(j){var h=this.getPos(c),e=xui([g]),d=e.offset(),l=e.cssSize(),f=(h.left<d.left||h.left>d.left+l.width||h.top<d.top||h.top>d.top+l.height);g=e=null;return c.type=="mouseover"?!f:f}}else{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}g=e=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([xui(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&xui.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return xui.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(h){h=h||window.event;if(xui.browser.isTouch&&h.changedTouches&&h.changedTouches[0]){h=h.changedTouches[0]}if("pageX" in h){return{left:h.pageX,top:h.pageY}}else{var k=document,j=k.documentElement,c=k.body,f,e=(_.isSet(f=j&&j.scrollLeft)?f:_.isSet(f=c&&c.scrollLeft)?f:0)-(_.isSet(f=j.clientLeft)?f:0),g=(_.isSet(f=j&&j.scrollTop)?f:_.isSet(f=c&&c.scrollTop)?f:0)-(_.isSet(f=j.clientTop)?f:0);return{left:h.clientX+e,top:h.clientY+g}}},getKey:function(c){c=c||window.event;var h=[],n,e=c.$key||c.keyCode||c.charCode||0;if(typeof e=="string"){h[0]=e}else{var m=String.fromCharCode(e),j=c.type;if((j=="keypress"&&e>=33&&e<=128)||((e>=48&&e<=57)||(e>=65&&e<=90))){h[0]=m}else{if(!(n=arguments.callee.map)){n=arguments.callee.map={};var e,g=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var f=1,d=g.length;f<d;f=f+2){n[g[f-1]]=g[f]}g.length=0;n[188]=","}h[0]=n[e]||m}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||e==17||e==57391)){if(e==17||e==57391){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||e==16||e==57390)){if(e==16||e==57390){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||e==18||e==57388)){if(e==18||e==57388){h[0]=""}h.push("1")}else{h.push("")}h[0]=h[0];h.key=h[0];h.keyCode=e;h.type=j;h.ctrlKey=!!h[1];h.shiftKey=!!h[2];h.altKey=!!h[3];if(j=="keypress"){if(this.$keydownchar&&this.$keydownchar.length>1){h.key=this.$keydownchar}}else{if(j=="keydown"){if(h[0].length>1){this.$keydownchar=h[0]}else{if(this.$keydownchar){this.$keydownchar=null}}}else{if(j=="keyup"){if(this.$keydownchar){this.$keydownchar=null}}}}return h},getEventPara:function(j,c){if(!c){c=xui.Event.getPos(j)}var g=this.getKey(j),e=this.getBtn(j),f={button:e,pageX:c&&c.left,pageY:c&&c.top,key:g.key,keyCode:g.keyCode,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g.altKey};for(var d in j){if(d.charAt(0)=="$"){f[d]=j[d]}}return f},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}if("cancelBubble" in c){c.cancelBubble=true}this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}else{if("returnValue" in c){c.returnValue=false}}},keyboardHook:function(l,c,e,g,j,h,n,m){if(l){var d=xui.$cache.hookKey,f=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(e?"1":"")+":"+(g?"1":"");if(typeof j!="function"){delete d[f]}else{d[f]=[j,h,n,m]}}return this},keyboardHookUp:function(l,c,e,g,j,h,n,m){if(l){var d=xui.$cache.hookKeyUp,f=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(e?"1":"")+":"+(g?"1":"");if(typeof j!="function"){delete d[f]}else{d[f]=[j,h,n,m]}}return this},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(d,g){var f=this,j=f._supportCache,h=(g?g.tagName.toLowerCase():"div")+":"+d;if(h in j){return j[h]}g=g||document.createElement(f.$TAGNAMES[d]||"div");d="on"+d;var e=(d in g);if(!e){if(!g.setAttribute){g=document.createElement("div")}if(g.setAttribute){g.setAttribute(d,"");e=typeof g[d]=="function";if(typeof g[d]!="undefined"){g[d]=undefined}g.removeAttribute(d)}}g=null;return j[h]=e},_simulateMousedown:function(c){if(!c.touches){return true}var d=xui.Event,e=c.changedTouches,f=e[0];if(c.touches.length>1){return true}d.__simulatedMousedownNode=f.target;if(!d.isSupported("mousedown")){d.simulateEvent(f.target,"mousedown",{screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY})}else{d._xuitouchdowntime=_.setTimeout(function(){d._xuitouchdowntime=0;d.simulateEvent(f.target,"xuitouchdown",{screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY},"mousedown")},100)}return true},_simulateMouseup:function(e){if(!e.touches){return true}var f=xui.Event,d=(new Date).getTime(),c=d-f.$lastMouseupTime,g=e.changedTouches,h=g[0];if(f._xuitouchdowntime){_.clearTimeout(f._xuitouchdowntime)}f.__simulatedMouseupNode=h.target;if(!f.isSupported("mouseup")){f.simulateEvent(h.target,"mouseup",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})}if(f.__simulatedMouseupNode===f.__simulatedMousedownNode){if(!f.isSupported("click")){f.simulateEvent(h.target,"click",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})}if(c<=f.$dblcInterval){_.asyRun(function(){f.$lastMouseupTime=0;f.simulateEvent(h.target,"dblclick",{screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY})})}}f.__simulatedMouseupNode=f.__simulatedMousedownNode=null;f.$lastMouseupTime=d;return true},stopPageTouchmove:function(){document.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointermove":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerMove":"touchmove",function(c){c.preventDefault()})}},Initialize:function(){var n=this,p=window,l=document,q={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},e=["before","on","after"],j,h,r;j=n._map1={};_.arr.each(n._events,function(d){r=_.str.initial(d);j[d]=[e[0]+r,e[1]+r,e[2]+r]});j=n._eventMap={};h=n._eventHandler={};_.arr.each(n._events,function(d){r=_.str.initial(d);j[d]=j[e[1]+d]=j[e[0]+r]=j[e[1]+r]=j[e[2]+r]=d;h[d]=h[e[1]+d]=h[e[0]+r]=h[e[1]+r]=h[e[2]+r]=(d in q)?q[d]:("on"+d)});p.onresize=n.$eventhandler;if(p.addEventListener){p.addEventListener("DOMMouseScroll",n.$eventhandler3,false)}if(xui.browser.isTouch){if(l.addEventListener){l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",n._simulateMousedown,false);l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",n._simulateMouseup,false);l.addEventListener("xuitouchdown",n.$eventhandler,false)}else{if(l.attachEvent){l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",n._simulateMousedown);l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",n._simulateMouseup);l.attachEvent("xuitouchdown",n.$eventhandler)}}}l.onmousewheel=p.onmousewheel=n.$eventhandler3;var k=function(x,C,G){switch(C){case"textevent":C="keypress";break;case"keyup":case"keydown":case"keypress":break}_.merge(G,{bubbles:true,cancelable:true,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0},"without");var w=G.bubbles,u=G.cancelable,D=G.view,s=G.ctrlKey,d=G.altKey,B=G.shiftKey,z=G.metaKey,F=G.keyCode,E=G.charCode;var A=null;if(l.createEvent){try{A=l.createEvent("KeyEvents");A.initKeyEvent(C,w,u,D,s,d,B,z,F,E)}catch(y){try{A=l.createEvent("Events")}catch(v){A=l.createEvent("UIEvents")}finally{A.initEvent(C,w,u);A.view=D;A.altKey=d;A.ctrlKey=s;A.shiftKey=B;A.metaKey=z;A.keyCode=F;A.charCode=E}}x.dispatchEvent(A)}else{if(l.createEventObject){A=l.createEventObject();A.bubbles=w;A.cancelable=u;A.view=D;A.ctrlKey=s;A.altKey=d;A.shiftKey=B;A.metaKey=z;A.keyCode=(E>0)?E:F;x.fireEvent("on"+C,A)}else{throw C+" cant be simulated in "+navigator.userAgent}}},c=function(H,y,x){x=x||{};_.merge(x,{bubbles:true,cancelable:true,view:p,detail:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var A=x.bubbles,I=x.cancelable,C=x.view,G=x.detail,v=x.ctrlKey,u=x.altKey,D=x.shiftKey,w=x.metaKey,d=x.screenX,J=x.screenY,F=x.clientX,E=x.clientY,s=x.button,z=x.relatedTarget;var B=null;if(l.createEvent){B=l.createEvent("MouseEvents");if(B.initMouseEvent){B.initMouseEvent(y,A,I,C,G,d,J,F,E,v,u,D,w,s,z)}else{B=l.createEvent("UIEvents");B.initEvent(y,A,I);B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;B.button=s;B.relatedTarget=z}if(z&&!B.relatedTarget){if(y==="mouseout"){B.toElement=z}else{if(y==="mouseover"){B.fromElement=z}}}H.dispatchEvent(B)}else{if(l.createEventObject){B=l.createEventObject();B.bubbles=A;B.cancelable=I;B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;switch(s){case 0:B.button=1;break;case 1:B.button=4;break;case 2:break;default:B.button=0}B.relatedTarget=z;H.fireEvent("on"+y,B)}else{throw y+" cant be simulated in "+navigator.userAgent}}},g=function(z,y,v){_.merge(v,{bubbles:true,cancelable:(y==="submit"),view:p,detail:1},"without");var u=v.bubbles,s=v.cancelable,d=v.view,x=v.detail;var w=null;if(l.createEvent){w=l.createEvent("UIEvents");w.initUIEvent(y,u,s,d,x);z.dispatchEvent(w)}else{if(l.createEventObject){w=l.createEventObject();w.bubbles=u;w.cancelable=s;w.view=d;w.detail=x;z.fireEvent("on"+y,w)}else{throw y+" cant be simulated in "+navigator.userAgent}}},m=function(y,C,F){_.merge(F,{bubbles:true,cancelable:true,detail:2,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,scale:1,rotation:0},"without");var w=F.bubbles,u=F.cancelable,x=F.detail,D=F.view,s=F.ctrlKey,d=F.altKey,B=F.shiftKey,z=F.metaKey,v=F.scale,E=F.rotation;var A;A=l.createEvent("GestureEvent");A.initGestureEvent(C,w,u,D,x,screenX,screenY,clientX,clientY,s,d,B,z,y,v,E);y.dispatchEvent(A)},f=function(J,y,w){if(y==="touchstart"||y==="touchmove"){if(!w.touches||!w.touches.length){throw"No touch object in touches."}}else{if(y==="touchend"){if(!w.changedTouches||!w.changedTouches.length){throw"No touch object in changedTouches."}}}_.merge(w,{bubbles:true,cancelable:(y!=="touchcancel"),detail:1,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var z=w.bubbles,L=w.cancelable,I=w.detail,B=w.view,K=w.scale,G=w.rotation,C=w.touches,H=w.targetTouches,x=w.changedTouches,u=w.ctrlKey,s=w.altKey,D=w.shiftKey,v=w.metaKey,d=w.screenX,M=w.screenY,F=w.clientX,E=w.clientY,L=y=="touchcancel"?false:w.cancelable;var A;if(l.createEvent){if(xui.browser.isAndroid){if(xui.browser.ver<4){A=l.createEvent("MouseEvents");A.initMouseEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,0,J);A.touches=C;A.targetTouches=H;A.changedTouches=x}else{A=l.createEvent("TouchEvent");A.initTouchEvent(C,H,x,y,B,d,M,F,E,u,s,D,v)}}else{if(xui.browser.isIOS){if(xui.browser.ver>=2){A=l.createEvent("TouchEvent");A.initTouchEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,C,H,x,K,G)}else{throw y+" cant be simulated in "+navigator.userAgent}}else{throw y+" cant be simulated in "+navigator.userAgent}}J.dispatchEvent(A)}else{throw y+" cant be simulated in "+navigator.userAgent}};n.$eventsforSimulation={click:c,dblclick:c,mouseover:c,mouseout:c,mouseenter:c,mouseleave:c,mousedown:c,mouseup:c,mousemove:c,pointerover:c,pointerout:c,pointerdown:c,pointerup:c,pointermove:c,MSPointerOver:c,MSPointerOut:c,MSPointerDown:c,MSPointerUp:c,MSPointerMove:c,keydown:k,keyup:k,keypress:k,submit:g,blur:g,change:g,focus:g,resize:g,scroll:g,select:g,touchstart:f,touchmove:f,touchend:f,touchcancel:f,gesturestart:m,gesturechange:m,gestureend:m}}});Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_appendSS:function(d,c,g){var e=document.createElement("style");e.type="text/css";if(g){e.id=g}if(xui.browser.ie&&e.styleSheet&&"cssText" in e.styleSheet){e.styleSheet.cssText=c||""}else{try{e.appendChild(document.createTextNode(c||""))}catch(f){e.styleSheet.cssText=c||""}}d.appendChild(e);return e},_createCss:function(e,h,n){var l=this,m=this._getHead(),g=l._firstid,j=l._lastid,f,k;f=document.createElement("style");f.type="text/css";f.id=e;if(h){if(xui.browser.ie&&f.styleSheet&&"cssText" in f.styleSheet){f.styleSheet.cssText=h||""}else{try{f.appendChild(document.createTextNode(h||""))}catch(d){f.styleSheet.cssText=h||""}}}if(!n){k=document.getElementById(g)||m.firstChild;while((k=k.nextSibling)&&!/^(script|link|style)$/i.test(""+k.tagName)){}if(k){m.insertBefore(f,k)}else{if(k=document.getElementById(j)){m.insertBefore(f,k)}else{m.appendChild(f)}}}else{m.appendChild(f)}return f},_getCss:function(e,c,d){return document.getElementById(e)||this._createCss(e,c,d)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!xui.browser.ie){return}var g=0;for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"){g++}}return g>20},get:function(h,g){for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"&&h in c&&c[h]==g){return c}}},addStyleSheet:function(c,l,d){var j,g=this,f=g._getHead(),h=function(m,s,n){var r=document.createElement("style");r.type="text/css";if(s){r.id=s}if(xui.browser.ie&&r.styleSheet&&"cssText" in r.styleSheet){r.styleSheet.cssText=m||""}else{try{r.appendChild(document.createTextNode(m||""))}catch(q){r.styleSheet.cssText=m||""}}if(n===-1){if(f.firstChild){f.insertBefore(r,f.firstChild)}else{f.appendChild(r)}}else{if(n===1){f.appendChild(r)}else{f.insertBefore(r,n?g._getLast():g._getBase())}}r.disabled=true;r.disabled=false;return r},k=function(m,n){var p=n?g._getLast():g._getBase();p.styleSheet.cssText+=m;return p};if(l&&(l=l.replace(/[^\w\-\_\.\:]/g,"_"))&&(j=g.get("id",l))){return j}if(g._check()){return k(c,d)}else{return h(c,l,d)}},includeLink:function(d,k,h,c){var j,g=this,f=g._getHead();if(d&&(j=g.get("href",d))){}else{j=document.createElement("link");j.type="text/css";j.rel="stylesheet";j.href=d;if(k){j.id=k}j.media="all";_.each(c,function(l,e){j.setAttribute(e,l)})}f.insertBefore(j,h?g._getBase():g._getLast());j.disabled=true;j.disabled=false;return j},remove:function(e,d){var c=this._getHead();if(d=this.get(e,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,m,h,d){var j=this,k=j._getHead(),g={},f,l;g[m]=d;f=j.includeLink(c,null,false,g);if(l=j.get(m,h)){k.replaceChild(f,l)}f.disabled=true;f.disabled=false},_build:function(c,f,d){var e="";_.each(f,function(h,g){e+=g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h+";"});return d?e:c+"{"+e+"}"},setStyleRules:function(g,p,d){var n=this,u=true,f=document.styleSheets,m,j,c,r,k,l,s,q;g=_.str.trim(g.replace(/\s+/g," "));if(!(p&&d)){r=g.toLowerCase();_.arr.each(_.toArr(f),function(v){try{v[n._r]}catch(h){return}_.arr.each(_.toArr(v[n._r]),function(e,w){if(!e.selectorText){return}if(e.disabled){return}c=n._rep(e.selectorText);q=c.split(",");if(!p){u=false;if(_.arr.indexOf(q,r)!=-1&&q.length>1){q=_.arr.removeFrom(q,_.arr.indexOf(q,r)).join(",");s=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}"));if(v.insertRule){v.insertRule(q+"{"+s+"}",v[n._r].length)}else{if(v.addRule){v.addRule(q,s||"{}")}}if(v.deleteRule){v.deleteRule(w)}else{v.removeRule(w)}v.disabled=true;v.disabled=false}else{if(c==r){if(v.deleteRule){v.deleteRule(w)}else{v.removeRule(w)}v.disabled=true;v.disabled=false}}}else{if(c==r){m=e;return false}if(_.arr.indexOf(q,r)!=-1){j=e;return false}}},null,true);if(m){u=false;try{_.each(p,function(w,e){e=e.replace(/(-[a-z])/gi,function(x,y){return y.charAt(1).toUpperCase()});m.style[e]=typeof w=="function"?w(m.style[e]):w})}catch(h){}v.disabled=true;v.disabled=false;return false}else{if(j){u=false;v.insertRule(n._build(g,p),v[n._r].length);v.disabled=true;v.disabled=false;return false}}},null,true)}if(d||u){n._addRules(g,p)}return n},$getCSSValue:function(p,h,u){var x=this,q=x._r,f=document.styleSheets,n=f.length,g,d,y,s,r,c;p=_.str.trim(p.replace(/\s+/g," "));for(s=n-1;s>=0;s--){try{d=f[s][q]}catch(w){continue}if(!f[s].disabled){g=(d=f[s][q]).length;for(r=g-1;r>=0;r--){if((y=d[r]).selectorText&&!y.disabled){c=x._rep(y.selectorText);if(_.arr.indexOf(c.split(/\s*,\s*/g),p)!=-1){if(!u){return(y.style[h]||"").replace(/^\"|\"$/g,"")}else{if(u===y.style[h]){return f[s].ownerNode||f[s].owningElement}}}}}}}},_addRules:function(c,e){var d=this,f=d._getLast(),g=f.sheet||f.styleSheet;if(g.insertRule){g.insertRule(d._build(c,e),g[d._r].length)}else{if(g.addRule){g.addRule(c,d._build(c,e,true)||"{}")}}f.disabled=true;f.disabled=false;return d},resetCSS:function(){var c=xui.browser,d="html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,ar{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}"+(c.isWebKit?"input,textarea,select{-webkit-user-select: auto;}":"")+"legend{color:#000;}span{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}";this.addStyleSheet(d,"xui.CSSreset")}},Initialize:function(){var c=xui.browser,d=".xui-node{margin:0;padding:0;line-height:1.22em;-webkit-text-size-adjust:none;}.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;font-size:12px;line-height:1.22em;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;font-size:12px;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(c.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(c.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-button,.xui-node-textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}.xui-node-a{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover{color:red}"+(c.gek?(".xui-node-a:focus{outline-offset:-1px;"+(c.ver<3?"-moz-outline-offset:-1px !important":"")+"}"):"")+".xui-node-span, .xui-node-div{border:0;font-size:12px;}.xui-node-span, .xui-wrapper span"+((c.ie&&c.ver<=7)?"":", .xui-v-wrapper:before, .xui-v-wrapper > .xui-v-node")+"{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(c.ie6?("#"+xui.$localeDomId+"{vertical-align:baseline;}"):"")+".xui-nooutline:focus{outline:0;}.xui-cls-wordwrap{white-space: pre-wrap;word-break: break-all;"+(c.gek?"white-space: -moz-pre-wrap;":"")+(c.opr?"white-space: -pre-wrap;":"")+(c.opr?"white-space: -o-pre-wrap;":"")+(c.ie?"word-wrap: break-word;":"")+"}"+((c.ie&&c.ver<=7)?"":(".xui-v-wrapper:before{content:'';height:100%;font-size:0;vertical-align:middle;}.xui-v-wrapper > .xui-v-node{vertical-align:middle;}.xui-v-top > .xui-v-wrapper:before{vertical-align:top;}.xui-v-top > .xui-v-wrapper > .xui-v-node{vertical-align:top;}.xui-v-bottom > .xui-v-wrapper:before{vertical-align:bottom;}.xui-v-bottom > .xui-v-wrapper > .xui-v-node{vertical-align:bottom;}"));this.addStyleSheet(d,"xui.CSS")}});Class("xui.DomProfile","xui.absProfile",{Constructor:function(d){var c=arguments.callee.upper;if(c){c.call(this)}c=null;xui.$cache.profileMap[this.domId=d]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(d,h,e){var g=xui.$cache.profileMap[h];if(g&&(g=g.events)&&(g=g[e])){for(var f=0,c=g.length;f<c;f++){if(typeof g[g[f]]=="function"){d[d.length]=g[g[f]]}}}}},Static:{get:function(c){return xui.$cache.profileMap[c]},$abstract:true}});Class("xui.Dom","xui.absBox",{Instance:{get:function(f){var e=xui.$cache.domPurgeData,h=this._nodes,j;if(_.isNumb(f)){return(j=h[f])&&(j=e[j])&&j.element}else{var d=[],c=h.length;for(var g=0;g<c;g++){d[d.length]=(j=e[h[g]])&&j.element}return d}},each:function(d,k){var h=this,e=xui.$cache.domPurgeData,m,g,f=h._nodes,c=f.length;if(k){for(g=c;g>=0;g--){if((m=e[f[g]])&&(m=m.element)){if(false===d.call(h,m,g)){break}}}}else{for(g=0;g<c;g++){if((m=e[f[g]])&&(m=m.element)){if(false===d.call(h,m,g)){break}}}}m=null;return h},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"xui(['"+c.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(f,g){var e,d,c=xui.$cache.profileMap;if(typeof f=="string"){return this.each(function(h){if((d=h.id)!==f){if(!g&&(e=c[d])){c[f]=e;delete c[d]}h.id=f}})}else{return this.get(0)&&this.get(0).id}},$sum:function(d,e){var c=[],g,f;this.each(function(h){g=d.apply(h,e||[]);if(g){if(_.isArr(g)){for(f=0;h=g[f];f++){c[c.length]=h}}else{c[c.length]=g}}});return xui(c)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var h=this.cloneNode(c?true:false),e=h.getElementsByTagName("*"),g=xui.browser.ie&&xui.browser.ver<9,d=0,f;if(g){h.removeAttribute("$xid")}else{delete h.$xid}for(;f=e[d];d++){if(g){f.removeAttribute("$xid")}else{delete f.$xid}}return h},arguments)},$iterator:function(e,d,g,c,f){return this.$sum(function(r,k,v,s,u){var x=arguments.callee;if(typeof s!="function"){var l=s||0;s=function(y,m){return m==l}}var p=0,j,h=this,q=0,w;while(h){if(h.nodeType==1){if(s(h,p++)===true){break}}if(r=="x"){h=k?h.nextSibling:h.previousSibling}else{if(r=="y"){h=k?x.call(k===1?h.lastChild:h.firstChild,"x",(k!==1),true,0,u):h.parentNode}else{v=_.isBool(v)?v:true;j=null;h=k?(w=v&&h.firstChild)?w:(w=h.nextSibling)?w:(j=h.parentNode):(w=v&&h.lastChild)?w:(w=h.previousSibling)?w:(j=h.parentNode);if(j){while(!(j=k?h.nextSibling:h.previousSibling)){h=h.parentNode;if(!h){if(q){return null}else{q=true;j=k?document.body.firstChild:document.body.lastChild;break}}}h=j}v=true}}}return h},arguments)},query:function(d,n,m){d=d||"*";var k="getElementsByTagName",l=arguments.callee,j=l.f1||(l.f1=function(q,p,u){var s=this[k](q),f=[];if(u.test(this[p])){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(u.test(v[p])){f[f.length]=v}}return f}),h=l.f2||(l.f2=function(q,p,u){var s=this[k](q),f=[];if(this[p]==u){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(v[p]==u){f[f.length]=v}}return f}),g=l.f3||(l.f3=function(q,p,u){var s=this[k](q),f=[];if(this[p]){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(v[p]){f[f.length]=v}}return f}),e=l.f4||(l.f4=function(f){return _.toArr(this[k](f))}),c=l.f5||(l.f5=function(q,p){var s=this[k](q),f=[];if(p(this)){f[f.length]=this}for(var u,r=0;u=s[r];r++){if(p(u)){f[f.length]=u}}return f});return this.$sum(n?typeof n=="function"?c:m?_.isReg(m)?j:h:g:e,[d,n,m])},querySelector:function(c){return this.$sum(function(){return _.toArr(this.querySelector(c))})},querySelectorAll:function(c){return this.$sum(function(){return _.toArr(this.querySelectorAll(c))})},$add:function(r,n,k){if(_.isHash(n)||_.isStr(n)){n=xui.create(n)}if(k){k=xui(n);n=this}else{n=xui(n);k=this}if(n._nodes.length){var m=k.get(0),s=n.get(),g=xui.Dom,c=xui.$cache.profileMap,q,w,d,h,e,f,u,w,l=[];n.each(function(j){w=(d=j.id)&&(d=c[d])&&d.LayoutTrigger&&(m===xui("body").get(0)||g.getStyle(m,"display")!="none")&&d.LayoutTrigger;if(w){l.push([w,d])}});if(s.length==1){q=s[0]}else{q=document.createDocumentFragment();for(h=0;e=s[h];h++){q.appendChild(e)}}r.call(m,q);for(h=0;e=l[h];h++){for(f=0;u=e[0][f];f++){u.call(e[1])}if(e[1].onLayout){e[1].boxing().onLayout(e[1])}}l.length=0;m=e=q=null}return this},prepend:function(c,d){return this.$add(function(e){if(this.previousSibling!=e){if(this.firstChild){this.insertBefore(e,this.firstChild)}else{this.appendChild(e)}}},c,d)},append:function(d,e,c){return this.$add(function(f){if(c||this!=f.parentNode){this.appendChild(f)}},d,e)},addPrev:function(c,d){return this.$add(function(e){if(this.firstChild!=e){this.parentNode.insertBefore(e,this)}},c,d)},addNext:function(c,d){return this.$add(function(e){if(this.nextSibling!=e){if(this.nextSibling){this.parentNode.insertBefore(e,this.nextSibling)}else{this.parentNode.appendChild(e)}}},c,d)},replace:function(j,h){if(_.isHash(j)||_.isStr(j)){j=xui.create(j)}j=xui(j);var e,f,k=this.get(0),g=j.get(),d=g.length;if(d>0&&(e=g[d-1])){k.parentNode.replaceChild(e,k);for(f=0;f<d-1;f++){e.parentNode.insertBefore(g[f],e)}if(h){this.remove()}}k=e=null;return j},swap:function(e){var c=this,d=xui.Dom.getEmptyDiv().html("*",false);if(_.isHash(e)||_.isStr(e)){e=xui.create(e)}e=xui(e);c.replace(d,false);e.replace(c,false);d.replace(e,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(e,d){if(e===false){this.each(function(f,c){if(f.raphael&&f.remove){f.remove()}else{if(f.parentNode){f.parentNode.removeChild(f)}}})}else{var h=xui.$getGhostDiv();this.each(function(c){h.appendChild(c)});var g=function(){xui.$purgeChildren(h);h.innerHTML="";h=null};if(d){g()}else{_.asyRun(g)}}return this},empty:function(c){return this.each(function(d){xui([d]).html("",c)})},html:function(u,e,p,h){var x="",w,k=this.get(0);e=e!==false;if(u!==undefined){if(k){if(k.nodeType==3){k.nodeValue=u}else{if(!k.firstChild&&u===""){return this}if(e){var v=xui.$getGhostDiv();xui(k).children().each(function(c){v.appendChild(c)});var q=function(){xui.$purgeChildren(v);v.innerHTML="";v=null};if(h){q()}else{_.asyRun(q)}}var n;if(p){var m=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,l=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,j=/\ssrc=([\'\"])(.*?)\1/i,g,r,d;n=[];while((g=m.exec(u))){r=g[1];d=r?r.match(j):false;if(d&&d[2]){n.push([1,d[2]])}else{if(g[2]&&g[2].length>0){n.push([2,g[2]])}}}u=u.replace(l,"")}k.innerHTML=u;if(n&&n.length>0){_.arr.each(n,function(c){if(c[0]==1){xui.include(null,c[1])}else{_.exec(c[1])}})}}k=null}return this}else{if(k){x=(k.nodeType==3)?k.nodeValue:k.innerHTML;k=null}return x}},loadHtml:function(e,c,d){var f=this;if(typeof e=="string"){e={url:e}}_.tryF(c);xui.Ajax(e.url,e.query,function(g){var h=xui.create("div");h.html(g,false,true);f.append(h.children());_.tryF(d)},function(g){f.append("<div>"+g+"</div>");_.tryF(d)},null,e.options).start()},loadIframe:function(c,g){if(typeof c=="string"){c={url:c}}var j=g||("aiframe_"+_()),d;if(d=xui.Dom.byId(g)){xui(d).remove()}var f=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(f?"<iframe name='"+j+"'>":"iframe");h.id=h.name=j;h.src=c.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";this.append(h);xui.Dom.submit(c.url,c.query,c.method,h.name,c.enctype)},outerHTML:function(h,c){var k=this,j,l="",e=k.get(0),d=e.id;if(h!==undefined){var f=k.replace(_.str.toDom(h),false);k._nodes[0]=f._nodes[0];xui([e]).remove(c);return k}else{if(xui.browser.gek){var g=xui.$getGhostDiv();g.appendChild(k.get(0).cloneNode(true));l=g.innerHTML;g.innerHTML="";g=null}else{l=e.outerHTML}e=null;return l}},text:function(e){if(e!==undefined){var d=this,c=[];d.each(function(g){var f=g.firstChild;if(f&&f.nodeType!=1){f.nodeValue=e}else{c[c.length]=g}});if(c.length){xui(c).empty().each(function(f){f.appendChild(document.createTextNode(e))})}return d}else{return(function(f){if(!f){return""}return f.textContent||f.innerText})(this.get(0))}},attr:function(d,l){var n=this,k=arguments.callee,h=k.map1||(k.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),g=k.map2||(k.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var f in d){k.call(n,f,d[f])}return n}var m=xui.browser.ie&&d=="style",j=!g[d=h[d]||d];if(l!==undefined){return n.each(function(q){if(l===null){if(m){q.style.cssText=""}else{if(j){try{q[d]=null;if(q.nodeType==1){q.removeAttribute(d)}}catch(p){}}}}else{l=d=="style"?(l+"").replace(/[;]+/g,";").replace(/^;/,""):l;if(m){q.style.cssText=""+l}else{if(j){q[d]=l;if(q.nodeType==1&&d!="value"&&typeof l=="string"){q.setAttribute(d,l)}}else{q.setAttribute(d,l)}}}})}else{var c,e=n.get(0);if(m){return e.style.cssText}if(d=="selected"&&xui.browser.kde){return e.parentNode.selectedIndex}c=((d in e)&&j)?e[d]:e.getAttribute(d,xui.browser.ie&&!j?2:undefined);e=null;return d=="style"?c.replace(/[;]+/g,";").replace(/^;/,""):c}},$touchscroll:function(g){if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var h={x:1,y:1,xy:1},c=0,j=0,f=null,d=null,e=this._nodes;if(!h[g]){g=null}xui(e).onTouchstart(h[g]?function(n,m,q){if(xui.DragDrop._profile.isWorking){return true}if(m.touches.length>1){return true}var l=m.touches[0],k=xui(q).get(0);if(k){if(g=="xy"||g=="x"){c=l.pageX}if(g=="xy"||g=="y"){j=l.pageY}}return true}:null);xui(e).onTouchmove(h[g]?function(r,q,v){if(xui.DragDrop._profile.isWorking){return true}if(q.touches.length>1){return true}var n=q.touches[0],l=xui(v).get(0),k,m,u;if(l){k=l.scrollLeft;m=l.scrollTop;if(g=="xy"||g=="x"){if(f===null){u=1;f=l.scrollLeft+n.pageX+(c==n.pageX?0:c>n.pageX?1:-1)*10}l.scrollLeft=f-n.pageX}if(g=="xy"||g=="y"){if(d===null){u=1;d=l.scrollTop+n.pageY+(j==n.pageY?0:j>n.pageY?1:-1)*10}l.scrollTop=d-n.pageY}return(!u)&&k==l.scrollLeft&&m==l.scrollTop}}:null);xui(e).onTouchend(h[g]?function(l,k,m){if(xui.DragDrop._profile.isWorking){return true}if(k.touches.length>1){return true}f=d=null}:null)}return this},isScrollBarShowed:function(c){c=c=="x"?"scrollLeft":"scrollTop";if(this[c]()!==0){return true}this[c](1);if(this[c]()===0){return false}this[c](0);return true},scrollIntoView:function(){if(this.get(0)){this.get(0).scrollIntoView()}return this},css:function(c,d){if(typeof c=="object"||d!==undefined){this.each(function(e){xui.Dom.setStyle(e,c,d)});if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){if(c=="overflow"||c=="overflow-x"||c=="overflow-y"){if(d=="auto"||d=="scroll"){this.$touchscroll(c=="overflow"?"xy":c=="overflow-x"?"x":"y")}else{this.$touchscroll(null)}}}return this}else{return xui.Dom.getStyle(this.get(0),c)}},rotate:function(d){if(_.isSet(d)){d=parseInt(d,10)||0;d=d%360;if(d<0){d=d+360}return this.each(function(j){if(j.raphael&&j.id){var h=xui.Event._getProfile(j.id);if((h=h&&h.parent&&h.parent._paper)&&(j=h.getById(j.raphaelid))){j.transform("r"+d)}}else{d+="deg";var g=j.style.transform||"";if(/rotate\([^)]*\)/i.test(g)){g=g.replace(/(rotate\()([^)]+)/i,"$1"+d)}else{g+=" rotate("+d+")"}xui.Dom.setStyle(j,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){f=f.transform();if(_.isArr(f)){if(!f.length){f=""}else{f=f.join()}}else{if(!f){f=""}else{f=Raphael.parseTransformString(f).join()}}var c=/r,([-\d.]+)/i.exec(f);d=c?parseFloat(c[1]||0):0;d=d%360;if(d<0){d=d+360}return d}return 0}else{var c=/rotate\(([-\d.]+)/i.exec(f.style.transform);return c?parseFloat(c[1]||0):0}}},scaleX:function(d){if(_.isSet(d)){return this.each(function(k){if(k.raphael&&k.id){d=parseFloat(d);var j=xui.Event._getProfile(k.id),h;if((j=j&&j.parent&&j.parent._paper)&&(k=j.getById(k.raphaelid))){h=_.clone(Raphael.parseTransformString(k.transform()),true);if(h&&h[0]&&h[0][0]=="s"){h[0][1]=d}else{h=h||[];h.unshift(["s",d,1])}k.transform(h)}}else{var g=k.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(g)){g=g.replace(/(scale\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{if(/scale\([-\d.]*\)/i.test(g)){g=g.replace(/scale\([-\d.]*\)/i,"scale("+d+",1)")}else{g+=" scale("+d+",1)"}}xui.Dom.setStyle(k,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=1;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){_.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="s"){d*=g[1]}})}return d}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[2]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}}},scaleY:function(d){if(_.isSet(d)){return this.each(function(k){if(k.raphael&&k.id){d=parseFloat(d);var j=xui.Event._getProfile(k.id),h;if((j=j&&j.parent&&j.parent._paper)&&(k=j.getById(k.raphaelid))){h=_.clone(Raphael.parseTransformString(k.transform()),true);if(h&&h[0]&&h[0][0]=="s"){h[0][2]=d}else{h=h||[];h.unshift(["s",1,d])}k.transform(h)}}else{var g=k.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(g)){g=g.replace(/(scale\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{if(/scale\([-\d.]*\)/i.test(g)){g=g.replace(/scale\([-\d.]*\)/i,"scale(1,"+d+")")}else{g+=" scale(1,"+d+")"}}xui.Dom.setStyle(k,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=1;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){_.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="s"){d*=g[2]}})}return d}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[3]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}}},translateX:function(d){if(_.isSet(d)){return this.each(function(k){if(k.raphael&&k.id){d=parseFloat(d);var j=xui.Event._getProfile(k.id),h;if((j=j&&j.parent&&j.parent._paper)&&(k=j.getById(k.raphaelid))){h=_.clone(Raphael.parseTransformString(k.transform()),true);if(h&&h.length&&h[h.length-1]&&(h[h.length-1][0]=="t")){h[h.length-1][1]=d}else{h=h||[];h.push(["t",d,0])}k.transform(h)}}else{if(_.isFinite(d)){d+="px"}var g=k.style.transform||"";if(/translate\([^)]*\)/i.test(g)){g=g.replace(/(translate\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{g+=" translate("+d+",0)"}xui.Dom.setStyle(k,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=0;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){_.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="t"){d+=g[1]}})}return d}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[2]||"").replace(/\s/g,""):""}}},translateY:function(d){if(_.isSet(d)){return this.each(function(j){if(j.raphael&&j.id){d=parseFloat(d);var h=xui.Event._getProfile(j.id);if((h=h&&h.parent&&h.parent._paper)&&(j=h.getById(j.raphaelid))){t=_.clone(Raphael.parseTransformString(j.transform()),true);if(t&&t.length&&t[t.length-1]&&(t[t.length-1][0]=="t")){t[t.length-1][2]=d}else{t=t||[];t.push(["t",0,d])}j.transform(t)}}else{if(_.isFinite(d)){d+="px"}var g=j.style.transform||"";if(/translate\([^)]*\)/i.test(g)){g=g.replace(/(translate\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{g+=" translate(0,"+d+")"}xui.Dom.setStyle(j,"transform",g)}})}else{var f=this.get(0);if(f.raphael&&f.id){d=0;var e=xui.Event._getProfile(f.id);if((e=e&&e.parent&&e.parent._paper)&&(f=e.getById(f.raphaelid))){_.arr.each(Raphael.parseTransformString(f.transform()),function(g){if(g[0]=="t"){d+=g[2]}})}return d}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[3]||"").replace(/\s/g,""):""}}},skewX:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="deg"}return this.each(function(f){var e=f.style.transform||"";if(/skew\([^)]*\)/i.test(e)){e=e.replace(/(skew\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{e+=" skew("+d+",0deg)"}xui.Dom.setStyle(f,"transform",e)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[2]||0):0}},skewY:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="deg"}return this.each(function(f){var e=f.style.transform||"";if(/skew\([^)]*\)/i.test(e)){e=e.replace(/(skew\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{e+=" skew(0deg,"+d+")"}xui.Dom.setStyle(f,"transform",e)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[3]||0):0}},caret:function(g,n){var x=this.get(0),z=x.nodeName.toLowerCase(),u=typeof g,f=xui.browser.ie,w;if(!/^(input|textarea)$/i.test(z)){return}if(z=="input"&&x.type.toLowerCase()!="text"&&x.type.toLowerCase()!="password"){return}x.focus();if(u=="number"){if(f){var c=x.createTextRange();c.collapse(true);c.moveEnd("character",n);c.moveStart("character",g);c.select()}else{x.focus();x.setSelectionRange(g,n)}return this}else{if(u=="string"){var c=this.caret(),k=0,j=0,s,y=x.value,h=/\r/g;if(f){k=y.substr(0,c[0]).match(h);k=(k&&k.length)||0;j=g.match(h);j=(j&&j.length)||0}if(xui.browser.opr){k=g.match(/\n/g);k=(k&&k.length)||0;j=g.match(/\r\n/g);j=(j&&j.length)||0;j=k-j;k=0}x.value=y.substr(0,c[0])+g+y.substr(c[1],y.length);s=c[0]-k+j+g.length;this.caret(s,s);return s}else{if(f&&document.selection){var c=document.selection.createRange(),p=c.text,k=p.length,q,j;if(z.toLowerCase()=="input"){c.moveStart("character",-x.value.length);q=c.text.length;return[q-k,q]}else{var d=c.duplicate();d.moveToElementText(x);d.setEndPoint("EndToEnd",c);q=d.text.length;return[q-k,q]}}else{return[x.selectionStart,x.selectionEnd]}}}},show:function(d,f,j,l,e){var c,k,h=xui.Dom.HIDE_VALUE,g;return this.each(function(n){if(n.nodeType!=1){return}var m=xui.getNodeData(n,"_inthread");if(m){xui.Thread(m).abort("force");xui.setNodeData(n,"_inthread")}c=n.style;g=xui.getNodeData(n);if(g._xuihide){if(k=g._left){if(c.left!=k){c.left=k}}if(k=g._top){if(c.top!=k){c.top=k}}if(k=g._position){if(c.position!=k){c.position=k}}if(c.visibility!="visible"){c.visibility="visible"}g._xuihide=0}if(_.isSet(d)){c.left=d}if(_.isSet(f)){c.top=f}l=e?null:l?l:_.get(xui.UIProfile.getFromDom(n),["properties","showEffects"]);if(l){l=xui.Dom._getEffects(l,1)}if(l){xui.Dom._vAnimate(n,true,l,j)}else{if(j){j()}}})},hide:function(g,f,c){var d,e;return this.each(function(k){if(k.nodeType!=1){return}var j=xui.getNodeData(k,"_inthread");if(j){xui.Thread(j).abort("force");xui.setNodeData(k,"_inthread")}d=k.style;e=xui.getNodeData(k);var h=function(){if(e._xuihide!==1){e._position=d.position;e._visibility=d.visibility;e._top=d.top;e._left=d.left;e._xuihide=1}if(d.position!="absolute"){d.position="absolute"}d.visibility="hidden";d.top=d.left=xui.Dom.HIDE_VALUE;if(g){g()}};f=c?null:f?f:_.get(xui.UIProfile.getFromDom(k),["properties","hideEffects"]);if(f){f=xui.Dom._getEffects(f,0)}if(f){xui.Dom._vAnimate(k,false,f,h)}else{h()}})},cssRegion:function(r,s){var w=this;if(typeof r=="object"){var l,v,e,d=w.get(0),k=xui.Dom,n=k._setPxStyle,e={};for(var h=0,p=k._boxArr;l=p[h++];){e[l]=((l in r)&&r[l]!==null)?n(d,l,r[l]):false}if(s){var n=k.$hasEventHandler;if(n(d,"onsize")&&(e.width||e.height)){w.onSize(true,{width:e.width,height:e.height})}if(n(d,"onmove")&&(e.left||e.top)){w.onMove(true,{left:e.left,top:e.top})}}return w}else{var g=r,u=s,q=g?w.offset(null,u):w.cssPos(),x=w.cssSize();return{left:q.left,top:q.top,width:x.width,height:x.height}}},cssSize:function(n,j){var m=this,d=m.get(0),c,e=xui.Dom,g=e._setPxStyle,k,h;if(n){var l;k=n.width!==null?g(d,"width",n.width):false;h=n.height!==null?g(d,"height",n.height):false;if(j&&(k||h)&&e.$hasEventHandler(d,"onsize")){m.onSize(true,{width:k,height:h})}c=m}else{c={width:m._W(d,1)||0,height:m._H(d,1)}}return c},cssPos:function(h,k){var d=this.get(0),e=xui.Dom,g=e._setPxStyle,l,j,c;if(h){var m;l=h.left!=null?g(d,"left",h.left):false;j=h.top!==null?g(d,"top",h.top):false;if(k&&(l||j)&&e.$hasEventHandler(d,"onmove")){this.onMove(true,{left:l,top:j})}c=this}else{g=e.getStyle;c={left:parseInt(g(d,"left"),10)||0,top:parseInt(g(d,"top"),10)||0}}d=null;return c},offset:function(h,u){var n,l,z=xui.browser,D=this,q=D.get(0),w=q,k=q.parentNode,j=q.offsetParent,C=q.ownerDocument,y=C.documentElement,A=C.body,e=/^inline|table.*$/i,g=xui.Dom.getStyle,f=g(q,"position")=="fixed",B=arguments.callee,m=B.add||(B.add=function(E,d,r){E.left+=parseInt(d,10)||0;E.top+=parseInt(r,10)||0}),s=B.border||(B.border=function(d,r){m(r,g(d,"borderLeftWidth"),g(d,"borderTopWidth"))}),p=B.TTAG||(B.TTAG={TABLE:1,TD:1,TH:1}),v=B.HTAG||(B.HTAG={BODY:1,HTML:1}),c=B.posDiff||(B.posDiff=function(F,E){var r=F.cssPos(),d=F.offset(null,E);return{left:d.left-r.left,top:d.top-r.top}});u=u?xui(u).get(0):C;if(h){if(h.left===null&&h.top===null){return D}var x=c(D,u);D.cssPos({left:h.left===null?null:(h.left-x.left),top:h.top===null?null:(h.top-x.top)});n=D}else{if(!(xui.browser.gek&&q===document.body)&&q.getBoundingClientRect){l=q.getBoundingClientRect();h={left:l.left,top:l.top};if(u.nodeType==1&&u!==document.body){m(h,-(l=u.getBoundingClientRect()).left+u.scrollLeft,-l.top+u.scrollTop)}else{m(h,(y.scrollLeft||A.scrollLeft||0)-y.clientLeft,(y.scrollTop||A.scrollTop||0)-y.clientTop)}}else{h={left:0,top:0};m(h,q.offsetLeft,q.offsetTop);while(j&&j!=u&&j!=u.offsetParent){m(h,j.offsetLeft,j.offsetTop);if(z.kde||(z.gek&&!p[j.nodeName])){s(j,h)}if(!f&&g(j,"position")=="fixed"){f=true}if(j.nodeName!="BODY"){w=j.nodeName=="BODY"?w:j}j=j.offsetParent}while(k&&k.nodeName&&k!=u&&!v[k.nodeName]){if(!e.test(g(k,"display"))){m(h,-k.scrollLeft,-k.scrollTop)}if(z.gek&&g(k,"overflow")!="visible"){s(k,h)}k=k.parentNode}if((z.gek&&g(w,"position")!="absolute")){m(h,-A.offsetLeft,-A.offsetTop)}if(f){m(h,y.scrollLeft||A.scrollLeft||0,y.scrollTop||A.scrollTop||0)}}n=h}return n},hasClass:function(f){var g,e,d=_.isReg(f),c=xui.Dom._getClass(this.get(0)).split(/\s+/);if(d){for(g=0,e=c.length;g<e;g++){if(f.test(c[g])){return true}}}else{return _.arr.indexOf(c,f+"")!=-1}return false},addClass:function(c){var g,f,e,j=arguments.callee,d=(j.reg||(j.reg=/\s+/)),m,k,h=(c+"").split(d);if(!h.length){return this}return this.each(function(l){k=0;g=xui.Dom._getClass(l).split(d);m=[];for(f=0,e=g.length;f<e;f++){if(g[f]){m.push(g[f])}}for(f=0,e=h.length;f<e;f++){if(h[f]&&_.arr.indexOf(g,h[f])==-1){k=1;m.push(h[f])}}if(k){xui.Dom._setClass(l,m.join(" "))}})},removeClass:function(c){var h,g,f,d=_.isReg(c),k=arguments.callee,e=(k.reg||(k.reg=/\s+/)),m,j;if(!d){j=(c+"").split(e);if(!j.length){return this}}return this.each(function(l){m=0;h=xui.Dom._getClass(l).split(e);if(!d){for(g=0,f=j.length;g<f;g++){if(_.arr.indexOf(h,j[g])!=-1){m=1;_.arr.removeValue(h,j[g])}}}else{_.filter(h,function(p,n){if(c.test(p)){m=1;return false}})}if(m){xui.Dom._setClass(l,h.join(" "))}})},replaceClass:function(e,c){var f,d;return this.each(function(g){d=(f=xui.Dom._getClass(g)).replace(e,c);if(f!=d){xui.Dom._setClass(g,d)}})},tagClass:function(c,g){var f=this,h=arguments.callee,e=h["_r1_"+c]||(h["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=h._r2||(h._r2=/([-\w]+)/g);f.removeClass(e);return(false===g)?f:f.replaceClass(d,"$1 $1"+c)},$addEventHandler:function(c){var f=xui.Event,e,d=f.$eventhandler;return this.each(function(g){if(g.nodeType==3){return}xui.setNodeData(g,["eHandlers","on"+f._eventMap[c]],d);if(e=f._eventHandler[c]){g[e]=d;xui.setNodeData(g,["eHandlers",e],d);if(xui.browser.isTouch&&e=="onmousedown"){xui.setNodeData(g,["eHandlers","onxuitouchdown"],d);if(g.addEventListener){g.addEventListener("xuitouchdown",d,false)}else{if(g.attachEvent){g.attachEvent("xuitouchdown",d)}}}}})},$removeEventHandler:function(c){var f=xui.Event,e=f.$eventhandler,d;return this.each(function(g){if(d=f._eventHandler[c]){g[d]=null;if(xui.browser.isTouch&&d=="onmousedown"){if(g.removeEventListener){g.removeEventListener("xuitouchdown",e,false)}else{if(g.detachEvent){g.detachEvent("xuitouchdown",e)}}}}if(g=xui.getNodeData(g,"eHandlers")){d="on"+f._eventMap[c];delete g[d];if(xui.browser.isTouch&&d=="onmousedown"){delete g.onxuitouchdown}}})},$addEvent:function(e,l,n,j){var r=this,d=xui.Event,h=_.arr.removeValue,p=_.arr.insertAny,f,k,q,g;if(!j&&j!==0){j=-1}if(typeof n=="string"){n="$"+n}else{n=undefined}r.$addEventHandler(e).each(function(c){if(c.nodeType==3){return}if(!(f=d.getId(c))&&c!==window&&c!==document){f=c.id=xui.Dom._pickDomId()}if(!(k=xui.$cache.profileMap[f])){k=new xui.DomProfile(f)}q=k.events||(k.events={});g=q[e]||(q[e]=[]);if(n===undefined){g.length=0;g=q[e]=[];j=-1;n="_"}g[n]=l;h(g,n);if(j==-1){g[g.length]=n}else{p(g,n,j)}if(xui.Event&&(k=xui.Event._getProfile(f))&&k.clearCache){k.clearCache()}});return r},$removeEvent:function(e,p,g){var r=this,n,q,h,f,l,m,d=xui.Event,j=xui.$cache.profileMap,m=d._eventMap[e];r.each(function(c){if(!(f=d.getId(c))){return}if(!(n=j[f])){return}if(!(q=n.events)){return}if(g){_.arr.each(d._getEventName(m),function(k){delete q[k]})}else{if(typeof p=="string"){p="$"+p;if(h=q[e]){if(_.arr.indexOf(h,p)!=-1){_.arr.removeValue(h,p)}delete h[p]}}else{delete q[e]}}if(xui.Event&&(n=xui.Event._getProfile(f))&&n.clearCache){n.clearCache()}});return r},$getEvent:function(e,d){var g;if(!(g=xui.Event.getId(this.get(0)))){return}if(d){return _.get(xui.$cache.profileMap,[g,"events",e,"$"+d])}else{var f=[],c=_.get(xui.$cache.profileMap,[g,"events",e]);_.arr.each(c,function(j,h){f[f.length]={o:c[j]}});return f}},$clearEvent:function(){return this.each(function(d,c){if(!(c=xui.Event.getId(d))){return}if(!(c=xui.$cache.profileMap[c])){return}_.breakO(c.events,2);delete c.events;_.arr.each(xui.Event._events,function(e){if(d["on"+e]){d["on"+e]=null}})})},$fireEvent:function(c,j){var l=xui.Event._eventMap[c],n,p="on"+l,m,g,k=arguments.callee,h=xui.Event.$eventhandler,e=k.f1||(k.f1=function(){this.returnValue=false}),d=k.f2||(k.f2=function(){this.cancelBubble=true});return this.each(function(q){if(!(m=xui.getNodeData(q,["eHandlers",p]))){return}if("blur"==l||"focus"==l){try{q[l]()}catch(f){}}else{g=_.copy(j);_.merge(g,{type:l,target:q,button:1,$xuievent:true,$xuitype:c,preventDefault:e,stopPropagation:d},"all");m.call(q,g)}})},nativeEvent:function(c){return this.each(function(f){if(f.nodeType===3||f.nodeType===8){return}try{f[c]()}catch(d){}})},$canFocus:function(){var f=arguments.callee,c=xui.Dom.getStyle,g=f.map||(f.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,e;return !!((e=this.get(0))&&e.focus&&(((d=g[e.nodeName.toLowerCase()])&&!(parseInt(e.tabIndex,10)<=-1))||(!d&&parseInt(e.tabIndex,10)>=(xui.browser.ie?1:0)))&&c(e,"display")!="none"&&c(e,"visibility")!="hidden"&&e.offsetWidth>0&&e.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(e){var d=arguments.callee,c;this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable");this.addClass(e?"xui-ui-selectable":"xui-ui-unselectable");return this.each(function(f){if(xui.browser.ie&&xui.browser.ver<10){xui.setNodeData(f,"_onxuisel",e?"true":"false")}})},setInlineBlock:function(){var c=this;if(xui.browser.gek){if(xui.browser.ver<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(xui.browser.ie6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var g=1000,e=0,d,h=this.get(0),l=h.offsetParent,f,m;if(xui.browser.ie&&(!l||(l.nodeName+"").toUpperCase()=="HTML")){l=xui("body").get(0)}if(h.nodeType!=1||!l){return 1}f=l.childNodes;for(d=0;m=f[d];d++){if(m==h||m.nodeType!=1||!m.$xid||m.style.display=="none"||m.style.visibility=="hidden"||m.zIndexIgnore||xui.getNodeData(m,"zIndexIgnore")){continue}e=parseInt(m.style&&m.style.zIndex,10)||0;g=g>e?g:e}g++;if(g>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=g+1}if(c){h.style.zIndex=g}else{e=parseInt(h.style.zIndex,10)||0;return g>e?g:e}return this},nextFocus:function(f,e,d,h){f=_.isBool(f)?f:true;var c=this.get(0),g=this.$iterator("",f,e,function(j){return j!==c&&(!h||(j.id&&h.test(j.id)))&&xui([j]).$canFocus()});if(!g.isEmpty()&&d!==false){g.focus()}c=null;return g},animate:function(v,u,j,c,g,e,k,m,A,l,d){var z=arguments.callee,f=xui.Dom.$AnimateEffects||(xui.Dom.$AnimateEffects={linear:function(B,C){return(1/B)*C},sineIn:function(B,C){return -1*Math.cos(C/B*(Math.PI/2))+1},sineOut:function(B,C){return Math.sin(C/B*(Math.PI/2))},sineInOut:function(B,C){return -1/2*(Math.cos(Math.PI*C/B)-1)},quadIn:function(B,C){return(C/=B)*C},quadOut:function(B,C){return -1*(C/=B)*(C-2)},quadInOut:function(B,C){if((C/=B/2)<1){return 1/2*C*C}return -1/2*((--C)*(C-2)-1)},cubicIn:function(B,C){return(C/=B)*C*C},cubicOut:function(B,C){return((C=C/B-1)*C*C+1)},cubicInOut:function(B,C){if((C/=B/2)<1){return 1/2*C*C*C}return 1/2*((C-=2)*C*C+2)},quartIn:function(B,C){return(C/=B)*C*C*C},quartOut:function(B,C){return -1*((C=C/B-1)*C*C*C-1)},quartInOut:function(B,C){if((C/=B/2)<1){return 1/2*C*C*C*C}return -1/2*((C-=2)*C*C*C-2)},quintIn:function(B,C){return(C/=B)*C*C*C*C},quintOut:function(B,C){return((C=C/B-1)*C*C*C*C+1)},quintInOut:function(B,C){if((C/=B/2)<1){return 1/2*C*C*C*C*C}return 1/2*((C-=2)*C*C*C*C+2)},expoIn:function(B,C){return(C==0)?0:Math.pow(2,10*(C/B-1))},expoOut:function(B,C){return(C==B)?1:(-Math.pow(2,-10*C/B)+1)},expoInOut:function(B,C){if(C==0){return 0}if(C==B){return 1}if((C/=B/2)<1){return 1/2*Math.pow(2,10*(C-1))}return 1/2*(-Math.pow(2,-10*--C)+2)},circIn:function(B,C){return -1*(Math.sqrt(1-(C/=B)*C)-1)},circOut:function(B,C){return Math.sqrt(1-(C=C/B-1)*C)},circInOut:function(B,C){if((C/=B/2)<1){return -1/2*(Math.sqrt(1-C*C)-1)}return 1/2*(Math.sqrt(1-(C-=2)*C)+1)},bounceIn:function(B,C){return 1-f.bounceOut(B,B-C)},bounceOut:function(C,D){var B=7.5625;if((D/=C)<(1/2.75)){return(B*D*D)}else{if(D<(2/2.75)){return(B*(D-=(1.5/2.75))*D+0.75)}else{if(D<(2.5/2.75)){return(B*(D-=(2.25/2.75))*D+0.9375)}else{return(B*(D-=(2.625/2.75))*D+0.984375)}}}},bounceInOut:function(B,C){if(C<B/2){return f.bounceIn(B,C*2)*0.5}else{return f.bounceOut(B,C*2-B)*0.5+1*0.5}},backIn:function(C,D){var B=1.70158;return(D/=C)*D*((B+1)*D-B)},backOut:function(C,D){var B=1.70158;return((D=D/C-1)*D*((B+1)*D+B)+1)},backInOut:function(C,D){var B=1.70158;if((D/=C/2)<1){return 1/2*(D*D*(((B*=(1.525))+1)*D-B))}return 1/2*((D-=2)*D*(((B*=(1.525))+1)*D+B)+2)},elasticIn:function(D,G,E,B,F){if(G==0){return 0}if((G/=D)==1){return 1}if(!F){F=D*0.3}if(!B||B<1){B=1;var C=F/4}else{var C=F/(2*Math.PI)*Math.asin(1/B)}return -(B*Math.pow(2,10*(G-=1))*Math.sin((G*D-C)*(2*Math.PI)/F))},elasticOut:function(D,G,E,B,F){if(G==0){return 0}if((G/=D)==1){return 1}if(!F){F=D*0.3}if(!B||B<1){B=1;var C=F/4}else{var C=F/(2*Math.PI)*Math.asin(1/B)}return(B*Math.pow(2,-10*G)*Math.sin((G*D-C)*(2*Math.PI)/F)+1)},elasticInOut:function(D,G,E,B,F){if(G==0){return 0}if((G/=D/2)==2){return 1}if(!F){F=D*(0.3*1.5)}if(!B||B<1){B=1;var C=F/4}else{var C=F/(2*Math.PI)*Math.asin(1/B)}if(G<1){return -0.5*(B*Math.pow(2,10*(G-=1))*Math.sin((G*D-C)*(2*Math.PI)/F))}return B*Math.pow(2,-10*(G-=1))*Math.sin((G*D-C)*(2*Math.PI)/F)*0.5+1}}),q=z.color||(z.color=function(H,G,C){if(typeof H!="string"||typeof G!="string"){return"#fff"}if(C<0){return H}if(C>1){return G}var D,B,F,E;D=function(I){return(I.charAt(0)!="#")?("#"+I):I};H=D(H);G=D(G);B=function(K,J,I){return parseInt(K.slice(J,I),16)||0};F=function(I){return{red:B(I,1,3),green:B(I,3,5),blue:B(I,5,7)}};H=F(H);G=F(G);E=function(M,L,J,K){var I=M[K]+Math.round(J*(L[K]-M[K]));return(I<16?"0":"")+I.toString(16)};return"#"+E(H,G,C,"red")+E(H,G,C,"green")+E(H,G,C,"blue")});if(!v){if(j){_.tryF(j)}return}var s=v;v=_.clone(v);if((g||0)>0){c=g*16}else{c=c||200}l=l||1;e=(e in f)?e:"circIn";var h,p=this.get(0),n=this,y=function(F){var G=_()-h,B,C,D,E;if(G>=c){G=c}_.each(v,function(I,H){D=I[0];E=I[1];C=I[2];B=f[e](c,G);if(typeof I=="function"){I.call(n,B)}else{if(_.str.endWith(H.toLowerCase(),"color")){B=q(D,E,B)}else{if(!_.isFinite(E)){C=E.replace(/[-\d.]*/,"");D=parseFloat(D);E=parseFloat(E)}B=(D+(E-D)*B).toFixed(5)}B+=C||m||"";(n[H])?(n[H](B)):(n.css(H,B))}});if(G==c){if(A&&!d){h=_();d=1;_.each(v,function(I,H){H=I[0];I[0]=I[1];I[1]=H})}else{if(l==-1||l>0){h=_();if(l>0){l-=1}if(d){d=0;_.each(v,function(I,H){H=I[0];I[0]=I[1];I[1]=H})}}}if(!l){xui.Thread(F).abort("normal")}return false}},x=[y];var r=xui.getNodeData(p,"_inthread");if(r&&xui.Thread.isAlive(r)){xui.Thread(r).abort("force");xui.setNodeData(p,"_inthread",null)}var w=xui.getNodeData(p,"_animationreset");if(typeof w=="function"){w();xui.setNodeData(p,"_animationreset",null)}return xui.Thread(k||_.id(),x,0,null,function(B){xui.setNodeData(p,"_inthread",B);h=_();xui.setNodeData(p,"_animationreset",function(){_.merge(v,s,"all");h=_();y()});return _.tryF(u,arguments,this)},function(C,B){if("force"!=B){_.tryF(j,arguments,this)}if(p&&p.$xid){xui.setNodeData(p,"_inthread",null);xui.setNodeData(p,"_animationreset",null)}},true)},pop:function(j,f,e,c,g){var d=this,h=_()+":"+d.xid();d.popToTop(j,f||"outer",e).setBlurTrigger(h,function(){if(typeof(c)=="function"){_.tryF(c)}else{d.hide()}});return h},popToTop:function(j,f,k,g,p,x){var e,y=this,n;k=xui(k);if(k.isEmpty()){k=xui("body")}y.css({position:"absolute",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE,display:"block",zIndex:xui.Dom.TOP_ZINDEX++});if(j["xui.UI"]||j["xui.UIProfile"]||j["xui.Dom"]||j.nodeType==1||typeof j=="string"){if(typeof(f)!="function"){f=(f||12)+""}var q=xui(j),s=q.offset(null,k);e={left:s.left,top:s.top,width:q.offsetWidth(),height:q.offsetHeight()}}else{if(typeof(f)!="function"){f=f?"3":"0"}n=f=="0"?0:8;e=j.region||{left:j.left-n,top:j.top-n,width:n*2,height:n*2}}j={left:0,top:0};var n=(k.get(0)===document.body||k.get(0)===document||k.get(0)===window)?xui.win:k,l={};y.cssPos(j).css({visibility:"hidden",display:"block"});k.append(y);l.left=n.scrollLeft();l.top=n.scrollTop();l.width=n.width()+l.left;l.height=n.height()+l.top;if(typeof(f)=="function"){j=f(e,l,y,n)}else{var m=y.offsetWidth(),u=y.offsetHeight(),d=f.split(/-/g);if(d.length==2){var c=d[0],v=d[1];switch(v){case"outertop":j.top=e.top-u;break;case"top":j.top=e.top;break;case"middle":j.top=e.top+e.height/2-u/2;break;case"bottom":j.top=e.top+e.height-u;break;default:j.top=e.top+e.height}switch(c){case"outerleft":j.left=e.left-m;break;case"left":j.left=e.left;break;case"center":j.left=e.left+e.width/2-m/2;break;case"right":j.left=e.left+e.width-m;break;default:j.left=e.left+e.width}}else{if(f=="outer"){f="12"}else{if(f=="inner"){f="4"}}var r=function(z){var w,h;switch(z){case"2":w=true;h=false;break;case"3":w=h=false;break;case"4":w=h=true;break;default:w=false;h=true}if(w){if(e.top+u<l.height){j.top=e.top}else{j.top=e.top+e.height-u}}else{if(e.top+e.height+u<l.height){j.top=e.top+e.height}else{j.top=e.top-u}}if(h){if(e.left+m<l.width){j.left=e.left}else{j.left=e.left+e.width-m}}else{if(e.left+e.width+m<l.width){j.left=e.left+e.width}else{j.left=e.left-m}}if(j.left+m>l.width){j.left=l.width-m}if(j.left<l.left){j.left=l.left}if(j.top+u>l.height){j.top=l.height-u}if(j.top<l.top){j.top=l.top}};if(f=="12"){r("1");if(j.top<e.top+e.height&&j.top+u>e.top){r("2")}}else{if(f=="21"){r("2");if(j.left<e.left+e.width&&j.left+m>e.left){r("1")}}else{r(f)}}}}y.cssPos(j).css({visibility:"visible"});p=x?null:p?p:_.get(xui.UIProfile.getFromDom(y),["properties","showEffects"]);if(p){p=xui.Dom._getEffects(p,1)}if(p){xui.Dom._vAnimate(y,true,p,g)}else{if(g){g()}}return this},hoverPop:function(d,g,f,m,j,e,l,h){d=xui(d);if(l){l=xui.Dom._getEffects(l,1)}if(h){h=xui.Dom._getEffects(h,0)}if(!_.isDefined(g)){g="outer"}var c=e||(this.xid()+":"+d.xid()),k=this;this.onMouseover(g===null?null:function(n,p,q){if(p.$force){return}_.resetRun(c,null);var r=xui.getData([c,"$ui.hover.pop"])&&xui.getNodeData(d.get(0)||"empty","$ui.hover.parent")==q;if(!r){xui.setData([c,"$ui.hover.pop"],1);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",q);if(!f||false!==f(n,d,p,q)){d.popToTop(q,g,j,l);d.onMouseover(function(){k.onMouseover(true)},"hoverPop").onMouseout(function(){k.onMouseout(true)},"hoverPop")}}},c).onMouseout(g===null?null:function(n,p,q){if(p.$force){return}_.resetRun(c,function(){xui.setData([c,"$ui.hover.pop"]);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",0);if(!m||false!==m(n,d,p,q,"host")){d.hide(null,h);d.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})},c);if(d){d.onMouseover(g===null?null:function(n){if(n.$force){return}_.resetRun(c,null)},c).onMouseout(g===null?null:function(n,p,q){if(p.$force){return}_.resetRun(c,function(){xui.setData([c,"$ui.hover.pop"]);xui.setNodeData(d.get(0)||"empty","$ui.hover.parent",0);if(!m||false!==m(n,d,p,q,"pop")){d.hide(null,h);d.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop")}})},c)}d.css("display","none");return this},setBlurTrigger:function(c,f,m,n,d){var k=this,l=document,e="$blur_triggers$",j=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(q,u){var q=xui.Event.getPos(u),s=arguments.callee.arr,C=xui.Event.getSrc(u),z=_.copy(s),y,x,A,r,B;_.arr.each(z,function(p){y=true;if(!(B=s[p].target)){y=false}else{B.each(function(v){if(v!==window&&v!==document&&!xui.Dom.byId(v.id)){return y=false}})}if(!y){_.arr.removeValue(s,p);delete s[p]}});z=_.copy(s);_.arr.each(z,function(v){B=s[v];if(!B){return}y=true;var p=function(){var w=B.target.get();while(C&&C.nodeName&&C.nodeName!="BODY"&&C.nodeName!="HTML"){if(_.arr.indexOf(w,C)!=-1){return true}C=C.parentNode}};if(!B.checkChild||p()){B.target.each(function(w){if(w.parentNode&&(A=w.offsetWidth)&&(r=w.offsetHeight)){x=xui([w]).offset();if(q.left>=x.left&&q.top>=x.top&&q.left<=(x.left+A)&&q.top<=(x.top+r)){return y=false}}})}p=null;if(!y&&!_.isFun(B.trigger)){return false}if(y){_.arr.removeValue(s,v);delete s[v];_.tryF(B.trigger,[q,u],B.target);B=null}else{if(B.stopNext){return false}}},null,true);C=null;z.length=0}),g=j.arr||(j.arr=[]),h;if(g[c]){if(f===true){_.tryF(g[c].trigger);f=false}_.arr.removeValue(g,c);delete g[c]}if(f){if(m){if(m["xui.Dom"]){h=m}else{if(_.isArr(m)){h=xui();h._nodes=m}}h.merge(k)}else{h=k}h.each(function(p){if(!p.id&&p!==window&&p!==document){p.id=xui.Dom._pickDomId()}});g[c]={trigger:f,target:h,checkChild:!!n,stopNext:!d};g.push(c);if(!l.onmousedown){l.onmousedown=xui.Event.$eventhandler}l=j=null}return this},$firfox2:function(){if(!xui.browser.gek2){return this}var c=this;c.css("overflow","hidden");_.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(xui.browser.ie6){var e=this.get(),c=[],g=[],d=e.length;for(var f=0;f<d;f++){if(!_.isSet(e[f].$ieRemedy)){if(_.isSet(e[f].style.width)){e[f].$ieRemedy=e[f].style.width;e[f].style.width=((parseFloat(e[f].$xuirem)||0)+1)+"px"}}}_.asyRun(function(){for(var h=0;h<d;h++){if(_.isSet(e[h].$ieRemedy)){e[h].style.width=e[h].$ieRemedy;e[h].removeAttribute("$ieRemedy")}}e.length=c.length=g.length=0})}return this}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="xui_"+_.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},fixPng:function(f){if(xui.browser.ie6){if(f.nodeName=="IMG"&&f.src.toLowerCase().search(/\.png$/)!=-1){f.style.height=f.height;f.style.width=f.width;f.style.backgroundImage="none";var d=((f.style.filter?(f.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+f.src+"', sizingMethod='image')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");if(xui.browser.ie8){f.style.msfilter=d}f.style.filter=d;f.src=xui.ini.img_bg}var e=f.currentStyle.backgroundImage||f.style.backgroundImage,c=(e||"").toLowerCase().match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(c){f.style.backgroundImage="none";var d=((f.style.filter?(f.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+c[1]+"', sizingMethod='crop')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");if(xui.browser.ie8){f.style.msfilter=d}f.style.filter=d}}},_getTag:function(c){return c?c.$xid?c.$xid:c.nodeType==1?xui.$registerNode(c).$xid:0:0},_ensureValues:function(h){var f,e,g=this._map,d=[],c=h===window?["!window"]:h===document?["!document"]:_.isArr(h)?h:(h=="[object NodeList]"||h=="[object HTMLCollection]")?_.toArr(h):h["xui.Dom"]?h._nodes:h._toDomElems?h._toDomElems():typeof h=="function"?h():[h];for(e=0;e<c.length;e++){if(f=!(f=c[e])?0:f===window?"!window":f===document?"!document":(typeof f=="string"||(f["xui.DomProfile"]&&(f=f.domId)))?f.charAt(0)=="!"?f:this._getTag(g[f]?document.getElementsByTagName(f)[0]:document.getElementById(f)):((f=c[e])["xui.UIProfile"]||f["xui.Template"])?f.renderId?f.renderId:(f.boxing().render()&&f.renderId):this._getTag(f)){d[d.length]=f}}return d.length<=1?d:this._unique(d)},_scrollBarSize:0,_getClass:function(c){return(typeof c.className=="string"&&c.className)||(typeof c.className.baseVal=="string"&&c.className.baseVal)||(typeof c.getAttribute!=="undefined"&&c.getAttribute("class"))||""},_setClass:function(d,c){if(typeof d.className=="string"){d.className=c}else{if(typeof d.className.baseVal=="string"){d.className.baseVal=c}else{if(typeof d.getAttribute!="undefined"){d.setAttribute(c)}}}},getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var e;xui("body").append(e=xui.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=e.get(0).offsetWidth-e.get(0).clientWidth;e.remove()}return c._scrollBarSize},getStyle:function(e,d){if(!e||e.nodeType!=1){return""}if(d=="rotate"){return xui(e).rotate()}var r=xui.Dom,m=xui.Dom._css3prop;var u,s;if(d=="opacity"&&(!r.css3Support("opacity"))&&xui.browser.ie){s=d="filter"}u=e.style[d];if(!u||u==="initial"){var q=arguments.callee,v,p=xui.browser,c=q.map||(q.map={"float":1,cssFloat:1,styleFloat:1}),j=q._c1||(q._c1={}),g=q._c2||(q._c2={}),f=q._c3||(q._c3={}),d=j[d]||(j[d]=d.replace(/\-(\w)/g,function(x,w){return w.toUpperCase()})),l=g[d]||(g[d]=d.replace(/([A-Z])/g,"-$1").toLowerCase()),k,h;var n=d;if(n.indexOf("border")===0){n=n.replace(/[-]?(left|top|right|bottom)/ig,"")}if(_.arr.indexOf(m,n)!=-1){if(!r.css3Support(d)){return""}else{if(d!="textShadow"){k=p.cssTag2+l.charAt(0).toUpperCase()+l.substr(1);h=p.cssTag1+l}}}if(c[d]){d=xui.browser.ie?"styleFloat":"cssFloat"}u=((v=document.defaultView)&&v.getComputedStyle)?(v=v.getComputedStyle(e,null))?(v.getPropertyValue(l)||(h&&v.getPropertyValue(h))):"":e.currentStyle?(e.currentStyle[d]||e.currentStyle[l]||(k&&(e.currentStyle[k]||e.currentStyle[h]))):((e.style&&(e.style[d]||(k&&e.style[k])))||"")}return s?u?(parseFloat(u.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(u||"")},$transformIE:function(f,q){var s=(f.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){f.style.msfilter=s}f.style.filter=s;f.style.marginTop=f.style.marginLeft="";if(q){var m=function(){var y,w=Math.PI/180,v=function(D,C,F,E,B,A){var z={};z.m11=_.isSet(D)?parseFloat(D):1;z.m12=_.isSet(C)?parseFloat(C):0;z.m21=_.isSet(F)?parseFloat(F):0;z.m22=_.isSet(E)?parseFloat(E):1;z.dx=_.isSet(B)?parseFloat(B):0;z.dy=_.isSet(A)?parseFloat(A):0;return z},u=function(B,A){var z={};z.m11=x(B.m11*A.m11+B.m21*A.m12,10);z.m12=x(B.m12*A.m11+B.m22*A.m12,10);z.m21=x(B.m11*A.m21+B.m21*A.m22,10);z.m22=x(B.m12*A.m21+B.m22*A.m22,10);z.dx=x(A.dx+B.dx,10);z.dy=x(A.dy+B.dy,10);return z},h=function(z){return w*z},x=function(A,B){var z=Math.round(A*Math.pow(10,B))/Math.pow(10,B);return z};this.rotate=function(B){var A=_.isSet(B)?parseFloat(h(parseFloat(B))):0;var z=v(Math.cos(A),-Math.sin(A),Math.sin(A),Math.cos(A),0,0);y=u(z,y)};this.translate=function(A,B){var z=v(1,0,0,1,parseFloat(A),parseFloat(B));y=u(z,y)};this.translateX=function(z){this.translate(z,0)};this.translateY=function(z){this.translate(0,z)};this.scale=function(A,B){var z=v(_.isSet(A)?parseFloat(A):1,0,0,_.isSet(B)?parseFloat(B):1,0,0);y=u(z,y)};this.scaleX=function(z){this.scale(z,1)};this.scaleY=function(z){this.scale(1,z)};this.skew=function(A,B){A=_.isSet(A)?parseFloat(h(parseFloat(A))):0;B=_.isSet(B)?parseFloat(h(parseFloat(B))):0;var z=v(1,Math.tan(A),Math.tan(B),1,0,0);y=u(z,y)};this.skewX=function(z){this.skew(z,0)};this.skewY=function(z){this.skew(0,z)};this.matrix=function(C,B,E,D,A,z){y=u(v(C,B,E,D,A,z),y)};this.getMatrix=function(){return y};this.getFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+y.m11+", M12="+y.m12+", M21="+y.m21+", M22="+y.m22+", Dx="+y.dx+", Dy="+y.dy+", SizingMethod='auto expand')"};this.getX=function(){return y.dx};this.getY=function(){return y.dy};this.reset=function(){y=v(1,0,0,1,0,0)};this.reset()};var d=function(x){var u=new m();var A=x.match(/[A-z]+\([^\)]+/g)||[];for(var w=0;w<A.length;w++){var h=A[w].split("("),y=h[0],z=h[1],v;switch(y){case"rotate":u.rotate(z);break;case"scale":v=z.split(",");u.scale(v[0],v[1]);break;case"scaleX":u.scaleX(z);break;case"scaleY":u.scaleY(z);break;case"skew":v=z.split(",");u.skew(v[0],v[1]);break;case"skewX":u.skewX(z);break;case"skewY":u.skewY(z);break;case"translate":v=z.split(",");u.translate(v[0],v[1]);break;case"translateX":u.translateX(z);break;case"translateY":u.translateY(z);break}}return u};var n=d(q);var e=f.offsetWidth,r=f.offsetHeight;var c=n.getFilter();var s=((f.style.filter?(f.style.filter+","):"")+c).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){f.style.msfilter=s}f.style.filter=s;if(f.getBoundingClientRect){var j=n.getX(),g=n.getY(),l=f.getBoundingClientRect(),p=l.right-l.left,k=l.bottom-l.top;f.style.marginLeft=((e-p)/2+10+j)+"px";f.style.marginTop=((r-k)/2+10+g)+"px"}f.style.transform=q}},$textShadowIE:function(h,k,g){if(!k){var j=function(f){return(f||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "))},d=h.style.filter;if(d){if(xui.browser.ie8){h.style.msfilter=j(d)}h.style.filter=j(d)}if(!g){h.style.backgroundColor=""}}else{var j=function(f,n,l,m){return(g?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+m+", OffX="+f+", OffY="+n+") "+(parseFloat(l)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+l+", Color="+m+")":"")},e=k.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(e){var c=((h.style.filter?(h.style.filter+","):"")+j(e[1],e[2],e[4],e[6]||"#000000")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){h.style.msfilter=c}h.style.filter=c;if(!g){h.style.backgroundColor="#cccccc"}}}},$setGradients:function(s,r){var z=this,u=xui.browser,e=u.ver,g="0123456789ABCDEF",q=function(B,A){B=parseInt(B*A,10)||0;B=(B>255||B<0)?0:B;return g.charAt((B-B%16)/16)+g.charAt(B%16)},f=function(A){A=A.split("");return g.indexOf(A[0].toUpperCase())*16+g.indexOf(A[1].toUpperCase())};if(!window.btoa){window.btoa=function(G){if(/([^\u0000-\u00ff])/.test(G)){return}var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,F,D,B,A=[];while(C<G.length){F=G.charCodeAt(C);B=(C+1)%3;switch(B){case 1:A.push(E.charAt(F>>2));break;case 2:A.push(E.charAt((D&3)<<4|(F>>4)));break;case 0:A.push(E.charAt((D&15)<<2|(F>>6)));A.push(E.charAt(F&63));break}D=F;C++}if(B==1){A.push(E.charAt((D&3)<<4));A.push("==")}else{if(B==2){A.push(E.charAt((D&15)<<2));A.push("=")}}return A.join("")}}var p=function(P,F,D,A,L,X){var M="xui.s-ie8gdfix";if(!P||P.nodeType!=1||!P.style){return}var O=z.getStyle(P,"overflow"),N=z.getStyle(P,"display");if(O!="hidden"||(N!="block"&&N!="relative")){return}if(!F){var S,W=P.childNodes,Q=W.length;for(S=0;S<Q;S++){if(W[S].nodeType==1&&W[S].id==M){P.removeChild(W[S]);break}}P.style.backgroundColor="";var I=((P.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){P.style.msfilter=I}P.style.filter=I}else{X=X||1;var R=D[0].clr,B=D[D.length-1].clr;var V=P.offsetWidth||0,C=P.offsetHeight||0,H=V*X*2,U=C*X*2;if(A=="circle"){H=U=Math.min(H,U)}var Q=-H/2,I=-U/2,G=H,T=U;if(_.isObj(F)){Q=F.left||(Q+"px");I=F.top||(I+"px")}else{switch(F){case"LT":Q=-H/2;I=-U/2;break;case"T":Q=(V-H)/2;I=-U/2;break;case"RT":Q=V-H/2;I=-U/2;break;case"L":Q=-H/2;I=(C-U)/2;break;case"C":Q=(V-H)/2;I=(C-U)/2;break;case"R":Q=V-H/2;I=(C-U)/2;break;case"LB":Q=-H/2;I=C-U/2;break;case"B":Q=(V-H)/2;I=C-U/2;break;case"RB":Q=V-H/2;I=C-U/2;break}Q+="px";I+="px"}var K=document.createElement("div"),J=K.style;K.id=M;J.position="absolute";J.zIndex="0";J.top=I;J.left=Q;J.width=G+"px";J.height=T+"px";J.backgroundColor=R;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;var I=((J.filter?(J.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+E+", finishopacity=0, style=2)").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){J.msfilter=I}J.filter=I;if(P.firstChild){P.insertBefore(K,P.firstChild)}else{P.appendChild(K)}P.style.backgroundColor=B;if(D[D.length-1].opacity){var I=((P.style.filter?(P.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){P.style.msfilter=I}P.style.filter=I}}},y=function(O,G,D){var L="xui.s-ie8gdfix";if(!O||O.nodeType!=1||!O.style){return}var N=z.getStyle(O,"overflow"),M=z.getStyle(O,"display");if(N!="hidden"){z.setStyle(O,"overflow","hidden")}if(M!="block"&&M!="relative"){z.setStyle(O,"display","relative")}if(!G){var T,V=O.childNodes,Q=V.length;for(T=0;T<Q;T++){if(V[T].nodeType==1&&V[T].id==L){O.removeChild(V[T]);break}}O.style.backgroundColor="";var H=(O.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){O.style.msfilter=H}O.style.filter=H}else{var S=D[0].clr,B=D[D.length-1].clr;var U=O.offsetWidth||0,C=O.offsetHeight||0,K=Math.min(U,C),F=0,P=K,R=0,A=K;switch(G){case"LT":F=0;R=0;P=K;A=K;break;case"RT":F=K;R=0;P=0;A=K;break;case"LB":F=0;R=K;P=K;A=0;break;case"RB":F=K;R=K;P=0;A=0;break}var J=document.createElement("div"),I=J.style;J.id=L;I.position="absolute";I.zIndex="0";I.top=0;I.left=0;I.width=U;I.height=C;I.backgroundColor=S;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;var H=((I.filter?(I.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+E+", finishopacity=0, startX="+F+",finishX="+P+",startY="+R+",finishY="+A+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){I.msfilter=H}I.filter=H;if(O.firstChild){O.insertBefore(J,O.firstChild)}else{O.appendChild(J)}O.style.backgroundColor=B;if(D[D.length-1].opacity){var H=((O.style.filter?(O.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){O.style.msfilter=H}O.style.filter=H}}},m=function(C,E,J){var A="xui.s-ie8gdfix";if(!C||C.nodeType!=1||!C.style){return}if(!E){var K=((C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){C.style.msfilter=K}C.style.filter=K;var F,G=C.childNodes,D=G.length;for(F=0;F<D;F++){if(G[F].nodeType==1&&G[F].id==A){C.removeChild(G[F]);break}}C.style.backgroundColor="";var K=((C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){C.style.msfilter=K}C.style.filter=K}else{var I=J[0].clr,B=J[J.length-1].clr,H=1,K;if(J[0].opacity){I=I.replace("#","#"+q(J[0].opacity,255))}if(J[J.length-1].opacity){B=B.replace("#","#"+q(J[J.length-1].opacity,255))}switch(E){case"LT":case"RT":case"LB":case"RB":y(C,E,J);return;case"L":H=1;break;case"R":H=1;K=I;I=B;B=K;break;case"T":H=0;break;case"B":H=0;K=I;I=B;B=K;break}var K=((C.style.filter?(C.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+I+"',EndColorstr='"+B+"',GradientType="+H+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "));if(xui.browser.ie8){C.style.msfilter=K}C.style.filter=K}},w=function(C,G,L,K,M,J){if(!G){C.style.backgroundImage=""}else{J=J||1;var B="svg:"+_.id(),F="0%",E="0%",A=J*100+"%";if(_.isObj(G)){F=G.left||F;E=G.left||E}else{switch(G){case"T":F="50%";E="0%";break;case"B":F="50%";E="100%";break;case"L":F="0%";E="50%";break;case"R":F="100%";E="50%";break;case"LT":F="0%";E="0%";break;case"RT":F="100%";E="0%";break;case"RB":F="100%";E="100%";break;case"LB":F="0%";E="100%";break;case"C":F="50%";E="50%";break}}var I='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+B+'" gradientUnits="userSpaceOnUse" cx="'+F+'" cy="'+E+'" r="'+A+'">';for(var H=0,D=L.length;H<D;H++){I+='<stop stop-color="'+L[H].clr+'" offset="'+L[H].pos+'" '+(_.isSet(L[H].opacity)?(' stop-opacity="'+L[H].opacity+'"'):"")+" />"}I+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+B+')" /></svg>';C.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(I)+'")'}},v=function(D,F,K){if(!F){D.style.backgroundImage=""}else{var B="svg"+_.id(),C="0%",J="0%",A="0%",I="100%";switch(F){case"T":C="50%";J="0%";A="50%";I="100%";break;case"B":C="50%";J="100%";A="50%";I="0%";break;case"L":C="0%";J="50%";A="100%";I="50%";break;case"R":C="100%";J="50%";A="0%";I="50%";break;case"LT":C="0%";J="0%";A="100%";I="100%";break;case"RT":C="100%";J="0%";A="0%";I="100%";break;case"RB":A="0%";I="0%";C="100%";J="100%";break;case"LB":C="0%";J="100%";A="100%";I="0%";break;default:}var H='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+B+'" gradientUnits="userSpaceOnUse" x1="'+C+'" y1="'+J+'" x2="'+A+'" y2="'+I+'">';for(var G=0,E=K.length;G<E;G++){H+='<stop stop-color="'+K[G].clr+'" offset="'+K[G].pos+'" '+(_.isSet(K[G].opacity)?(' stop-opacity="'+K[G].opacity+'"'):"")+"/>"}H+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+B+')" /></svg>';D.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(H)+'")'}},l=function(B,C,J,F,K,E){var H=[],G=[],A=B.style;_.arr.each(J,function(M){var L=M.clr;if(_.isSet(M.opacity)&&L.charAt(0)=="#"){L=L.slice(1);L="rgba("+f(L.substr(0,2))+","+f(L.substr(2,2))+","+f(L.substr(4,2))+","+parseFloat(M.opacity)+")"}H.push(L+" "+M.pos);if(u.isWebKit){G.push("color-stop("+M.pos+","+L+")")}});if(!C){A.backgroundImage=""}else{var D;if(_.isObj(C)){D=C.left+" "+C.top}else{switch(C){case"LT":D="left top";break;case"T":D="center top";break;case"RT":D="right top";break;case"L":D="left center";break;case"C":D="center center";break;case"R":D="right center";break;case"LB":D="left bottom";break;case"B":D="center bottom";break;case"RB":D="right bottom";break;default:D="left top"}}if(u.isWebKit){A.backgroundImage="-webkit-gradient(radial,"+D+", 0px, "+D+", 100%,"+G.join(",")+")"}var I="radial-gradient("+D+","+F+" "+K+","+H.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I}A.backgroundImage="radial-gradient("+K+" "+F+" at "+D+","+H.join(",")+")"}},k=function(C,E,J){var G=[],F=[],A=C.style;_.arr.each(J,function(L){var K=L.clr;if(_.isSet(L.opacity)&&K.charAt(0)=="#"){K=K.slice(1);K="rgba("+f(K.substr(0,2))+","+f(K.substr(2,2))+","+f(K.substr(4,2))+","+parseFloat(L.opacity)+")"}G.push(K+" "+L.pos);if(u.isWebKit){F.push("color-stop("+L.pos+","+K+")")}});if(!E){A.backgroundImage=""}else{var H="to bottom";var D="top";var B="left top, left bottom";switch(E){case"LT":H="135deg";D="-45deg";B="left top, right bottom";break;case"T":D="top";H="to bottom";B="left top, left bottom";break;case"RT":H=D="-135deg";B="right top, left bottom";break;case"L":D="left";H="to right";B="left top, right top";break;case"R":D="right";H="to left";B="right top, left top";break;case"LB":H=D="45deg";B="left bottom, right top";break;case"B":D="bottom";H="to top";B="left bottom, left top";break;case"RB":H="-45deg";D="135deg";B="right bottom, left top";break;default:H=E;D=E;B="left top, right bottom"}if(u.isWebKit){A.backgroundImage="-webkit-gradient(linear,"+B+", "+F.join(",")+")"}var I="linear-gradient({#},"+G.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I.replace("{#}",D)}A.backgroundImage=I.replace("{#}",H)}};var d=r?(r.type||r||"linear").toLowerCase():null,x=r?(r.rate||1):null,c=r?(r.shape||"circle").toLowerCase():null,n=r?(r.size||"farthest-corner").toLowerCase():null,j=r?r.orient:null,h=r?r.stops:null;if(d!="linear"){d="radial"}if(h){if(h.length>1){_.arr.stableSort(h,function(A,B){A=parseFloat(A.pos);B=parseFloat(B.pos);return A>B?1:A==B?0:-1})}else{return}}if(u.ie&&e>=6&&e<9){if(d=="linear"){m(s,j,h)}else{p(s,j,h,c,n,x)}}else{if((u.ie&&e>=9&&e<10)||(u.opr&&e<11.1)){if(d=="linear"){v(s,j,h)}else{w(s,j,h,c,n,x)}}else{if((u.gek&&e>=3.6)||(u.isChrome&&e>=10)||(u.isSafari&&e>=5.1)||(u.ie&&e>=10)||(u.opr&&e>=11.1)){if(d=="linear"){k(s,j,h)}else{if(u.opr&&e<12){w(s,j,h,c,n,x)}else{l(s,j,h,c,n,x)}}}}}},_vAnimate:function(e,f,c,h){if(!c||!c.params||_.isEmpty(c.params)){if(h){_.tryF(h)}return}var g=c.params,d={};e=xui(e);_.each(g,function(k,j){d[j]=k[0]});e.animate(g,function(j){if(f){e.css(d)}},function(j){if(!f){e.css(d)}if(h){_.tryF(h)}},c.duration,0,c.type).start()},$adjustCss:function(f,e){var d={nodeType:1,style:{}};xui.Dom.setStyle(d,f);if(e){var c=[];if(xui.browser.ie&&xui.browser.ver==8&&d.style.filter){d.style["-ms-filter"]=d.style.filter}_.each(d.style,function(h,g){c.push(g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h)});return c.join(";").replace(/[;]+/g,";")}else{return d.style}},_cssfake:{rotate:1,scaleX:1,scaleY:1,translateX:1,translateY:1,skewX:1,skewY:1},setStyle:function(g,d,s){if(d=="rotate"){xui(g).rotate(s);return this}var r=xui.Dom,n=xui.Dom._css3prop,v=xui.browser,u=r._cssfake;if(g.nodeType!=1){return}if(typeof d=="string"){if(u[d]){xui(g)[d](s)}else{var q=this.getStyle,k=q._c1||(q._c1={}),e=q._r1||(q._r1=/alpha\([^\)]*\)/ig),c=q.map||(q.map={"float":1,cssFloat:1,styleFloat:1});var m,l,j;d=k[d]||(k[d]=d.replace(/\-(\w)/g,function(x,w){return w.toUpperCase()}));var p=d;if(p.indexOf("border")===0){p=p.replace(/[-]?(left|top|right|bottom)/ig,"")}if(d=="$gradient"){return r.$setGradients(g,s)}else{if(d=="opacity"){s=_.isFinite(s)?parseFloat(s)>1?1:parseFloat(s)<=0?0:parseFloat(s):1;s=s>0.9999?"":s;if((!r.css3Support("opacity"))&&v.ie){if(s===""){s=1}g.style.opacity=s;g.style.zoom=1;s="alpha(opacity="+100*s+")";var f=(g.style.filter||"").replace(e,"");s=(f?(f+","):"")+s;d="filter";if(v.ver==8){m="msfilter"}}}else{if(_.arr.indexOf(n,p)!=-1){if(!r.css3Support(d)){if(v.ie&&v.ver<9){switch(d){case"transform":linb.Dom.$transformIE(g,s);break;case"boxShadow":linb.Dom.$textShadowIE(g,s,true);break}}if(d=="textShadow"&&v.ie&&v.ver<10){linb.Dom.$textShadowIE(g,s)}return this}else{if(v.cssTag2){if(d!="textShadow"){m=v.cssTag2+d.charAt(0).toUpperCase()+d.substr(1)}}}}else{if(c[d]){d=v.ie?"styleFloat":"cssFloat"}}}}if(d=="filter"){s=s.replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(xui.browser.ver==8?"":" "))}g.style[d]=s;if(m){g.style[m]=s}if(l){g.style[l]=s}if(j){g.style[j]=s}}}else{for(var h in d){arguments.callee.call(this,g,h,d[h])}}},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition".split(","),css3Support:function(C){var u=arguments.callee,g=u._c||(u._c={});C=C.replace("$","").replace(/\-(\w)/g,function(k,f){return f.toUpperCase()});if(C in g){return g[C]}var x=document.createElement("div"),p=x.style,j=false,z=xui.browser,A=function(f){f=f.replace(/\-(\w)/g,function(n,k){return k.toUpperCase()});if(p[f]!==undefined){return true}if(xui.browser.cssTag2){f=xui.browser.cssTag2+f.charAt(0).toUpperCase()+f.substr(1);if(p[f]!==undefined){return true}}return false};x.id="xui_css3_"+_();if(C.indexOf("border")===0){C=C.replace(/[-]?(left|top|right|bottom)/ig,"")}switch(C){case"opacity":case"textShadow":j=p[C]==="";break;case"generatedContent":var w="tmp_css3_test"+_.id(),l="#"+x.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+x.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";linb.CSS.addStyleSheet(l,w);xui("body").append(x);var m=x.offsetHeight;linb.CSS.remove("id",w);xui(x.id).remove(x);j=m>=3;break;case"fontFace":if(z.ie&&z.ver>=6){j=true}else{var w="tmp_css3_test"+_.id(),l='@font-face{font-family:"font";src:url("https://")}',p=linb.CSS.addStyleSheet(l,w),B=p.sheet||p.styleSheet,h=B?((B.cssRules&&B.cssRules[0])?B.cssRules[0].cssText:B.cssText||""):"";j=/src/i.test(h)&&h.indexOf("@font-face")===0;linb.CSS.remove("id",w)}break;case"rgba":p.cssText="background-color:rgba(0,0,0,0.1)";j=p.backgroundColor.indexOf("rgba")!=-1;break;case"hsla":p.cssText="background-color:hsla(120,40%,100%,.5)";j=p.backgroundColor.indexOf("hsla")!=-1||p.backgroundColor.indexOf("rgba")!=-1;break;case"multiplebgs":p.cssText="background:url(//:),url(//:),red url(//:)";j=/(url\s*\(.*?){3}/.test(p.background);break;case"gradient":var y="background-image:",e="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",d="linear-gradient(left top,#000,#fff);",c=[y,d];if(xui.browser.cssTag1){c.push(y);c.push(xui.browser.cssTag1+d)}if(xui.browser.isWebKit){c.push(y);c.push(e)}p.cssText=c.join("");j=!!p.backgroundImage;break;case"transform3d":var q=A("perspective");if(q&&"webkitPerspective" in document.documentElement.style){var w="tmp_css3_test"+_.id(),l="@media (transform-3d),(-webkit-transform-3d){#"+x.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}";linb.CSS.addStyleSheet(l,w);xui("body").append(x);var e=x.offsetLeft,d=x.offsetHeight;linb.CSS.remove("id",w);xui(x.id).remove(x);j=e===9&&d===3}j=q;break;default:j=A(C)}return g[C]=j},$preDefinedAnims:{blinkAlert:{params:{opacity:[1,0]},duration:200,returned:true,times:3},zoomAlert:{params:{scaleX:[1,1.1],scaleY:[1,1.1]},duration:100,returned:true,times:3},translateXAlert:{params:{translateX:[0,5]},duration:100,returned:true,times:3},translateYAlert:{params:{translateY:[0,5]},duration:100,returned:true,times:3},rotateAlert:{params:{rotate:[0,360]},duration:400,returned:false}},$preDefinedEffects:{Classic:[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0.75,1],scaleY:[0.75,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0.75],scaleY:[1,0.75]}}],Blur:[{type:"circOut",duration:200,params:{opacity:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0]}}],Drop:[{type:"circOut",duration:200,params:{opacity:[0,1],translateY:["-25%","0%"],scaleY:[0.5,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateY:["0%","-25%"],scaleY:[1,0.5]}}],"From Below":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0],scaleY:[1,0]}}],"From Above":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[2,1],scaleY:[2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,2],scaleY:[1,2]}}],"Slide In LR":[{type:"circOut",duration:200,params:{opacity:[0,1],translateX:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateX:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Slide In TB":[{type:"circOut",duration:200,params:{opacity:[0,1],translateY:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],translateY:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Flip V":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleY:[1,0]}}],"Flip H":[{type:"circOut",duration:200,params:{opacity:[0,1],scaleX:[0,1]}},{type:"circIn",duration:200,params:{opacity:[1,0],scaleX:[1,0]}}]},_getEffects:function(c,d){if(c&&typeof(c)=="string"){c=this.$preDefinedEffects[c];c=c?d?c[0]:c[1]:null}if(c&&xui.browser.ie&&xui.browser.ver<=8){_.filter(c,function(f,e){return !!xui.Dom._cssfake[e]})}return c},_setPxStyle:function(e,c,f){if(e.nodeType!=1){return false}var d=e.style;if(f||f===0){f=_.isFinite(f)?((parseInt(f,10)||0)+"px"):(f+"");if((c=="width"||c=="height")&&f.charAt(0)=="-"){f="0"}if(d[c]!=f){d[c]=f;return true}}return false},_emptyDivId:"xui.empty::",getEmptyDiv:function(g){var h=1,d,f,c,e,m,k=0,l=document,j=l.body,n=function(p){p.id=d;xui([p]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};g=g||1;while(1){d=this._emptyDivId+h;if(e=xui.Dom.byId(d)){if(!e.firstChild&&++k==g){return xui([e])}}else{e=l.createElement("div");n(e,d);if(j.firstChild){j.insertBefore(e,j.firstChild)}else{j.appendChild(e)}f=xui([e]);j=e=null;return f}h++}j=e=null},setCover:function(e,j,l){var h=arguments.callee,c="xui.temp:cover:",k="xui.temp:message:",g=(typeof(e)=="string"||typeof(e)=="function")?e:"",f,d;if((f=xui(c)).isEmpty()){xui("body").prepend(f=xui.create('<div id="'+c+'" class="xui-cover xui-custom" style="position:absolute;display:none;left:0;top:0;"><div id="'+k+'" class="xui-coverlabel xui-custom" style="position:absolute;"></div></div>'));f.setSelectable(false);xui.setNodeData(f.get(0),"zIndexIgnore",1)}if(xui.Dom.byId(k)){d=xui(k)}if(!e){if(typeof h._label=="string"&&h._label!==j){return}if(h._showed){if(d){d.empty(false)}f.css({zIndex:0,cursor:"",display:"none",cursor:""});h._showed=false}delete h._label}else{if(typeof j=="string"){h._label=j}var m=xui.win;if(!h._showed){f.css({zIndex:xui.Dom.TOP_ZINDEX*10,display:"",width:m.scrollWidth()+"px",height:m.scrollHeight()+"px",cursor:l||"progress"});h._showed=true}if(g){if(typeof(g)=="function"){g(f,d)}else{if(d){d.html(g+"",false);d.css({left:m.scrollLeft()+m.width()/2-d.width()/2+"px",top:m.scrollTop()+m.height()/2-d.height()/2+"px"})}}}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return xui.getNodeData(d,["eHandlers",c])},submit:function(h,g,k,j,f){g=_.isHash(g)?g:{};g=_.clone(g,function(l){return l!==undefined});h=h||"";j=j||(h.substring(0,6).toLowerCase()=="mailto"?"_self":"_blank");var e=[];if(!_.isEmpty(g)){var c,d=[];_.each(g,function(m,l){if(m&&m["xui.UIProfile"]&&m.$xuiFileCtrl){if(c=m.boxing().getUploadObj()){d.push({id:m.$xid,file:c});c.id=c.name=l;g[l]=c}}});k=k||(c?"post":"get");if(k.toLowerCase()=="get"){window.open(h+"?"+_.urlEncode(g),j)}else{_.each(g,function(m,l){if(_.isDefined(m)&&!_.isElem(m)){e.push('<textarea name="'+l+'">'+(typeof m=="object"?_.serialize(m):m)+"</textarea>")}});e.push('<input type="hidden" name="rnd" value="'+_()+'">');e=_.str.toDom('<form target="'+j+'" action="'+h+'" method="'+k+(f?'" enctype="'+f:"")+'">'+e.join("")+"</form>");xui.Dom.getEmptyDiv().append(e);if(d.length){_.arr.each(d,function(m,l){e.append(m.file)})}e.get(0).submit();e.remove();e=null}if(d.length){_.arr.each(d,function(m,l){if(l=xui.getObject(m.id)){if(l["xui.UIProfile"]&&l.boxing()&&l.boxing().setUploadObj){l.boxing().setUploadObj(m.file)}}})}}else{window.open(h,j)}},selectFile:function(f,d){var e=document.createElement("input");e.type="file";if(d){e.accept=d}e.onchange=function(){_.tryF(f,[this,this.files[0]],this)};if(!!window.ActiveXObject||"ActiveXObject" in window){var c=document.createElement("div");e.appendChild(c);c.click();e.removeChild(c)}else{e.click()}e=null},busy:function(d,c){xui.Dom.setCover(c||true,d)},free:function(c){xui.Dom.setCover(false,c)},animate:function(l,j,p,c,k,e,m,g,n,h,d){var f=document.createElement("div");_.merge(l,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++});xui.Dom.setStyle(f,l);document.body.appendChild(f);return xui([f]).animate(j,p,function(){_.tryF(c);if(f.parentNode){f.parentNode.removeChild(f)}f=null},k,e,m,g,n,h,d)},$enableEvents:function(d){if(!_.isArr(d)){d=[d]}var c=this,e;_.arr.each(d,function(f){e=function(h,k,g){if(typeof h=="function"){return this.$addEvent(f,h,k,g)}else{if(h===null){return this.$removeEvent(f,k,g)}}var j=arguments[1]||{};j.$xuiall=(arguments[0]===true);return this.$fireEvent(f,j)};e.$event$=1;c.plugIn(f,e)})}},After:function(D){var v=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){v.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){v.plugIn(c,function(){var p=this.get(0),m=window,r=document;if(p==m||p==r){if("scrollWidth"==c||"scrollHeight"==c){var l=r.documentElement,h=r.body;return Math.max(l[c],h[c])}else{p=xui.browser.contentBox?r.documentElement:r.body}}return p[c]})});var x="padding",z="margin",F="border",E="inner",y="offset",s="outer",n="width",C="height",e="Width",k="Height",f="Top",j="Left",q="top",A="left",g="Right",u="Bottom";_.arr.each([["_"+x+"H",x+f,x+u],["_"+x+"W",x+j,x+g],["_"+F+"H",F+f+e,F+u+e],["_"+F+"W",F+j+e,F+g+e],["_"+z+"W",z+j,z+g],["_"+z+"H",z+f,z+u]],function(h){var d,c=xui.Dom.getStyle;v.plugIn(h[0],function(l){l=l||"both";d=this.get(0);return((l=="both"||l=="left"||l=="top")?parseInt(c(d,h[1]),10):0)+((l=="both"||l=="right"||l=="bottom")?parseInt(c(d,h[2]),10):0)||0})});_.arr.each([["_W",n,"_"+x+"W","_"+F+"W","_"+z+"W",E+e,y+e],["_H",C,"_"+x+"H","_"+F+"H","_"+z+"H",E+k,y+k]],function(c){v.plugIn(c[0],function(M,w,L,U){var K,I,G,O=M.style,T=arguments.callee,H=xui.browser.contentBox,N=T.r1||(T.r1=/%$/),m=xui.Dom.getStyle,P=xui.Dom._setPxStyle,l=typeof L,B;if(l=="undefined"||l=="boolean"){if(L===true){K=(m(M,"display")=="none");if(K){var R=xui.Dom.getEmptyDiv().html("*",false);xui([M]).swap(R);var S,J,Q;S=O.visibility,J=O.position,Q=O.display;J=J||"";S=S||"";Q=Q||"";O.visibility="hidden";O.position="absolute";O.display="block"}}G=xui([M]);switch(w){case 1:I=m(M,c[1]);if((isNaN(parseInt(I,10))||N.test(I))&&!U){I=T(M,2,undefined,true)-(H?G[c[2]]():0)}I=parseInt(I,10)||0;break;case 2:I=M[c[6]];if(!I){if(!U){I=T(M,1,undefined,true)+(H?G[c[2]]():0)}}else{I-=G[c[3]]()}break;case 3:I=M[c[6]];if(!I){I=T(M,1)+(H?G[c[2]]():0)+G[c[3]]()}break;case 4:I=T(M,3);I+=G[c[4]]();break}if(K){O.display=Q;O.position=J;O.visibility=S;G.swap(R);R.empty(false)}return parseInt(I,10)||0}else{switch(w){case 1:if(P(M,c[1],L)){if(xui.Dom.$hasEventHandler(M,"onsize")){var h={};h[c[1]]=1;xui([M]).onSize(true,h)}}break;case 2:T(M,1,L-(H?xui([M])[c[2]]():0));break;case 3:T(M,1,L-(G=xui([M]))[c[3]]()-(H?G[c[2]]():0));break;case 4:T(M,1,L-(G=xui([M]))[c[4]]()-G[c[3]]()-(H?G[c[2]]():0));break}}})});_.arr.each([[E+e,"_W",2],[y+e,"_W",3],[s+e,"_W",4],[E+k,"_H",2],[y+k,"_H",3],[s+k,"_H",4]],function(c){v.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2])}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});_.arr.each([[A+"By",A],[q+"By",q],[n+"By",n],[C+"By",C]],function(c){v.plugIn(c[0],function(r,p){if(r===0){return this}var d,l,h=c[1];return this.each(function(m){d=xui.use(m.$xid)[h]();d=(parseInt(d,10)||0)+r;if(h=="width"||h=="height"){d=d>0?d:0}m.style[h]=d+"px";if(p){l={};l[h]=1;var w=xui.Dom.$hasEventHandler;if((h=="left"||h=="top")&&w(m,"onmove")){xui([m]).onMove(true,l)}if((h=="width"||h=="height")&&w(m,"onsize")){xui([m]).onSize(true,l)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(c){v.plugIn(c,function(m){var h=document.documentElement,d=document.body;if(m!==undefined){return this.each(function(p){if(p===window||p===document){h[c]=d[c]=m}else{p[c]=m}})}else{var l=this.get(0);if(l===window||l===document){if("scrollTop"==c){return window.pageYOffset||(h[c]||d[c]||0)}if("scrollLeft"==c){return window.pageXOffset||(h[c]||d[c]||0)}}return l[c]}})});_.arr.each("width,height,left,top".split(","),function(c){v.plugIn(c,function(B){var H=this,h=H.get(0),p=xui.browser,m=typeof B,w=document,G;if(!h||h.nodeType==3){return}if(m=="undefined"||m=="boolean"){if((c=="width"&&(G="Width"))||(c=="height"&&(G="Height"))){if(w===h){return Math.max(w.body["scroll"+G],w.body["offset"+G],w.documentElement["scroll"+G],w.documentElement["offset"+G])}if(window===h){return p.opr?Math.max(w.body["client"+G],window["inner"+G]):p.kde?window["inner"+G]:(xui.browser.contentBox&&w.documentElement["client"+G])||w.body["client"+G]}}if(c=="width"){B=parseInt(h.style.width,10)||H._W(h,1,B)}else{if(c=="height"){B=parseInt(h.style.height,10)||H._H(h,1,B)}else{B=xui.Dom.getStyle(h,c)}}return B=="auto"?B:(parseInt(B,10)||0)}else{var l=xui.Dom._setPxStyle,G,r,d=_.isFinite(B)?(B+"px"):B;return H.each(function(I){if(I.nodeType!=1){return}if(I.style[c]!==d){if(c=="width"){H._W(I,1,B)}else{if(c=="height"){H._H(I,1,B)}else{if(l(I,c,B)){if((c=="top"||c=="left")&&xui.Dom.$hasEventHandler(h,"onmove")){r={};r[c]=1;xui([I]).onMove(true,r)}}}}}})}})});_.arr.each(xui.Event._events,function(c){_.arr.each(xui.Event._getEventName(c),function(d){v.$enableEvents(d)})})},Initialize:function(){var c=window,e=document;_.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:c});_.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:e});xui.win=xui(["!window"],false);xui.doc=xui(["!document"],false);xui.busy=xui.Dom.busy;xui.free=xui.Dom.free;xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:"inline-block":xui.browser.ie6?["inline-block","inline"]:"inline-block",xui.doc.onKeydown(function(h,g,d){xui.Event.$keyboard=xui.Event.getKey(g);var f=xui.Event,k,j=f.getKey(g);if(j){if(j[0].length==1){j[0]=j[0].toLowerCase()}k=xui.$cache.hookKey[j.join(":")];if(k){if(k[3]){if(typeof k[3]=="function"?false===(k[3])():(!xui(k[3]).size())){delete xui.$cache.hookKey[j.join(":")];return}}if(_.tryF(k[0],k[1],k[2])===false){f.stopBubble(g);return false}}}return true},"document").onKeyup(function(g,f){delete xui.Event.$keyboard;var d=xui.Event,j,h=d.getKey(f);if(h){if(h[0].length==1){h[0]=h[0].toLowerCase()}j=xui.$cache.hookKeyUp[h.join(":")];if(j){if(j[3]){if(typeof j[3]=="function"?false===(j[3])():(!xui(j[3]).size())){delete xui.$cache.hookKeyUp[h.join(":")];return}}if(_.tryF(j[0],j[1],j[2])===false){d.stopBubble(f);return false}}}return true},"document");xui.doc.onClick(function(k,j,m){var l=xui.Event.getSrc(j),g=0,d,f;do{if(l.nodeName=="A"){d=true;break}if(++g>8){break}}while(l=l.parentNode);if(d){f=_.str.trim(l.href||"").toLowerCase();if(xui.History){var h=location.href.split("#")[0];if(!xui.Event.getKey(j).shiftKey&&xui.Event.getBtn(j)=="left"&&(f.indexOf(h+"#")==0||f.indexOf("#")==0)){xui.History.setFI(l.href.replace(h,""))}}if(xui.browser.ie&&(f.indexOf("javascript:")==0||f.indexOf("#")!==-1)){return false}}},"hookA",0);if(xui.browser.ie&&xui.browser.ver<10&&e.body){e.body.onselectstart=function(f,d){f=event.srcElement;while(f&&f.nodeName&&f.nodeName!="BODY"&&f.nodeName!="HTML"){if(d=xui.getNodeData(f,"_onxuisel")){return d!="false"}if(f.nodeName=="INPUT"||f.nodeName=="TEXTAREA"){break}f=f.parentNode}return true}}xui.win.afterUnload(function(){c.onresize=null;if(c.removeEventListener){c.removeEventListener("DOMMouseScroll",xui.Event.$eventhandler3,false)}e.onmousewheel=c.onmousewheel=null;if(xui.browser.isTouch){if(e.removeEventListener){e.removeEventListener((xui.browser.ie&&c.PointerEvent)?"pointerdown":(xui.browser.ie&&c.MSPointerEvent)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown,false);e.removeEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup,false)}else{if(e.detachEvent){e.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown);e.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup)}}}if(xui.browser.ie&&e.body){e.body.onselectstart=null}if("onhashchange" in c){c.onhashchange=null}xui("body").empty();xui([c,e]).$clearEvent();xui.SC.__gc();xui.Thread.__gc();Class.__gc();_.breakO(xui.$cache,2);_.breakO([xui,Class,_],3);c.Namespace=c.Class=c.xui=c.xui_ini=c.linb=c._=undefined},"window",-1)}});Class("xui.Template","xui.absProfile",{Constructor:function(h,f,e,j){var g=arguments.callee.upper,d=_.toArr(arguments);g.apply(this,d);g=null;var c=this;c.$domId=c.KEY+":"+(c.serialId=c._pickSerialId())+":";c.domId=typeof j=="string"?j:c.$domId;c._links={};c.template={root:[["<div></div>"],[]]};c.properties={};c.events={};c.$template={};c.link(c.constructor._cache,"self").link(xui._pool,"xui");c.Class=c.constructor;c.box=c.constructor;c.boxing=function(){return this};if(h){c.setTemplate(typeof h=="string"?{root:h}:h)}if(e){c.setEvents(e)}if(f){c.setProperties(f)}return c},Instance:{renderId:null,__gc:function(){var c=this,d=xui.$cache.reclaimId;if(!c.$noReclaim){(d[c.KEY]||(d[c.KEY]=[])).push(c.serialId)}else{delete c.$noReclaim}delete xui.$cache.profileMap[c.domId];delete xui.$cache.profileMap[c.$domId];c.unLinkAll();_.breakO([c.properties,c.event,c],2)},_reg0:/^\w[\w_-]*$/,show:function(c){if(!c){c=xui("body")}c=xui(c);c.append(this);return this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],false)},setDomId:function(g){var d=this,f=xui.$cache.profileMap,e=d._reg0;if(typeof g=="string"&&e.test(g)&&!document.getElementById(g)){if(d.domId!=d.$domId){delete f[d.domId]}d.domId=g;if(d.renderId){d.getRootNode().id=g}if(f[d.$domId]){f[g]=d}}return d},destroy:function(){if(this.renderId){var c=this.getRootNode();xui.$purgeChildren(c);if(c.parentNode){c.parentNode.removeChild(c)}c=null}else{this.__gc()}},setEvents:function(d,e){var c=this;if(typeof d=="object"){c.events=d}else{c.events[d]=e}return c},setTemplate:function(f,j){var c=this,e=c.template,k=c.$template,g;if(typeof f=="object"){c.template=f;g={};for(var d in f){g[d||"root"]=c._buildTemplate(f[d])}c.$template=g}else{if(typeof j=="string"){k[f]=c._buildTemplate(e[f]=j)}else{k.root=c._buildTemplate(e.root=f)}}return c},setProperties:function(d,e){var c=this;if(typeof d=="object"){c.properties=d}else{c.properties[d]=e}return c},getItem:function(h){var g=xui.getNodeData(h);if(!g){return}var j=g.tpl_evid,d=g.tpl_evkey;if(!j||!d){return}var c=arguments.callee,e=c.f||(c.f=function(n,m,q){var l,p,k,f;for(k in n){p=n[k];if(_.isArr(p)&&(m==k||m.indexOf((n.tpl_evkey||k)+".")===0)){for(l=0;f=p[l];l++){if(f.tpl_evkey==m&&f.id==q){return f}else{if(f=e(f,m,q)){return f}}}}}});return e(this.properties,d,j)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.KEY];if(c&&c[0]){return c.shift()}return this.constructor._ctrlId.next()},render:function(){var z=this;if(!z.renderId){var d=xui.$getGhostDiv();xui.$cache.profileMap[z.domId]=xui.$cache.profileMap[z.$domId]=this;d.innerHTML=z.toHtml();var c=z.events,q=xui.Event._eventHandler,h=d.getElementsByTagName("*"),n=z.$domId,u=function(){return xui.Event(arguments[0],this,0,n)},s,m,r,p,g,x,e,y,w;if(m=h.length){for(s=0;s<m;s++){if((g=h[s]).nodeType!=1){continue}x=g.getAttribute("tpl_evkey");e=g.getAttribute("tpl_evid");if(x!==null&&e!==null){w=xui.$registerNode(g);w.tpl_evkey=x;w.tpl_evid=e;if(y=c[x]){w=w.eHandlers||(w.eHandlers={});for(r in y){w[r]=u;if(p=q[r]){w[p]=g[p]=u}}}g.removeAttribute("tpl_evkey");g.removeAttribute("tpl_evid")}}if(!d.firstChild.$xid){xui.$registerNode(d.firstChild)}z.renderId=d.firstChild.$xid}g=d=null}return z},refresh:function(){var e=this;if(e.renderId){var d=document.createElement("span"),f=e.getRootNode(),c=xui.$cache.profileMap;delete c[e.domId];delete c[e.$domId];if(f.parentNode){f.parentNode.replaceChild(d,f)}e.destroy();delete e.renderId;e.render();if(d.parentNode){d.parentNode.replaceChild(e.getRootNode(),d)}d=f=null}return e},renderOnto:function(g){var c=this,h,f,e="style",d;if(typeof g=="string"){g=document.getElementById(g)}h=g.id||c.domId;if(!c.renderId){c.render()}f=c.getRootNode();g.parentNode.replaceChild(f,g);if(f.tabIndex!=g.tabIndex){f.tabIndex!=g.tabIndex}if(g.className){f.className+=g.className}if(xui.browser.ie&&(d=g.style.cssText)){f.style.cssText+=d+""}else{if(d=g.getAttribute(e)){f.setAttribute(e,(f.getAttribute(e)||"")+d)}}this.setDomId(h)},toHtml:function(c){var d=_.copy(c||this.properties||{});d.tpl_evkey="root";return this._doTemplate(d)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(f){if(typeof f=="string"){var e=[[],[]],d=e[0],c=e[1];f=f.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ');f.replace(this._reg1,function(h,g,k,j){if(g){d[d.length]=g}c[d.length]=d[d.length]=k;if(j){d[d.length]=j}return""});return e}else{return f}},_getEV:function(j,d,c,f){var g=xui.getNodeData(f);if(!g){return}var l=this.events,e=g.tpl_evkey,h=(e&&l&&l[e])||l,k=h&&h[c];if(k){j.push(k)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(j,x,y){if(!j){return""}var u=this,k=arguments.callee,w,q,f,v=_.isArr(j),m=u.$template,p=m[x||"root"],c=!y;y=y||[];if(v){if(typeof p!="function"){p=k}for(var h=0;q=j[h++];){q.tpl_evkey=x;p.call(u,q,x,y)}}else{if(typeof p=="function"){p.call(u,j,x,y)}else{x=x?x+".":"";var e=p[0],d=p[1];for(var h=0,g=e.length;h<g;h++){if(f=d[h]){if(f in j){q=typeof j[f]=="function"?j[f].call(u,f,j):j[f];if(m[w=x+f]){k.call(u,q,w,y)}else{y[y.length]=q}}}else{y[y.length]=e[h]}}}}if(c){return y.join("").replace(u._reg3,'$1 id="'+u.$domId+'" $2$3')}},serialize:function(){var c=this,f=_.serialize,e=xui.absObj.$specialChars,d=_.isEmpty(c.properties)?null:_.clone(c.properties,function(h,g){return !e[(g+"").charAt(0)]});return"new xui.Template("+f(c.template||null)+","+f(d)+","+f(_.isEmpty(c.events)?null:c.events)+","+f(c.$domId!=c.domId?c.domId:null)+")"}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c:(c&&c.id))&&(c=xui.$cache.profileMap[c])&&c["xui.Template"]){return c.boxing()}},_cache:[],_ctrlId:new _.id()}});Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(g){var f=this,e=f._profile,c=xui.win;f._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};e.ox=e.x;e.oy=e.y;if(f._proxy=g){f._proxystyle=g.get(0).style;f._profile.curPos=f._cssPos=f._proxy.cssPos();f._cssPos_x=e.x-f._cssPos.left;f._cssPos_y=e.y-f._cssPos.top;e.restrictedLeft=e.x-(e.maxLeftOffset||0);e.restrictedRight=e.x+(e.maxRightOffset||0);e.restrictedTop=e.y-(e.maxTopOffset||0);e.restrictedBottom=e.y+(e.maxBottomOffset||0);f._proxyLeft=f._pre.left=f._cssPos.left;f._proxyTop=f._pre.top=f._cssPos.top;if("move"!==e.dragType){f._proxy.css("zIndex",xui.Dom.TOP_ZINDEX*10);xui.setNodeData(f._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var f=this,e=null,c=false;_.tryF(f.$reset);f.setDropFace();f._resetProxy();f.$proxySize=50;f.$mousemove=f.$mouseup=f.$onselectstart=f.$ondragstart="*";f._cursor="";f._pre={};f._proxyLeft=f._proxyTop=f._cssPos_x=f._cssPos_y=0;f._stop=c;if(f._onDrag&&f._onDrag.tasks){f._onDrag.tasks.length=0;delete f._onDrag.tasks}if(f._onDragover&&f._onDragover.tasks){f._onDragover.tasks.length=0;delete f._onDragover.tasks}if(f._c_droppable){f._c_droppable.length=0}f._c_droppable=f._c_dropactive=f._cssPos=f._box=f._dropElement=f._source=f._proxy=f._proxystyle=f._onDrag=f._onDragover=e;f._profile={$id:_()+"",dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:xui.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:e,maxLeftOffset:e,maxRightOffset:e,maxTopOffset:e,targetNode:e,targetCSS:e,dragKey:e,dragData:e,targetLeft:e,targetTop:e,targetWidth:e,targetHeight:e,targetOffsetParent:e,targetCallback:e,tagVar:e,shadowFrom:e,proxyNode:e,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:e,restrictedRight:e,restrictedTop:e,restrictedBottom:e,dropElement:e};f.__touchingfordd=0;return f},abort:function(){this._stop=true},_end:function(){var h=this,f=window,l=document,e=l.body,j="onmousedown",c="onmousemove",m="onmouseup",g,k;if(xui.browser.isTouch){g=(xui.browser.ie&&f.PointerEvent)?"onpointermove":(xui.browser.ie&&f.MSPointerEvent)?"onmspointermove":"ontouchmove";k=(xui.browser.ie&&f.PointerEvent)?"onpointerup":(xui.browser.ie&&f.MSPointerEvent)?"onmspointerup":"ontouchend"}if(h._proxy){h._unpack()}if(h.$onselectstart!="*"){e.onselectstart=h.$onselectstart}if(h.$ondragstart!="*"){l.ondragstart=h.$ondragstart}if(h.$mousemove!="*"){l[c]=h.$mousemove}if(h.$mouseup!="*"){l[m]=h.$mouseup}if(xui.browser.isTouch){if(h.$touchmove!="*"){l[g]=h.$touchmove}if(h.$touchend!="*"){l[k]=h.$touchend}}return h},startDrag:function(v,h,f,p,g){var w=this,j=window,n;if(w._profile.isWorking){return false}w._end()._reset();w._profile.isWorking=true;w.__touchingfordd=v.type=="xuitouchdown";f=_.isHash(f)?f:{};v=v||j.event;if(xui.Event.getBtn(v)!=="left"){return true}w._source=f.targetNode=xui(h);w._cursor=w._source.css("cursor");if((n=f.targetNode.get(0))&&!n.id){n.id=xui.Dom._pickDomId();n=null}w._defer=f.dragDefer=_.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=w._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var y=document,m=y.body,l=xui.Event.getPos(v),x="onmousedown",u="onmousemove",q="onmouseup",k,c;if(xui.browser.isTouch){k=(xui.browser.ie&&j.PointerEvent)?"onpointermove":(xui.browser.ie&&j.MSPointerEvent)?"onmspointermove":"ontouchmove";c=(xui.browser.ie&&j.PointerEvent)?"onpointerup":(xui.browser.ie&&j.MSPointerEvent)?"onmspointerup":"ontouchend"}f.x=l.left;f.y=l.top;f.dragKey=p||f.dragKey||null;f.dragData=g||f.dragData||null;var s=xui.Event.getSrc(v);w._start=function(B){var A=w._profile;_.merge(A,f,"with");w._source.beforeDragbegin();if(w._stop){w._end()._reset();return false}if(xui.Event&&(n=w._source.get(0))){xui.Event._preDroppable=n.id;n=null}if(A.dragType=="icon"){A.targetReposition=false}w._ini(A.dragType=="none"?null:w._pack(l,A.targetNode));if(f.x>=w._box.width||f.y>=w._box.height){w._end()._reset();return true}w._source.onDragbegin();if(A.dragDefer<1){w.$mousemove=y[u];w.$mouseup=y[q];if(xui.browser.isTouch){w.$touchmove=y[k];w.$touchend=y[c]}}if(xui.browser.ie){_.setTimeout(function(){if(s.releaseCapture){s.releaseCapture()}})}y[u]=w.$onDrag;y[q]=w.$onDrop;if(xui.browser.isTouch){y[k]=w.$onDrag;y[c]=w.$onDrop}w._source.afterDragbegin();if(A.dragDefer>0){w.$onDrag.call(w,B)}if(xui.browser.isTouch&&w.__touchingfordd){w._c_droppable=[];var z=xui.$cache.droppable[A.dragKey],d=[];_.arr.each(z,function(E){if(!xui.use(E).get(0)){d.push(E);return}var D=xui.use(E),F=D.offsetHeight(),e=D.offsetWidth(),C=D.css("visibility"),G;if(e&&F&&C!="hidden"){G=D.offset();G.width=e;G.height=F;G.id=E;w._c_droppable.unshift(G)}});if(d.length){_.arr.each(d,function(e){_.arr.removeValue(z,e)})}}};if(xui.browser.ie){w.$ondragstart=y.ondragstart;w.$onselectstart=m.onselectstart;y.ondragstart=m.onselectstart=null;if(y.selection&&y.selection.empty){try{y.selection.empty()}catch(v){}}}xui.Event.stopBubble(v);if(f.targetNode.get(0)!==y){xui(y).onMousedown(true,xui.Event.getEventPara(v,l))}if(f.dragDefer<1){_.tryF(w._start,[v],w);return false}else{w.$mouseup=y[q];y[q]=function(d){xui.DragDrop._end()._reset();return _.tryF(document.onmouseup,[d],null,true)};if(xui.browser.isTouch){w.$touchend=y[c];y[c]=y[q]}var r={};w.$mousemove=y[u];y[u]=function(z){var d=xui.Event.getPos(z);if(d.left===r.left&&d.top===r.top){return}r=d;if(--w._defer<=0){xui.DragDrop._start(z)}return false};if(xui.browser.isTouch){w.$touchmove=y[k];y[k]=y[u]}}},$onDrag:function(m){var q=xui.DragDrop,c=q._profile;if(q.$SimulateMousemoveInMobileDevice){return false}m=m||window.event;if(!c.isWorking||q._stop){q.$onDrop(m);return true}var s=xui.Event.getPos(m);c.x=s.left;c.y=s.top;if(!c.isWorking){return false}if(q._proxy){if(!c.verticalOnly){q._proxyLeft=Math.floor(q._left(((c.maxLeftOffset!==null&&c.x<=c.restrictedLeft)?c.restrictedLeft:(c.maxRightOffset!==null&&c.x>=c.restrictedRight)?c.restrictedRight:c.x)-q._cssPos_x));if(q._proxyLeft-q._pre.left){q._proxystyle.left=q._proxyLeft+"px"}q._pre.left=q._proxyLeft;c.curPos.left=q._proxyLeft+q.$proxySize}if(!c.horizontalOnly){q._proxyTop=Math.floor(q._top(((c.maxTopOffset!==null&&c.y<=c.restrictedTop)?c.restrictedTop:(c.maxBottomOffset!==null&&c.y>=c.restrictedBottom)?c.restrictedBottom:c.y)-q._cssPos_y));if(q._proxyTop-q._pre.top){q._proxystyle.top=q._proxyTop+"px"}q._pre.top=q._proxyTop;c.curPos.top=q._proxyTop+q.$proxySize}}else{c.curPos.left=c.x;c.curPos.top=c.y}if(q._onDrag!=1){if(q._onDrag){q._onDrag(m,q._source._get(0))}else{q._onDrag=1;q._source.onDrag(true,xui.Event.getEventPara(m,s))}}if(xui.browser.isTouch&&q.__touchingfordd){if(q._c_droppable){for(var h=0,g=q._c_droppable.length;h<g;h++){var f=q._c_droppable[h],n=xui.use(f.id).get(0),k=q._c_dropactive,r=xui.use(k).get(0);if(c.x>=f.left&&c.y>=f.top&&c.x<=(f.left+f.width)&&c.y<=(f.top+f.height)){if(k==f.id){var j=m.changedTouches[0];q.$SimulateMousemoveInMobileDevice=1;xui.Event.simulateEvent(n,"mousemove",{screenX:j.screenX,screenY:j.screenY,clientX:j.clientX,clientY:j.clientY});delete q.$SimulateMousemoveInMobileDevice}else{xui.Event.simulateEvent(n,"mouseover",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top});q._c_dropactive=f.id;if(k&&r){xui.Event.simulateEvent(r,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}}break}else{if(k==f.id){if(r){xui.Event.simulateEvent(r,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}q._c_dropactive=null;break}}}}}return false},$onDrop:function(h){var j=xui.DragDrop,g=j._profile,c=xui.Event;h=h||window.event;j._end();if(g.isWorking){j.setDropFace();var f=j._source.onDragstop(true,c.getEventPara(h));if(j._dropElement){xui.use(j._dropElement).onDrop(true,c.getEventPara(h))}}j._reset();c.stopBubble(h);_.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var e=this,c=e._profile;c.offset=e._proxy?{x:e._proxyLeft-c.ox+e._cssPos_x,y:e._proxyTop-c.oy+e._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(k,h){var l=this,g='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",e=":dashed 1px #ff6600;",j=l._Region,c=l._rh,f="backgroundColor";if(j&&j.parent()){j.remove(false)}if(l._R){l._R.css(f,l._RB);delete l._R;delete l._RB}if(k){if(!j||!j.get(0)){j=l._Region=xui.create(g+"top"+e+'left:0;top:0;width:100%;height:0;"></div>'+g+"right"+e+'right:0;top:0;height:100%;width:0;"></div>'+g+"bottom"+e+'bottom:0;left:0;width:100%;height:0;"></div>'+g+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=l._rh=xui([j.get(1),j.get(3)])}k=xui(k);if(xui.browser.ie6){c.height("100%")}if(k.css("display")=="block"){xui.setNodeData(j.get(0),"zIndexIgnore",1);k.append(j);j.top(k.scrollTop()).left(k.scrollLeft());if(xui.browser.ie6&&!c.get(0).offsetHeight){c.height(k.get(0).offsetHeight)}}else{l._RB=k.get(0).style[f];l._R=k;k.css(f,"#FA8072")}l.setDragIcon(h||"move")}else{l.setDragIcon("none")}return l},setDragIcon:function(f){_.resetRun("setDropFace",null);var h=this,g=h._profile,e=g.proxyNode,c=h._Icons;if(e&&g.dragType=="icon"){e.first(4).css(typeof f=="object"?f:{backgroundPosition:(c[f]||f)})}return h},_setProxy:function(k,j){var e,c,h=this,f=h._profile,g=xui.Dom;if(!g.byId(h._id)){xui("body").prepend(xui.create('<div id="'+h._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+h.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+h._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>"))}e=xui(h._id);if(f.dragKey){h.$proxySize=0;e.css("padding",0)}else{j.left-=h.$proxySize;j.top-=h.$proxySize;if(!f.targetOffsetParent){g.setCover(true,null,f.dragCursor)}}if(c=f.targetOffsetParent){xui(c).append(e)}if(k){xui(h._idi).empty(false).append(k);f.proxyNode=k}else{f.proxyNode=xui(h._idi)}e.css({display:"",zIndex:g.TOP_ZINDEX*10,cursor:f.dragCursor}).offset(j,c);xui.setNodeData(e.get(0),"zIndexIgnore",1);return e},_resetProxy:function(){var m=this,h=m._profile,l=xui.Dom,g=m._id,f=m._idi;if(l.byId(g)){var e,c,j=xui(f),e=xui(g);if(xui.browser.ie6){j.html("&nbsp;")}else{j.empty()}j.attr("style","font-size:0;line-height:0;");xui("body").prepend(e.css({zIndex:0,cursor:"",display:"none",padding:m.$proxySize+"px"}));h.proxyNode=m._proxystyle=null;l.setCover(false)}},_pack:function(k,f){var g,j={},m={},h=this,c=h._profile,l;if(c.targetLeft===null||null===c.targetTop){l=f.offset(null,c.targetOffsetParent)}j.left=null!==c.targetLeft?c.targetLeft:l.left;j.top=null!==c.targetTop?c.targetTop:l.top;switch(c.dragType){case"deep_copy":case"copy":var l;m.width=_.isNumb(c.targetWidth)?c.targetWidth:(f.cssSize().width||0);m.height=_.isNumb(c.targetHeight)?c.targetHeight:(f.cssSize().height||0);var e=f.clone(c.dragType=="deep_copy").css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:c.dragCursor,cssFloat:"none"}).cssSize(m).id("",true).css("opacity",0.8);if(c.targetCallback){c.targetCallback(e)}e.query("*").id("",true);if(c.targetCSS){e.css(c.targetCSS)}g=h._setProxy(e,j);break;case"shape":m.width=null!==c.targetWidth?c.targetWidth:f.offsetWidth();m.height=null!==c.targetHeight?c.targetHeight:f.offsetHeight();m.width-=2;m.height-=2;g=h._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(m),j);break;case"blank":g=h._setProxy(null,j);break;case"icon":j.left=_.isNumb(c.targetLeft)?c.targetLeft:(k.left+16);j.top=_.isNumb(c.targetTop)?c.targetTop:(k.top+16);l='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+c.dragIcon+") no-repeat left top;width:"+(_.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(_.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?xui(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";g=h._setProxy(xui.create(l).css("opacity",0.8),j);break;case"move":h.$proxySize=0;g=f;if(g.css("position")!="absolute"){g.css("position","absolute").offset(j)}g.css("cursor",c.dragCursor)}return g},_unpack:function(){var h=this,g=h._profile,c,e;if(g.targetReposition&&("move"!=g.dragType)){if((c=xui(h._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(xui.browser.ie){c.cssRegion({right:"",bottom:""})}c.offset(g.curPos,g.targetOffsetParent||document.body)}}}if("move"==g.dragType){h._source.css("cursor",h._cursor)}},_unRegister:function(f,e){var h=this._eh;xui([f]).$removeEvent("beforeMouseover",h).$removeEvent("beforeMouseout",h).$removeEvent("beforeMousemove",h);var g=xui.getNodeData(f.$xid,["_dropKeys"]),j=xui.$cache.droppable;if(g){for(var d in g){if(j[d]){_.arr.removeValue(j[d],f.$xid)}}}xui.setNodeData(f.$xid,["_dropKeys"])},_register:function(e,p){var g=this._eh;xui(e).beforeMouseover(function(q,l,h){var c=xui.DragDrop,q=c._profile;if(q.dragKey&&xui.getNodeData(h,["_dropKeys",q.dragKey])){c.setDropElement(h);c._onDragover=null;xui.use(h).onDragenter(true);if(c._dropElement){_.resetRun("setDropFace",c.setDropFace,0,[h],c)}}},g).beforeMouseout(function(q,l,h){var c=xui.DragDrop,q=c._profile;if(q.dragKey&&xui.getNodeData(h,["_dropKeys",q.dragKey])){xui.use(h).onDragleave(true);if(c._dropElement==h){c.setDropElement(c._onDragover=null);_.resetRun("setDropFace",c.setDropFace,0,[null],c)}}},g).beforeMousemove(function(c,u,q){var l=xui.DragDrop,r=l._onDragover,s=l._profile;if(r==1){return}if(l._dropElement==q&&s.dragKey&&xui.getNodeData(q,["_dropKeys",s.dragKey])){if(r){r(u,q)}else{l._onDragover=1;xui.use(q).onDragover(true,xui.Event.getEventPara(u))}}},g);var d=xui.getNodeData(e.$xid,["_dropKeys"]),m=xui.$cache.droppable;if(d){for(var j in d){if(m[j]){_.arr.removeValue(m[j],e.$xid)}}}var k={},n=p.split(/[^\w-]+/);for(var j=0,f=n.length;j<f;j++){k[n[j]]=1;m[n[j]]=m[n[j]]||[];m[n[j]].push(e.$xid)}xui.setNodeData(e.$xid,["_dropKeys"],k)}},After:function(){this._reset();_.each({startDrag:function(g,d,c,f){xui.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},draggable:function(d,h,g,l,k){var e=this,k=k?typeof(k)=="function"?_.tryF(getTarget,[],this):xui(k):null,c=xui.DragDrop;if(!k||!k.get(0)){k=e}e.addClass("xui-ui-unselectable");if(d===undefined){d=true}else{if(typeof d=="object"){h=d;d=true}}var j=function(m,f,n){if(xui.getId(xui.Event.getSrc(f))!=n){return true}k.startDrag(f,h,g,l)};if(!!d){e.$addEvent("beforeMousedown",j,c._eh,-1)}else{e.$removeEvent("beforeMousedown",c._eh)}return e},droppable:function(c,e){if(c===undefined){c=true}e=e||"default";var f=xui.DragDrop;return this.each(function(d){if(!!c){f._register(d,e)}else{f._unRegister(d,e)}})}},function(d,c){xui.Dom.plugIn(c,d)})}});Class("xui.Cookies",null,{Static:{set:function(c,g,j,h,f,e){if(_.isHash(c)){for(var d in c){this.set(d,c[d],j,h,f,e)}}else{if(typeof g!="string"){g=_.serialize(g)}document.cookie=escape(c+"")+"="+escape(g)+(j?"; expires="+(new Date((new Date()).getTime()+(24*60*60*1000*j))).toGMTString():"")+(h?"; path="+h:"")+(f?"; domain="+f:"")+(e?"; secure":"")}return this},get:function(f){var g,e,h,d=document.cookie.split("; "),j={},c=function(k){return/^\s*\{[\s\S]*\}$/.test(k)?_.unserialize(k):/^\s*\[[\s\S]*\]$/.test(k)?_.unserialize(k):k};for(g=0;g<d.length;g++){e=d[g].split("=");h=e[1]?unescape(e[1]):"";j[e[0]]=c(h)||h;if(f&&e[0]==escape(f)){return j[e[0]]}}return f?null:j},remove:function(c){return this.set(c,"",-1).set(c,"/",-1)},clear:function(){_.arr.each(document.cookie.split(";"),function(c){xui.Cookies.remove(_.str.trim(c.split("=")[0]))})}}});Class("xui.History",null,{Static:{_fid:"xui:history",_type:(xui.browser.ie&&(xui.browser.ver<8))?"iframe":("onhashchange" in window)?"event":"timer",setCallback:function(f){var c=this,e=location.hash;if(e){e="#!"+encodeURIComponent((""+decodeURIComponent(e)).replace(/^#!/,""))}else{e="#!"}c._callback=f;if(f){c._lastFI=decodeURIComponent(e);switch(c._type){case"event":window.onhashchange=c._checker;break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+c._fid+'" src="about:blank" style="display: none;"></iframe>'));var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+e+"');<\/script></head><body></body></html>");d.close();case"timer":if(c._itimer){clearInterval(c._itimer)}c._itimer=setInterval(c._checker,100);break}c._callback(decodeURIComponent(c._lastFI.replace(/^#!/,"")),true)}else{if(c._itimer){clearInterval(c._itimer)}}return c},_checker:function(d){var c=xui.History;if(typeof c._callback!="function"){if(c._itimer){clearInterval(c._itimer)}return}switch(c._type){case"iframe":if(_.isSet(d)){location.hash=d}case"event":case"timer":if(decodeURIComponent(location.hash)!=decodeURIComponent(c._lastFI)){c._lastFI=decodeURIComponent(location.hash);c._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,"")))}break}},getFI:function(){return this._lastFI},setFI:function(f,e){var c=this;if(!c._callback){return}if(f){f="#!"+encodeURIComponent((""+decodeURIComponent(f)).replace(/^#!/,""))}else{f="#!"}if(c._lastFI==decodeURIComponent(f)){return false}switch(c._type){case"iframe":var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+f+"');<\/script></head><body></body></html>");d.close();break;case"event":case"timer":location.hash=c._lastFI=decodeURIComponent(f);if(e!==false){_.tryF(c._callback,[decodeURIComponent(f.replace(/^#!/,""))])}break}}}});Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){var d=xui.DragDrop,c=this;if(d){d.$reset=function(){c._pos={left:d._profile.x,top:d._profile.y}}}xui.CSS.addStyleSheet(".xui-tips{font-size:0;line-height:0;position:absolute;overflow:visible;visibility:hidden;left:-10000px;} .xui-tips-i{font-size:12px;overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c {padding:1px 2px 2px 2px;}",this.KEY);xui.doc.afterMousedown(function(){c._cancel()},"$Tips",-1).afterMousemove(function(j,h){if(d.isWorking){return}var f=xui.Event,g,k;if((g=_.resetRun.$cache)&&g["$Tips"]){c._pos=f.getPos(h)}if(c._from){c._pos=f.getPos(h);c._showF();_.resetRun("$Tips3")}else{if(c._showed&&c.MOVABLE){g=f.getPos(h);k=c._Node.style;k.left=(parseInt(k.left,10)||0)+(g.left-c._pos.left)+"px";k.top=(parseInt(k.top,10)||0)+(g.top-c._pos.top)+"px";c._pos=g}}},"$Tips",-1).afterMouseover(function(p,s){var f=xui.Event,k=f.$FALSE,h=f.getSrc(s),g,r,w,n,q=0,x,u=function(e){if(c._markId){c._cancel()}return e};if(!h){return u(k)}try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&q++<10){h=h.parentNode}if(!(g=(typeof h.id=="string"?h.id:null))){h=null;return u(k)}}catch(s){}if((r=f._getProfile(g))&&r.box&&r.KEY=="xui.UIProfile"){if(r.properties.disableTips||r.behavior.disableTips){h=null;return u(false)}var v=r.behavior.NoTips;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(r.keys[v[m]])===0){return u(false)}}}v=r.behavior.PanelKeys;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(r.keys[v[m]])===0){return u(false)}}}w=r.onShowTips?g:g.replace(c._reg,":");if(c._markId&&w==c._markId){return k}c._markId=w;c._pos=f.getPos(s);if(c._showed){c._from=r;c._enode=g;c._showF()}else{_.resetRun("$Tips",function(){c._from=r;c._enode=g;_.resetRun("$Tips3",function(){if(c._from){c._showF()}})},c.DELAYTIME)}}else{c._cancel()}h=null;return k},"$Tips",-1).afterMouseout(function(l,k){if(c._markId){var j=xui.Event,m,f,g=0,h=k.toElement||k.relatedTarget;if(!h){f=1}else{try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&g++<10){h=h.parentNode}if(!(m=(typeof h.id=="string"?h.id:null))){h=null;f=1}}catch(k){f=1}}if(f){c._cancel()}return j.$FALSE}},"$Tips",-1).afterMouseup(function(g,f){c._cancel()},"$Tips",-1);this._Types={"default":new function(){this.show=function(r,m,q){if(!m){return}var u=this,g,f,v,p,k;if(!(g=u.node)||!g.get(0)){g=u.node=xui.create('<div class="xui-node xui-node-div xui-tips xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>');f=u._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>');u.n=g.first();u._n=f.first();if(xui.Dom.css3Support("boxShadow")){g.css("boxShadow","2px 2px 2px #717C8C");f.css("boxShadow","2px 2px 2px #717C8C")}else{if(typeof g.addShadow=="function"){g.addShadow();f.addShadow()}}xui("body").append(f)}f=u._ruler;if(document.body.lastChild!=g.get(0)){xui("body").append(g,false,true)}v=typeof r=="object"?r[q||xui.Tips.TIPSKEY]:r;if(typeof v=="function"){v=v()}if(v+=""){var j=/^\s*\</.test(v);v=xui.adjustRes(v);xui.Tips._curTips=v;if(!r.transTips||!j){v='<div class="xui-node xui-node-div  xui-uiborder-flat xui-uitd-alt xui-tips-c xui-custom">'+v+"</div>"}u._n.get(0).innerHTML=v;p=f.get(0).offsetWidth+2;if(!j){p=Math.min(c.MAXWIDTH,p)}var e=g.get(0).style,l=u.n.get(0),n=l.style;e.visibility="hidden";l.innerHTML=v;if(xui.browser.ie){e.width=n.width=p+(p%2)+"px";k=l.offsetHeight;e.height=k-(k%2)+"px"}else{n.width=p+"px"}if(m===true){e.visibility="visible"}else{g.popToTop((m["xui.UI"]||m["xui.UIProfile"]||m["xui.Dom"]||m.nodeType==1||typeof m=="string")?m:{left:m.left,top:m.top,region:{left:m.left,top:m.top-12,width:24,height:32}},1)}e=n=l=null}else{g.css("zIndex",0).hide()}};this.hide=function(){this.node.css("zIndex",0).hide()}}}},Static:{_reg:/-[\w]+:/,TIPSKEY:"tips",MAXWIDTH:600,MOVABLE:true,DELAYTIME:400,AUTOHIDETIME:5000,_showF:function(){var d=this,g=d._from,f=xui.Dom.byId(d._enode),k=d._pos,j,h,e,c=true;d._from=d._enode=null;if(!f||!g||!k||!(h=g.box)){return}c=false!==((e=g.CF)&&(e=e.showTips)&&e(g,f,k));if(c!==false){c=false!==(h._showTips&&h._showTips(g,f,k))}if(c!==false){if(((e=g)&&e.tips)||(e&&(e=e.properties)&&e.tips)){d.show(k,e);c=false}else{if((e=g)&&(e=e.properties)&&e.autoTips&&("caption" in e)&&e.tips===""){if(e.caption){d.show(k,{tips:e.caption});c=false}}}}if(c!==false){d.hide()}else{if(!d.MOVABLE){_.resetRun("$Tips2",d.hide,d.AUTOHIDETIME,null,d)}}f=k=g=null},getTips:function(){return this._curTips},setTips:function(c){if(this._curTips&&this._tpl&&this._Node){this._tpl.show(c,true)}},setPos:function(d,c){var e=this;if((e=e._Node)&&(e=e.style)){if(d||d===0){e.left=parseFloat(d)+"px"}if(c||c===0){e.top=parseFloat(c)+"px"}}},show:function(g,f,e){var c=this,d;c._pos=g;if(c._item===f){return}if(typeof f=="string"||(f&&(f[e||xui.Tips.TIPSKEY]))){d=c._tpl=c._Types[f.tipsTemplate]||c._Types["default"];d.show(f,g,e);c._Node=d.node.get(0);c._item=f;c._showed=true}else{c._cancel()}},hide:function(){var c=this;if(c._showed){if(c._tpl){c._tpl.hide()}c._clear()}},_cancel:function(){var c=this;if(c._markId){if(c._showed){c.hide()}else{_.resetRun("$Tips");_.resetRun("$Tips3");c._clear()}}},_clear:function(){var c=this;c._Node=c._curTips=c._markId=c._from=c._tpl=c._item=c._showed=null}}});